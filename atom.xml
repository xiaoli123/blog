<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[é˜¿åŸçš„blog]]></title>
  <subtitle><![CDATA[æŠ“å•ŠæŠ“å•Š~~~]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://qiutc.me/"/>
  <updated>2016-05-10T03:50:37.000Z</updated>
  <id>http://qiutc.me/</id>
  
  <author>
    <name><![CDATA[é˜¿åŸğŸ˜‡]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[javascript ä¸­çš„æ•°ç»„ä½¿ç”¨]]></title>
    <link href="http://qiutc.me/post/javascript-array.html"/>
    <id>http://qiutc.me/post/javascript-array.html</id>
    <published>2016-04-29T12:49:51.000Z</published>
    <updated>2016-05-10T03:50:37.000Z</updated>
    <content type="html"><![CDATA[<h1 id="tip">tip</h1><p>ç³»ç»Ÿå­¦ä¹  Array å¯¹è±¡çš„ç¬”è®°ã€‚</p>
<p><img src="/img/js.jpeg" alt="js"></p>
<h1 id="å®šä¹‰">å®šä¹‰</h1><p>æ•°ç»„çš„æ ‡å‡†å®šä¹‰ï¼šä¸€ä¸ªå­˜å‚¨å…ƒç´ çš„çº¿æ€§é›†åˆï¼Œå…ƒç´ å¯ä»¥é€šè¿‡ç´¢å¼•æ¥ä»»æ„å­˜å–ï¼Œç´¢å¼•é€šå¸¸æ˜¯æ•°å­—ï¼Œç”¨æ¥è®¡ç®—å…ƒç´ ä¹‹é—´å­˜å‚¨ä½ç½®çš„åç§»é‡ã€‚<br>åœ¨javascriptä¸­çš„æ•°ç»„æœ‰äº›ä¸åŒï¼Œä»–ä»¬å…¶å®æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œè¡¨ç¤ºåç§»é‡çš„ç´¢å¼•æ˜¯æ•°ç»„å¯¹è±¡çš„å±æ€§ï¼ˆå­—ç¬¦ä¸²ï¼‰ã€‚æ•ˆç‡ä¸Šä¸å¦‚å…¶ä»–è¯­è¨€é«˜ã€‚</p>
<h1 id="ä½¿ç”¨æ•°ç»„">ä½¿ç”¨æ•°ç»„</h1><h2 id="åˆ›å»ºæ•°ç»„">åˆ›å»ºæ•°ç»„</h2><ul>
<li>é€šè¿‡  <code>var arr1 = [1,2,3]</code></li>
<li>ä½¿ç”¨ new <code>var arr2 = new Array(1,2,3)</code>ï¼ˆæ³¨æ„ï¼šå¦‚æœé‡Œé¢ä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ¯”å¦‚ 10 ï¼Œæ˜¯å®šä¹‰ä¸€ä¸ª length ä¸º10çš„æ•°ç»„ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ <code>undefined</code>ï¼‰</li>
</ul>
<p>åœ¨è¿™é‡Œåˆ›é€ çš„æ•°ç»„å®é™…ä¸Šéƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åæŠŠå¯¹è±¡çš„å¼•ç”¨èµ‹å€¼ç»™å˜é‡ï¼Œå®è´¨ä¸Šæˆ‘ä»¬å¯¹æ•°ç»„çš„æ“ä½œéƒ½æ˜¯å¯¹å¼•ç”¨è¿›è¡Œæ“ä½œã€‚</p>
<h2 id="è¯»å†™æ•°ç»„">è¯»å†™æ•°ç»„</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»å–æ•°ç»„</span></span><br><span class="line">var arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">for</span>(var i = <span class="number">0</span>; i &lt; arr1.length; i++) &#123;</span><br><span class="line">	console.<span class="built_in">log</span>(arr1[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ”¹å˜æ•°ç»„å€¼</span></span><br><span class="line">var arr2 = [];</span><br><span class="line"><span class="keyword">for</span>(var i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">	arr2[i] = i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥ç”¨<code>[]</code>è¯»å–åˆ°ç´¢å¼•çš„æ•°ç»„ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¯¹ä»–è¿›è¡Œèµ‹å€¼æ”¹å˜çš„æ“ä½œã€‚</p>
<h2 id="ç”±å­—ç¬¦ä¸²ç”Ÿæˆæ•°ç»„">ç”±å­—ç¬¦ä¸²ç”Ÿæˆæ•°ç»„</h2><p>å¯ä»¥è°ƒç”¨å­—ç¬¦ä¸²å¯¹è±¡çš„ <code>split()</code> æ–¹æ³•é€šè¿‡ä¸€ä¸ªå­—ç¬¦ä¸²ç”Ÿæˆä¸€ä¸ªæ•°ç»„ã€‚<br><figure class="highlight cal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sentence = <span class="string">'hello world haha hahahha'</span>;</span><br><span class="line"><span class="keyword">var</span> words = sentence.split(<span class="string">' '</span>);</span><br><span class="line">console.log(words);</span><br><span class="line">// [<span class="variable">"hello"</span>, <span class="variable">"world"</span>, <span class="variable">"haha"</span>, <span class="variable">"hahahha"</span>]</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬ç”¨ç©ºæ ¼å·æ¥åˆ‡åˆ†äº†<code>sentence</code>è¿™ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<h2 id="å¯¹æ•°ç»„è¿›è¡Œæ•´ä½“æ€§æ“ä½œ">å¯¹æ•°ç»„è¿›è¡Œæ•´ä½“æ€§æ“ä½œ</h2><p>æŠŠä¸€ä¸ªæ•°ç»„èµ‹ç»™å¦ä¸€ä¸ªæ•°ç»„ã€‚<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">var arr2 = arr1;</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œ arr2 ç­‰äº arr1 äº†ï¼Œä½†æ˜¯åˆ«å¿˜äº†ï¼Œåœ¨ javascript é‡Œé¢æ•°ç»„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥èµ‹å€¼çš„åªæ˜¯ä¸€ä¸ªæ–°çš„å¼•ç”¨ï¼å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº† arr2 ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">var arr2 = arr1;</span><br><span class="line">arr2[<span class="number">4</span>] = <span class="number">5</span>;</span><br><span class="line">console.<span class="built_in">log</span>(arr1);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure></p>
<p>çœ‹è§æ²¡æœ‰ï¼Œarr2 æ”¹å˜äº† arr1 ä¹Ÿæ”¹å˜äº†ï¼Œä»–ä»¬éƒ½æ˜¯æŒ‡å‘åŒä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œè¿™ç§å¤åˆ¶å«åšæµ…å¤åˆ¶ã€‚<br>ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆï¼æ·±å¤åˆ¶ï¼š<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">function <span class="title">copyArr</span><span class="params">(arr)</span> </span>&#123;</span><br><span class="line">	var _arr = [];</span><br><span class="line">	<span class="keyword">for</span>(var i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">		_arr[i] = arr[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> _arr;</span><br><span class="line">&#125;</span><br><span class="line">var arr0 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">var arr1 = copyArr(arr0);</span><br><span class="line">console.<span class="built_in">log</span>(arr1);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line">arr1[<span class="number">4</span>] = <span class="number">5</span>;</span><br><span class="line">console.<span class="built_in">log</span>(arr0);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line">console.<span class="built_in">log</span>(arr1);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç”¨å¾ªç¯éå†æŠŠ arr0 çš„å…ƒç´ å¤åˆ¶ç»™ arr1 çš„å¯¹åº”ç´¢å¼•é‡çš„å…ƒç´ ï¼Œæ”¹å˜ arr1ï¼Œarr0 ä¸æ”¹å˜ã€‚<br>å½“ç„¶è¿™è¿˜æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚è¿™æ˜¯ä¸ªäºŒç»´æ•°ç»„å‘¢ï¼Ÿæ•°ç»„åµŒå¥—å†åµŒå¥—æ•°ç»„å‘¢ï¼Ÿå¯ä»¥åœ¨forå¾ªç¯é‡Œé¢åˆ¤æ–­å…ƒç´ æ˜¯å¦æ•°ç»„ï¼Œç„¶åé€’å½’ã€‚</p>
<h1 id="å­˜å–å‡½æ•°">å­˜å–å‡½æ•°</h1><h2 id="æŸ¥æ‰¾å…ƒç´ ">æŸ¥æ‰¾å…ƒç´ </h2><p><code>indexOf()</code>æ˜¯æœ€å¸¸ç”¨çš„äº†ï¼Œä»–æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œç„¶åæŸ¥æ‰¾æ•°ç»„ä¸­å…ƒç´ ç­‰äºè¿™ä¸ªå‚æ•°å€¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›å¯¹åº”çš„ç´¢å¼•å€¼ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªå‚æ•°ï¼Œè¿”å›<code>-1</code>ï¼Œå¦‚æœç”±å¤šä¸ªï¼Œè¿”å›ç¬¬ä¸€ä¸ªçš„ç´¢å¼•å€¼ã€‚<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>];</span><br><span class="line">console.<span class="built_in">log</span>( arr.indexOf(<span class="number">2</span>) );</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line">console.<span class="built_in">log</span>( arr.indexOf(<span class="number">6</span>) );</span><br><span class="line"><span class="comment">// -1</span></span><br><span class="line">console.<span class="built_in">log</span>( arr.indexOf(<span class="number">3</span>) );</span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure></p>
<p>è¿˜æœ‰ä¸€ä¸ªå¯¹åº”çš„å‡½æ•°æ˜¯<code>lastIndexOf()</code>ä»–æ˜¯ä»åé¢æŸ¥æ‰¾èµ·çš„ï¼Œå¯¹äºå¤šä¸ªï¼Œä¼šè¿”å›æŸ¥æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªçš„ç´¢å¼•å€¼ã€‚<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>];</span><br><span class="line">console.<span class="built_in">log</span>( arr.lastIndexOf(<span class="number">2</span>) );</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line">console.<span class="built_in">log</span>( arr.lastIndexOf(<span class="number">6</span>) );</span><br><span class="line"><span class="comment">// -1</span></span><br><span class="line">console.<span class="built_in">log</span>( arr.lastIndexOf(<span class="number">3</span>) );</span><br><span class="line"><span class="comment">// 4</span></span><br></pre></td></tr></table></figure></p>
<h2 id="æ•°ç»„çš„å­—ç¬¦ä¸²è¡¨ç¤º">æ•°ç»„çš„å­—ç¬¦ä¸²è¡¨ç¤º</h2><p>æŠŠæ•°ç»„è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š<code>toString()</code> å’Œ<code>join()</code>å‰è€…æ˜¯ç”Ÿæˆç”¨<code>,</code>åˆ†å‰²å¼€æ¯ä¸ªå…ƒç´ çš„å­—ç¬¦ä¸²ï¼Œåè€…å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‚æ•°æ¥æŒ‡å¯¼ç”¨è¿™ä¸ªå‚æ•°å€¼æ¥éš”å¼€ï¼Œä¸Šä»£ç ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"><span class="built_in">console</span>.log( arr.toString() ); <span class="comment">// a,b,c</span></span><br><span class="line"><span class="built_in">console</span>.log( arr.join(<span class="string">'-'</span>) ); <span class="comment">// a-b-c</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ç”±å·²æœ‰çš„æ•°ç»„åˆ›å»ºæ–°æ•°ç»„">ç”±å·²æœ‰çš„æ•°ç»„åˆ›å»ºæ–°æ•°ç»„</h2><p>æ–¹æ³•æœ‰ <code>concat()</code>å’Œ<code>splice()</code>å’Œ<code>slice()</code></p>
<ul>
<li><code>concat()</code> æ¥å—å¤šä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œè¿”å›å’Œä»–ä»¬åˆå¹¶çš„ä¸€ä¸ªæ•°ç»„ï¼›</li>
<li><code>splice()</code>æˆªå–ä¸€ä¸ªæ•°ç»„çš„å­é›†è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼›ï¼ˆä¼šæ”¹å˜åŸæ•°ç»„ï¼‰</li>
<li><code>slice()</code>æˆªå–ä¸€ä¸ªæ•°ç»„çš„å­é›†ï¼š<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">var arr2 = [<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line">var arr3 = [<span class="number">8</span>];</span><br><span class="line">var arr4 = arr1.concat(arr2, arr3);</span><br><span class="line">console.<span class="built_in">log</span>(arr4);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5, 6, 8]</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>];</span><br><span class="line">var arr2 = arr1.splice(<span class="number">2</span>, <span class="number">4</span>); <span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆªå–ä½ç½®å¼€å§‹çš„ç´¢å¼•å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯æˆªå–çš„é•¿åº¦</span></span><br><span class="line">console.<span class="built_in">log</span>(arr2);</span><br><span class="line"><span class="comment">// [3, 4, 5, 6]</span></span><br><span class="line"></span><br><span class="line">var arr3 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">var arr4 = arr3.slice(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line"><span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure>
<h1 id="å¯å˜å‡½æ•°">å¯å˜å‡½æ•°</h1><h2 id="ä¸ºæ•°ç»„å¢å‡å…ƒç´ ">ä¸ºæ•°ç»„å¢å‡å…ƒç´ </h2><h3 id="æ·»åŠ ">æ·»åŠ </h3><ul>
<li><code>push()</code>å°†ä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œè¿”å›è¢«æ·»åŠ çš„å…ƒç´ ï¼›</li>
<li><code>unshift()</code>å°†ä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°æ•°ç»„å¼€å¤´ï¼Œè¿”å›è¢«æ·»åŠ çš„å…ƒç´ ï¼›</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">arr.push(<span class="number">5</span>); <span class="comment">// 5</span></span><br><span class="line">console.<span class="built_in">log</span>(arr);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line">arr.unshift(<span class="number">0</span>); <span class="comment">// 0</span></span><br><span class="line">console.<span class="built_in">log</span>(arr);</span><br><span class="line"><span class="comment">// [0, 1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤">åˆ é™¤</h3><ul>
<li><code>pop()</code>åˆ é™¤æ•°ç»„æœ«å°¾çš„ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›è¿™ä¸ªå…ƒç´ å€¼ï¼›</li>
<li><code>shift()</code>åˆ é™¤æ•°ç»„å¼€å¤´çš„ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›è¿™ä¸ªå…ƒç´ å€¼ï¼›</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">arr.pop(); <span class="comment">// 4</span></span><br><span class="line">console.<span class="built_in">log</span>(arr);</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br><span class="line">arr.shift(); <span class="comment">// 1</span></span><br><span class="line">console.<span class="built_in">log</span>(arr);</span><br><span class="line"><span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure>
<h3 id="åœ¨æ•°ç»„ä¸­é—´æ·»åŠ æˆ–è€…åˆ é™¤å…ƒç´ ">åœ¨æ•°ç»„ä¸­é—´æ·»åŠ æˆ–è€…åˆ é™¤å…ƒç´ </h3><p>è¿˜æ˜¯ <code>splice</code>æ–¹æ³•ï¼Œä»–æ¥å—å‚æ•°ï¼š</p>
<ul>
<li>å¯å§‹ç´¢å¼•</li>
<li>éœ€è¦åˆ é™¤çš„æ•°ç»„ä¸ªæ•°ï¼ˆæ·»åŠ å…ƒç´ çš„æ—¶å€™å¯ä»¥æ˜¯0ï¼‰</li>
<li>éœ€è¦æ·»åŠ è¿›æ•°ç»„çš„å…ƒç´ </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ </span></span><br><span class="line">var arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line">arr1.splice(<span class="number">2</span>, <span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line">console.<span class="built_in">log</span>(arr1);</span><br><span class="line"><span class="comment">// [1, 2, 10, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤</span></span><br><span class="line">var arr2 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line">arr2.splice(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line">console.<span class="built_in">log</span>(arr2);</span><br><span class="line"><span class="comment">// [1, 2, 4, 5]</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¸ºæ•°ç»„æ’åº">ä¸ºæ•°ç»„æ’åº</h2><ul>
<li><code>reverse()</code>å¯ä»¥ä½¿æ•°ç»„åè½¬ï¼›</li>
<li><code>sort()</code>æ’åºï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªæ’åºè§„åˆ™å‡½æ•°ä½œä¸ºå‚æ•°ï¼›</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">arr.reverse();</span><br><span class="line">console.<span class="built_in">log</span>(arr);</span><br><span class="line"><span class="comment">// [4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr = [<span class="number">23</span>, <span class="number">11</span>, <span class="number">8</span>, <span class="number">24</span>, <span class="number">55</span>, <span class="number">43</span>];</span><br><span class="line">arr.sort(function(a1, a2) &#123;</span><br><span class="line">	<span class="keyword">return</span> a1 - a2;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// [8, 11, 23, 24, 43, 55]</span></span><br></pre></td></tr></table></figure>
<h1 id="è¿­ä»£æ–¹æ³•">è¿­ä»£æ–¹æ³•</h1><h2 id="ä¸ç”Ÿæˆæ–°çš„æ•°ç»„çš„è¿­ä»£å™¨æ–¹æ³•">ä¸ç”Ÿæˆæ–°çš„æ•°ç»„çš„è¿­ä»£å™¨æ–¹æ³•</h2><ul>
<li><p><code>forEach()</code>ï¼Œä»–æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ å€¼ã€å½“å‰å…ƒç´ ç´¢å¼•ï¼Œå•çº¯éå†æ•°ç»„ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">60</span>];</span><br><span class="line">arr.forEach(function(item, idx) &#123;</span><br><span class="line">	console.<span class="built_in">log</span>(item);</span><br><span class="line">	console.<span class="built_in">log</span>(idx);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>every()</code>æ¥å—ä¸€ä¸ªè¿”å›å€¼ä¸ºå¸ƒå°”ç±»å‹çš„å‡½æ•°ä¸ºå‚æ•°ï¼Œå¯¹æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ ä½¿ç”¨è¯¥å‡½æ•°ï¼Œå¦‚æœå…¨éƒ½æ˜¯è¿”å›<code>true</code>åˆ™è¯¥æ–¹æ³•è¿”å›<code>true</code>ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä»¥ä¸Šè¿”å›<code>false</code>ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•è¿”å›<code>false</code>ï¼›</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">var</span> b1 = arr.every(<span class="function"><span class="keyword">function</span>(<span class="params">item, idx</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> item &gt;= <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(b1); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> b2 = arr.every(<span class="function"><span class="keyword">function</span>(<span class="params">item, idx</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> item &gt;= <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(b2); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>some()</code>æ–¹æ³•ï¼Œå…¶å®å’Œ<code>every()</code>æ–¹æ³•å¾ˆåƒï¼Œé¡¾åæ€ä¹‰ï¼Œå¦‚æœè¿”å›çš„æœ‰ä¸€ä¸ªç»“æœæ˜¯<code>true</code>åˆ™è¿”å›<code>true</code>ï¼Œå¦‚æœå…¨æ˜¯<code>false</code>ï¼Œåˆ™è¿”å›<code>false</code>;</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>];</span><br><span class="line"><span class="keyword">var</span> b1 = arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">item, idx</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> item &gt; <span class="number">5</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(b1); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> b2 = arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">item, idx</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> item &gt; <span class="number">8</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(b2); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>reduce()</code>æ–¹æ³•ï¼Œä»–æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªå‡½æ•°ã€ä¸€ä¸ªåˆå§‹å€¼ï¼ˆå¯ä¸ä¼ ï¼‰ï¼Œå‡½æ•°æ¥å—4ä¸ªå‚æ•°ï¼šä¹‹å‰ä¸€æ¬¡éå†çš„è¿”å›å€¼ï¼ˆç¬¬ä¸€æ¬¡çš„è¯å°±æ˜¯åˆå§‹å€¼ï¼‰ã€å½“å‰å…ƒç´ å€¼ã€å½“å‰å…ƒç´ ç´¢å¼•ã€è¢«éå†çš„æ•°ç»„ï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªå€¼ã€‚ä»–ä¼šä»ä¸€ä¸ªç´¯åŠ ä¹‹å¼€å§‹ä¸æ–­å¯¹åé¢çš„å…ƒç´ è°ƒç”¨è¯¥å‡½æ•°ï¼›</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line">var sum = arr.reduce(function(runningTotal, currentValue) &#123;</span><br><span class="line">	<span class="keyword">return</span> runningTotal + currentValue;</span><br><span class="line">&#125;, <span class="number">10</span>);</span><br><span class="line">console.<span class="built_in">log</span>(sum); <span class="comment">// 31</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>reduceRight()</code>æ–¹æ³•ï¼Œå®ƒå…¶å®å’Œ<code>reduce()</code>æ–¹æ³•ä¸€æ ·ï¼ŒåŒºåˆ«æ˜¯ä»–æ˜¯ä»æ•°ç»„çš„å³è¾¹å¼€å§‹ç´¯åŠ åˆ°å·¦è¾¹çš„ã€‚</p>
</li>
</ul>
<h2 id="ç”Ÿæˆæ–°æ•°ç»„çš„æ–¹æ³•">ç”Ÿæˆæ–°æ•°ç»„çš„æ–¹æ³•</h2><ul>
<li><p><code>map()</code>æ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¤„ç†æ¯ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å€¼ï¼Œç„¶åæ–¹æ³•ä¼šè¿”å›è¿™äº›å€¼ç»„æˆçš„ä¸€ä¸ªæ–°æ•°ç»„ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line">var arr2 = arr.<span class="built_in">map</span>(function(item, idx) &#123;</span><br><span class="line">	<span class="keyword">return</span> item + idx;</span><br><span class="line">&#125;);</span><br><span class="line">console.<span class="built_in">log</span>(arr2);</span><br><span class="line"><span class="comment">// [1, 3, 5, 7, 9]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>filter()</code>æ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„å€¼ï¼Œæœ€åæ–¹æ³•è¿”å›çš„æ•°ç»„æ˜¯è¢«å‡½æ•°è¿”å›<code>true</code>çš„å…ƒç´ çš„é›†åˆï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯è¿‡æ»¤ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>];</span><br><span class="line">var arr2 = arr.filter(function(item, idx) &#123;</span><br><span class="line">	<span class="keyword">return</span> item % <span class="number">2</span> === <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line">console.<span class="built_in">log</span>(arr2);</span><br><span class="line"><span class="comment">// [2, 4, 6, 8]</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="äºŒç»´æ•°ç»„å’Œå¤šç»´æ•°ç»„">äºŒç»´æ•°ç»„å’Œå¤šç»´æ•°ç»„</h1><h2 id="åˆ›å»ºäºŒç»´æ•°ç»„">åˆ›å»ºäºŒç»´æ•°ç»„</h2><p>äºŒç»´æ•°ç»„ç±»ä¼¼äºä¸€ç§è¡Œå’Œåˆ—ç»„æˆçš„æ•°æ®è¡¨æ ¼ã€‚<br>åœ¨javascripté‡Œé¢å®šä¹‰äºŒç»´æ•°ç»„ï¼Œå¯ä»¥æ‰©å±•javascriptçš„æ•°ç»„å¯¹è±¡ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.matrix = <span class="function"><span class="keyword">function</span>(<span class="params">numrows, numcols, initial</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> arr = [];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; numrows; i++) &#123;</span><br><span class="line">		<span class="keyword">var</span> colnums = [];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; numcols; j++) &#123;</span><br><span class="line">			colnums[j] = initial;</span><br><span class="line">		&#125;</span><br><span class="line">		arr[i] = colnums;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> nums = <span class="built_in">Array</span>.matrix(<span class="number">3</span>,<span class="number">4</span>,<span class="number">9</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="å¤„ç†äºŒä½æ•°ç»„ä¸­çš„å…ƒç´ ">å¤„ç†äºŒä½æ•°ç»„ä¸­çš„å…ƒç´ </h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arrs = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>], [<span class="number">12</span>,<span class="number">23</span>,<span class="number">34</span>], [<span class="number">999</span>, <span class="number">000</span>, <span class="number">666</span>]];</span><br><span class="line">var total = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(var row = <span class="number">0</span>; row &lt; arrs.length; row++) &#123;</span><br><span class="line">	<span class="keyword">for</span>(var col = <span class="number">0</span>; col &lt; arrs[row].length; col++) &#123;</span><br><span class="line">		total += arrs[row][col];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">console.<span class="built_in">log</span>(total); <span class="comment">// 1872</span></span><br></pre></td></tr></table></figure>
<h1 id="æ˜¯å¦æ”¹å˜åŸæ•°ç»„">æ˜¯å¦æ”¹å˜åŸæ•°ç»„</h1><ul>
<li>1.ä¸æ”¹å˜åŸæœ‰æ•°ç»„ï¼š<ul>
<li>indexOf</li>
<li>lastIndexOf</li>
<li>toString</li>
<li>join</li>
<li>concat</li>
<li>slice</li>
<li>some</li>
<li>forEach</li>
<li>every</li>
<li>filter</li>
<li>map</li>
<li>reduce</li>
<li>reduceRight<br><br></li>
</ul>
</li>
<li>2.æ”¹å˜æ•°ç»„ï¼š<ul>
<li>splice</li>
<li>push</li>
<li>pop</li>
<li>shift</li>
<li>unshift</li>
<li>reverse</li>
<li>sort</li>
</ul>
</li>
</ul>
<h1 id="es6_ä¸­çš„æ–°ç‰¹æ€§">es6 ä¸­çš„æ–°ç‰¹æ€§</h1><h3 id="Array-from()">Array.from()</h3><p><code>Array.from</code>æ–¹æ³•å¯ä»¥å°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰å’Œå¯éå†ï¼ˆiterableï¼‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ES6æ–°å¢çš„æ•°æ®ç»“æ„Setå’ŒMapï¼‰ã€‚<br>ä¸‹é¢æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ŒArray.fromå°†å®ƒè½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚<br><figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">    <span class="string">'0'</span>: <span class="string">'a'</span>,</span><br><span class="line">    <span class="string">'1'</span>: <span class="string">'b'</span>,</span><br><span class="line">    <span class="string">'2'</span>: <span class="string">'c'</span>,</span><br><span class="line">    length: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [].slice.call(arrayLike); <span class="comment">// ['a', 'b', 'c']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> arr2 = Array.<span class="keyword">from</span>(arrayLike); <span class="comment">// ['a', 'b', 'c']</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Array-of()">Array.of()</h3><p><code>Array.of</code>æ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚<br>è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•°Array()çš„ä¸è¶³ã€‚å› ä¸ºå‚æ•°ä¸ªæ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´Array()çš„è¡Œä¸ºæœ‰å·®å¼‚ã€‚<br>å°±æ˜¯ä¹‹å‰è¯´çš„åœ¨ç”¨ new æ„é€ ä¸€ä¸ªæ•°ç»„çš„æ—¶å€™ï¼Œå¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œé‚£ä¹ˆè¿”å›çš„æ˜¯ä¸€ä¸ªè¯¥é•¿åº¦çš„æ•°ç»„ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr0 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr0);</span><br><span class="line"><span class="comment">// []</span></span><br><span class="line">arr0.length; <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœä½¿ç”¨ <code>Array.of</code>:<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">var arr0 = Array.of(<span class="number">2</span>);</span><br><span class="line">console.<span class="built_in">log</span>(arr0);</span><br><span class="line"><span class="comment">// [2]</span></span><br><span class="line"></span><br><span class="line">var arr1 = Array.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">console.<span class="built_in">log</span>(arr1);</span><br><span class="line"><span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="æ•°ç»„å®ä¾‹çš„copyWithin()">æ•°ç»„å®ä¾‹çš„copyWithin()</h3><p>æ•°ç»„å®ä¾‹çš„copyWithinæ–¹æ³•ï¼Œåœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŸæœ‰æˆå‘˜ï¼‰ï¼Œç„¶åè¿”å›å½“å‰æ•°ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¼šä¿®æ”¹å½“å‰æ•°ç»„ã€‚</p>
<p>å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>targetï¼ˆå¿…éœ€ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹æ›¿æ¢æ•°æ®ã€‚</li>
<li>startï¼ˆå¯é€‰ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹è¯»å–æ•°æ®ï¼Œé»˜è®¤ä¸º0ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚</li>
<li>endï¼ˆå¯é€‰ï¼‰ï¼šåˆ°è¯¥ä½ç½®å‰åœæ­¢è¯»å–æ•°æ®ï¼Œé»˜è®¤ç­‰äºæ•°ç»„é•¿åº¦ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// [4, 5, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<h3 id="æ•°ç»„å®ä¾‹çš„find()å’ŒfindIndex()">æ•°ç»„å®ä¾‹çš„find()å’ŒfindIndex()</h3><p>æ•°ç»„å®ä¾‹çš„findæ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸ºtrueçš„æˆå‘˜ï¼Œç„¶åè¿”å›è¯¥æˆå‘˜ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›undefinedã€‚<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">4</span>, -<span class="number">5</span>, <span class="number">10</span>].find((n) =&gt; n &lt; <span class="number">0</span>)</span><br><span class="line"><span class="comment">// -5</span></span><br></pre></td></tr></table></figure></p>
<p>æ•°ç»„å®ä¾‹çš„findIndexæ–¹æ³•çš„ç”¨æ³•ä¸findæ–¹æ³•éå¸¸ç±»ä¼¼ï¼Œè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœæ‰€æœ‰æˆå‘˜éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›-1ã€‚<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">4</span>, -<span class="number">5</span>, <span class="number">10</span>].find((n) =&gt; n &lt; <span class="number">0</span>)</span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure></p>
<h3 id="æ•°ç»„å®ä¾‹çš„fill()">æ•°ç»„å®ä¾‹çš„fill()</h3><p><code>fill</code>æ–¹æ³•ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ã€‚<br><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>].<span class="function"><span class="title">fill</span><span class="params">(<span class="number">7</span>)</span></span></span><br><span class="line"><span class="comment">// [7, 7, 7]</span></span><br><span class="line"></span><br><span class="line">new <span class="function"><span class="title">Array</span><span class="params">(<span class="number">3</span>)</span></span>.<span class="function"><span class="title">fill</span><span class="params">(<span class="number">7</span>)</span></span></span><br><span class="line"><span class="comment">// [7, 7, 7]</span></span><br></pre></td></tr></table></figure></p>
<p>fillæ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>].fill(<span class="number">7</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment">// ['a', 7, 'c']</span></span><br></pre></td></tr></table></figure></p>
<h3 id="æ•°ç»„å®ä¾‹çš„entries()ï¼Œkeys()å’Œvalues()">æ•°ç»„å®ä¾‹çš„entries()ï¼Œkeys()å’Œvalues()</h3><p>ES6æä¾›ä¸‰ä¸ªæ–°çš„æ–¹æ³•â€”â€”entries()ï¼Œkeys()å’Œvalues()â€”â€”ç”¨äºéå†æ•°ç»„ã€‚<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">of</span> [<span class="string">'a'</span>, <span class="string">'b'</span>].keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> [<span class="string">'a'</span>, <span class="string">'b'</span>].values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 'a'</span></span><br><span class="line"><span class="comment">// 'b'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [index, elem] <span class="keyword">of</span> [<span class="string">'a'</span>, <span class="string">'b'</span>].entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index, elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 "a"</span></span><br><span class="line"><span class="comment">// 1 "b"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="æ•°ç»„å®ä¾‹çš„includes()">æ•°ç»„å®ä¾‹çš„includes()</h3><p><code>Array.prototype.includes</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œä¸å­—ç¬¦ä¸²çš„includesæ–¹æ³•ç±»ä¼¼ã€‚è¯¥æ–¹æ³•å±äºES7ï¼Œä½†Babelè½¬ç å™¨å·²ç»æ”¯æŒã€‚<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">2</span>);     <span class="comment">// true</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">4</span>);     <span class="comment">// false</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, NaN].includes(NaN); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º0ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºå€’æ•°çš„ä½ç½®ï¼Œå¦‚æœè¿™æ—¶å®ƒå¤§äºæ•°ç»„é•¿åº¦ï¼ˆæ¯”å¦‚ç¬¬äºŒä¸ªå‚æ•°ä¸º-4ï¼Œä½†æ•°ç»„é•¿åº¦ä¸º3ï¼‰ï¼Œåˆ™ä¼šé‡ç½®ä¸ºä»0å¼€å§‹ã€‚<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, <span class="number">3</span>);  <span class="comment">// false</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, -<span class="number">1</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="tip">tip</h1><p>ç³»ç»Ÿå­¦ä¹  Array å¯¹è±¡çš„ç¬”è®°ã€‚</p>
<p><img src="/img/js.jpeg" alt="js"></p>
<h1 id="å®šä¹‰">å®šä¹‰</h1><p>æ•°ç»„çš„æ ‡å‡†å®šä¹‰ï¼šä¸€ä¸ªå­˜å‚¨å…ƒç´ çš„çº¿æ€§é›†åˆï¼Œå…ƒç´ å¯ä»¥é€šè¿‡ç´¢å¼•æ¥ä»»æ„]]>
    </summary>
    
      <category term="JavaScript" scheme="http://qiutc.me/tags/JavaScript/"/>
    
      <category term="JavaScript" scheme="http://qiutc.me/categories/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Promise å¯¹è±¡åˆå°è¯•]]></title>
    <link href="http://qiutc.me/post/promise-learn-note.html"/>
    <id>http://qiutc.me/post/promise-learn-note.html</id>
    <published>2016-03-27T07:06:49.000Z</published>
    <updated>2016-05-10T03:50:48.000Z</updated>
    <content type="html"><![CDATA[<p><img src="/img/promise-1.png" alt="Promise"></p>
<h1 id="æµè§ˆå™¨æ”¯æŒ">æµè§ˆå™¨æ”¯æŒ</h1><p><img src="/img/promise-3.jpg" alt="Promise"><br><a href="http://caniuse.com/promises/embed/agents=desktop" target="_blank" rel="external">http://caniuse.com/promises/embed/agents=desktop</a></p>
<h1 id="What_is_Promise?">What is Promise?</h1><p>Promiseæ˜¯æŠ½è±¡å¼‚æ­¥å¤„ç†å¯¹è±¡ä»¥åŠå¯¹å…¶è¿›è¡Œå„ç§æ“ä½œçš„ç»„ä»¶ã€‚</p>
<p>è¯´åˆ° javascript å¼‚æ­¥æ“ä½œï¼Œå¯èƒ½æƒ³åˆ°çš„æ˜¯è¿™æ ·ï¼š<br><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä»¥ jQuery çš„ ajax ä¸ºä¾‹</span></span><br><span class="line">$.<span class="keyword">get</span>(<span class="string">'/get_url'</span>, <span class="function"><span class="keyword">function</span><span class="params">(result, status)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(status == <span class="string">'success'</span>) &#123;</span><br><span class="line">		alert(<span class="string">'success'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(status == <span class="string">'error'</span>) &#123;</span><br><span class="line">		alert(<span class="string">'error'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>å¯¹äº ajax çš„ get æ“ä½œæ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è¿‡ç¨‹ï¼Œé€šè¿‡å›è°ƒå‡½æ•°ï¼Œåœ¨å¾—åˆ°è¿”å›çš„æ—¶å€™æ‰ä¼šå»æ‰§è¡Œæ“ä½œã€‚</p>
<p>ä½†æ˜¯è¯•æƒ³ä¸€ä¸‹å½“æ“ä½œè¶Šæ¥è¶Šå¤šï¼Œå›è°ƒé‡Œé¢è¿˜è¦å›è°ƒçš„æ—¶å€™ï¼Œä¸€å±‚å±‚å›è°ƒå‡½æ•°æ˜¯ä¸æ˜¯è®©äººæŠ“ç‹‚ï¼Œä¸è®ºåœ¨ä»£ç å¯è¯»æ€§è¿˜æ˜¯ç¼–å†™æ•ˆç‡æ¥çœ‹éƒ½æ˜¯å¾ˆéº»çƒ¦çš„ã€‚<br>çœ‹ä¸€ä¸‹æˆ‘ä»¬ç”¨ Promise å¯ä»¥æ€ä¹ˆåšä¸€ä¸ªå¼‚æ­¥çš„æ“ä½œï¼š<br><figure class="highlight nimrod"><table><tr><td class="code"><pre><span class="line">// è¿™ä¸ª getData æ˜¯æˆ‘ä»¬é¢„å…ˆå®ä¾‹å¥½çš„ä¸€ä¸ª <span class="type">Promise</span> å¯¹è±¡ï¼Œå¦‚ä½•å¤„ç†è¿™ä¸ªå¯¹è±¡æˆ‘ä»¬è¿™é‡Œä¸è®¨è®º</span><br><span class="line"><span class="keyword">var</span> promise = getData('/get_url');</span><br><span class="line">promise.then(function(<span class="literal">result</span>) &#123;</span><br><span class="line">	console.log(<span class="literal">result</span>);</span><br><span class="line">&#125;).catch(function(error) &#123;</span><br><span class="line">  console.log(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·çš„é£æ ¼æ˜¯ä¸æ˜¯ä¼šæ›´å¥½å‘¢ï¼Œæ‰§è¡Œä¸€ä¸ª promiseï¼Œç„¶å then é‡Œé¢ä¼ å…¥å›è°ƒå‡½æ•°ï¼Œå¦‚æœæ„¿æ„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ then åé¢å†æ›´å¾ˆå¤šä¸ª thenï¼Œcatch å¯ä»¥æ•æ‰é”™è¯¯ï¼Œçœ‹èµ·æ¥ä»£ç æ¸…æ™°ç®€æ˜å¤šäº†ã€‚<br>æ‰€ä»¥ï¼Œpromiseçš„åŠŸèƒ½æ˜¯å¯ä»¥å°†å¤æ‚çš„å¼‚æ­¥å¤„ç†è½»æ¾åœ°è¿›è¡Œæ¨¡å¼åŒ–ã€‚</p>
<p>#æ„é€ å‡½æ•° Constructor<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(executor);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123; ... &#125;);</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œçš„ <code>executor</code> æ˜¯æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ª promise å¯¹è±¡æ—¶åº”è¯¥ä¼ å…¥çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°åªä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•° <code>resolve</code>å’Œ<code>reject</code>ã€‚<br>ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><code>resolve(result)</code> åœ¨ promise ä¸­æ‰§è¡Œè¿™ä¸ªæ–¹æ³•è¡¨ç¤ºæˆåŠŸï¼Œä¼šåœ¨æ‰§è¡Œä¹‹åæ‰§è¡Œåé¢çš„ then æ‰€ä¼ å…¥çš„å‡½æ•°ï¼Œå®ƒæ¥å—åˆ°çš„å‚æ•°ä¹Ÿä¼šè¢« then é‡Œé¢çš„å‡½æ•°æ¥å—åˆ°ï¼Œä¸€èˆ¬æ¥è¯´å‚æ•°ä¸ºæ‰§è¡Œç»“æœæˆåŠŸæ—¶å€™çš„æ•°æ®ï¼›</li>
<li><code>reject(error)</code> åœ¨ promise ä¸­æ‰§è¡Œè¿™ä¸ªæ–¹æ³•è¡¨ç¤ºå¤±è´¥ï¼Œä»–ä¸€èˆ¬æ¥å—ä¸€ä¸ª error é”™è¯¯å‚æ•°ï¼Œä¼šè¢«åé¢çš„ catch æ•æ‰åˆ°é”™è¯¯æ‰§è¡Œã€‚<br>demoï¼š<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> testFoo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(<span class="string">'success'</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">testFoo().then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>testFoo</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ª<code>Promise</code>çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¸¤ç§’ä¹‹åä¼šæ‰§è¡Œ<code>resolve(&#39;success&#39;);</code>ï¼Œè¡¨ç¤ºæˆåŠŸï¼Œä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œåœ¨ä¸¤ç§’ä¹‹åï¼Œæˆ‘ä»¬thené‡Œé¢ä¼ å…¥çš„å‡½æ•°æ‰§è¡Œäº†ï¼Œæ¥æ”¶åˆ°äº†åˆšåˆšé‚£ä¸ªå‚æ•°ï¼›ä½†æ˜¯catché‡Œé¢çš„å‡½æ•°å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨ promise é‡Œé¢æ‰§è¡Œæ‹’ç»æ“ä½œã€‚</p>
<p>å¦‚æœæˆ‘ä»¬åœ¨å››ç§’ä¹‹åæ‰§è¡Œ <code>reject</code> æ“ä½œå‘¢ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> testFoo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(<span class="string">'success'</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      reject(<span class="string">'error'</span>);</span><br><span class="line">    &#125;, <span class="number">4000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">testFoo().then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>è²Œä¼¼åªå‡ºç°<code>resolve</code>çš„ç»“æœï¼Œå› ä¸ºä¸€ä¸ª promise æ²¡åŠæ³•åšå¤šæ¬¡ç»“æœæ“ä½œã€‚<br>æˆ‘ä»¬å°±è¿™æ ·ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> testFoo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      reject(<span class="string">'error'</span>);</span><br><span class="line">    &#125;, <span class="number">4000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">testFoo().then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>ç°åœ¨ç»“æœå¦‚æˆ‘ä»¬æ‰€é¢„æ–™äº†ã€‚</p>
<h1 id="PromiseStatus_çŠ¶æ€">PromiseStatus çŠ¶æ€</h1><p>çŠ¶æ€åˆ†ä¸ºä¸‰ç§ï¼š</p>
<ul>
<li><code>fulfilled</code> - Fulfilled å·²å®Œæˆï¼Œåœ¨ <code>resolve</code>æ—¶ï¼Œè°ƒç”¨ then çš„ <code>onFulfilled</code>å‡½æ•°ï¼›</li>
<li><code>Rejected</code> - Rejected æ‹’ç»ï¼Œåœ¨<code>reject</code>æ—¶ï¼Œè°ƒç”¨ then çš„ <code>onRejected</code>å‡½æ•°ï¼Œæˆ–è€… catch é‡Œé¢çš„å‡½æ•°ï¼›</li>
<li><code>unresolved</code> - Pending ç­‰å¾…ï¼Œæ˜¯ promise åˆå§‹åŒ–çš„æ—¶å€™çš„çŠ¶æ€ã€‚</li>
</ul>
<p>promise çš„ åˆå§‹åŒ–çŠ¶æ€ä¸º unresolvedï¼Œæ ¹æ®å¼‚æ­¥ç»“æœå˜ä¸º fulfilled æˆ–è€… Rejectedï¼Œä¸€æ—¦å˜ä¸ºå…¶ä¸­ä¸€ä¸ªå°±ä¸å¯æ”¹å˜ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¹‹å‰ä¸Šé¢ä¸ºä»€ä¹ˆæ‰§è¡Œäº† resolve ä¹‹åå†æ‰§è¡Œ reject è€Œæ²¡æœ‰ç»“æœçš„åŸå› äº†ã€‚</p>
<h1 id="æ–¹æ³•æ¦‚è¿°">æ–¹æ³•æ¦‚è¿°</h1><h2 id="å¿«æ·æ–¹æ³•">å¿«æ·æ–¹æ³•</h2><ul>
<li><code>Promise.resolve()</code> è¿™ä¸ªæ˜¯promiseçš„é™æ€æ–¹æ³•<figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line">Promise.resolve(<span class="number">10</span>).<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">(value)</span></span>&#123;</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="keyword">value</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿™ä¸ªæ–¹æ³•ä¼šè®© Promise ç«‹å³è¿›å…¥ fulfilled çŠ¶æ€ï¼Œä¸€èˆ¬ç”¨æ¥æµ‹è¯•ç”¨ã€‚</p>
<ul>
<li><code>Promise.reject()</code>ç›¸åº”ç€æˆ‘ä»¬æœ‰è¿™ä¸ªæ–¹æ³•<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.reject(<span class="string">'err'</span>).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å®ä¾‹æ–¹æ³•">å®ä¾‹æ–¹æ³•</h2><ul>
<li><code>then(onFulfilled, onRejected)</code>è¿™ä¸ªæ–¹æ³•å…·ä½“æ˜¯è¿™æ ·çš„ï¼Œä¼ å…¥ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªå¤„ç†fulfilledçŠ¶æ€ï¼Œå¦ä¸€ä¸ªå¤„ç†RejectedçŠ¶æ€ï¼Œä¸€èˆ¬ä½¿ç”¨æˆ‘ä»¬åªä¼ å…¥ç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œç¬¬äºŒä¸ªæ”¾åœ¨ catch æ¥å¤„ç†ã€‚</li>
<li><code>catch(onRejected)</code>å¤„ç†RejectedçŠ¶æ€ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£<code>catch(onRejected)</code>=<code>promise.then(undefined, onRejected)</code>ã€‚</li>
</ul>
<h1 id="é“¾å¼è°ƒç”¨">é“¾å¼è°ƒç”¨</h1><p>çœ‹çœ‹è¿™ä¸ª demo:<br><figure class="highlight nimrod"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> testFoo = function() &#123;</span><br><span class="line">	<span class="keyword">return</span> new <span class="type">Promise</span>(function(resolve, reject) &#123;</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">      resolve(<span class="number">1</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">testFoo().then(function(<span class="literal">result</span>) &#123;</span><br><span class="line">  console.log(<span class="literal">result</span>);</span><br><span class="line">  <span class="keyword">return</span> ++<span class="literal">result</span>;</span><br><span class="line">&#125;).then(function(<span class="literal">result</span>) &#123;</span><br><span class="line">  console.log(<span class="literal">result</span>);</span><br><span class="line">  <span class="keyword">return</span> ++<span class="literal">result</span>;</span><br><span class="line">&#125;).then(function(<span class="literal">result</span>) &#123;</span><br><span class="line">  console.log(<span class="literal">result</span>);</span><br><span class="line">  <span class="keyword">return</span> ++<span class="literal">result</span>;</span><br><span class="line">&#125;).catch(function(error) &#123;</span><br><span class="line">  console.log(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// <span class="number">1</span></span><br><span class="line">// <span class="number">2</span></span><br><span class="line">// <span class="number">3</span></span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹è§ç»“æœï¼Œè¿™ä¸ªæ–¹æ³•çš„æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ<br><img src="/img/promise-2.png" alt="task"><br>ç¬¬ä¸€ä¸ª then å‡½æ•°å’Œä¹‹å‰è®²çš„ä¸€æ ·ï¼Œå¤„ç† promise çš„ fulfilledï¼Œç¬¬äºŒä¸ª then çš„å‡½æ•°æ˜¯å¤„ç†å‰ä¸€ä¸ª then å‡½æ•°å¤„ç†å®Œçš„ç»“æœï¼Œä»–ä»¬ä¹‹é—´å‚æ•°ä¼ é€’çš„é€”å¾„æ˜¯å‰ä¸€ä¸ª then å‡½æ•° return ä¸€ä¸ªæ•°æ®ï¼Œç„¶ååä¸€ä¸ª then å‡½æ•°æ¥å—åˆ°è¿™ä¸ªå‚æ•°ã€‚<br>å¦‚æœä½ æ„¿æ„ï¼Œå¯ä»¥å†åé¢åŠ å¾ˆå¤šå¾ˆå¤šä¸ª thenï¼Œä»–ä»¬çš„æµç¨‹ä¸»è¦æ˜¯è¿™æ ·ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æŠŠ catch æå‰å‘¢ï¼Ÿ<br><figure class="highlight nimrod"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> testFoo = function() &#123;</span><br><span class="line">	<span class="keyword">return</span> new <span class="type">Promise</span>(function(resolve, reject) &#123;</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">      resolve(<span class="number">1</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">testFoo().then(function(<span class="literal">result</span>) &#123;</span><br><span class="line">  console.log(<span class="literal">result</span>);</span><br><span class="line">  <span class="keyword">return</span> ++<span class="literal">result</span>;</span><br><span class="line">&#125;).then(function(<span class="literal">result</span>) &#123;</span><br><span class="line">  console.log(<span class="literal">result</span>);</span><br><span class="line">  <span class="keyword">return</span> ++<span class="literal">result</span>;</span><br><span class="line">&#125;).catch(function(error) &#123;</span><br><span class="line">  console.log(error);</span><br><span class="line">&#125;).then(function(<span class="literal">result</span>) &#123;</span><br><span class="line">  console.log(<span class="literal">result</span>);</span><br><span class="line">  <span class="keyword">return</span> ++<span class="literal">result</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// <span class="number">1</span></span><br><span class="line">// <span class="number">2</span></span><br><span class="line">// <span class="number">3</span></span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œç»“æœä¸€æ ·ï¼Œè¯´æ˜catchåªä¼šåœ¨å‘ç”Ÿ reject çš„æ—¶å€™è°ƒç”¨ã€‚<br>é‚£å¦‚æœåœ¨ä¸­é—´çš„ä¸€ä¸ª then ä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å‘¢ï¼Ÿ<br><figure class="highlight nimrod"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> testFoo = function() &#123;</span><br><span class="line">	<span class="keyword">return</span> new <span class="type">Promise</span>(function(resolve, reject) &#123;</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">      resolve(<span class="number">1</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">testFoo().then(function(<span class="literal">result</span>) &#123;</span><br><span class="line">  console.log(<span class="literal">result</span>);</span><br><span class="line">  <span class="keyword">return</span> ++<span class="literal">result</span>;</span><br><span class="line">&#125;).then(function(<span class="literal">result</span>) &#123;</span><br><span class="line">  console.log(<span class="literal">result</span>);</span><br><span class="line">  throw new <span class="type">Error</span>(<span class="string">"throw Error"</span>)</span><br><span class="line">  <span class="keyword">return</span> ++<span class="literal">result</span>;</span><br><span class="line">&#125;).then(function(<span class="literal">result</span>) &#123;</span><br><span class="line">  console.log(<span class="literal">result</span>);</span><br><span class="line">  <span class="keyword">return</span> ++<span class="literal">result</span>;</span><br><span class="line">&#125;).catch(function(error) &#123;</span><br><span class="line">  console.log(error);</span><br><span class="line">&#125;);</span><br><span class="line">// <span class="number">1</span></span><br><span class="line">// <span class="number">2</span></span><br><span class="line">// <span class="type">Error</span>: throw <span class="type">Error</span></span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬åœ¨ç¬¬äºŒä¸ªthenä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè€Œåç«‹å³è¢« catch æ•æ‰åˆ°ï¼Œç¬¬ä¸‰ä¸ª then å¹¶æ²¡æœ‰æ‰§è¡Œã€‚</p>
<p>åˆ°è¿™é‡Œæˆ‘ä»¬æƒ³ä¸€ä¸‹ä»thençš„ä¼ å‚å’Œæ•æ‰å¼‚å¸¸æ¥çœ‹ï¼Œæ–°åŠ ä¸€ä¸ª then åªæ˜¯æ³¨å†Œäº†ä¸€ä¸ªå›è°ƒå‡½æ•°é‚£ä¹ˆç®€å•å—ï¼Ÿ<br>ä¸ä¸ä¸ï¼Œæ¯æ¬¡è°ƒç”¨thenéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°åˆ›å»ºçš„promiseå¯¹è±¡ï¼Œè¿™å°±è§£é‡Šäº†ä¸Šé¢çš„ä¸€åˆ‡åŸå› ã€‚</p>
<h1 id="å¹¶å‘è°ƒç”¨">å¹¶å‘è°ƒç”¨</h1><p>è¯•æƒ³ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬æ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ˆajaxç­‰ç­‰ï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬æƒ³åœ¨è¿™å‡ ä¸ªæ“ä½œéƒ½å®Œæˆçš„æ—¶å€™æ‰å»æ‰§è¡Œä¸€ä¸ªå‡½æ•°ã€‚<br>å¦‚æœæŒ‰ç…§ä¼ ç»Ÿçš„æ–¹æ³•æ¥åšï¼Œä»£ç ä¼šå¾ˆä¹±å¾ˆæ•£ï¼Œå…³é”®ä¸ä¼˜é›…ã€‚è®©æˆ‘ä»¬å°è¯•ç”¨ promise ã€‚<br>å…ˆçœ‹è¿™ä¸ª demo<br><figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line">var testFoo = <span class="function"><span class="keyword">function</span><span class="params">(time, value)</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> new Promise(<span class="function"><span class="keyword">function</span><span class="params">(resolve, reject)</span></span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</span><br><span class="line">      resolve(<span class="keyword">value</span>);</span><br><span class="line">    &#125;, time * <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">var tasks = &#123;</span><br><span class="line">  task1: <span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  task2: <span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1.3</span>, <span class="number">3</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  task3: <span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1.5</span>, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var main = <span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span></span> recordValue(results, <span class="keyword">value</span>) &#123;</span><br><span class="line">    results.push(<span class="keyword">value</span>);</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="keyword">value</span>);</span><br><span class="line">    console.<span class="built_in">log</span>(results);</span><br><span class="line">    <span class="keyword">return</span> results;</span><br><span class="line">  &#125;</span><br><span class="line">  var pushValue = recordValue.<span class="keyword">bind</span>(null, []);</span><br><span class="line">  <span class="keyword">return</span> tasks.task1().<span class="keyword">then</span>(pushValue).<span class="keyword">then</span>(tasks.task2).<span class="keyword">then</span>(pushValue).<span class="keyword">then</span>(tasks.task3).<span class="keyword">then</span>(pushValue);</span><br><span class="line">&#125;;</span><br><span class="line">main().<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">(value)</span></span> &#123;</span><br><span class="line">  console.<span class="built_in">log</span>(<span class="keyword">value</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// [<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¹ˆå®ç°æ˜æ˜¾çœ‹èµ·æ¥å‡Œä¹±ï¼Œç‰¹åˆ«å¯¹äº main å‡½æ•°ï¼Œå¯è¯»æ€§ä¹Ÿæ¯”è¾ƒå·®ã€‚<br>é‚£ä¹ˆæœ‰æ²¡æœ‰æ›´ä¼˜é›…çš„æ–¹æ³•å‘¢ï¼Œç­”æ¡ˆï¼šæœ‰ï¼ğŸ˜„ã€‚</p>
<h2 id="Promise-all">Promise.all</h2><p><code>Promise.all</code> æ–¹æ³•æ¥å—ä¸€ä¸ªä»¥ promise å¯¹è±¡ä¸ºå…ƒç´ çš„æ•°ç»„ï¼Œåœ¨å…¨éƒ¨æ‰§è¡Œæ“ä½œå®Œæˆåæ‰å›è°ƒç”¨thené‡Œé¢çš„æ–¹æ³•ï¼Œçœ‹ä»£ç :<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> testFoo = <span class="function"><span class="keyword">function</span>(<span class="params">time, value</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(value);</span><br><span class="line">    &#125;, time * <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> tasks = &#123;</span><br><span class="line">  task1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  task2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1.3</span>, <span class="number">3</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  task3: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1.5</span>, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> main = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.all([tasks.task1(), tasks.task2(), tasks.task3()]);</span><br><span class="line">&#125;</span><br><span class="line">main().then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [2, 3, 1]</span></span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å§è¦æ‰§è¡Œçš„ promise å¯¹è±¡ä½œä¸ºæ•°ç»„çš„å…ƒç´ ä¼ ç»™ <code>Promise.all()</code>ï¼Œ<code>Promise.all().then()</code>é‡Œé¢å®šä¹‰çš„å‡½æ•°æ¥å—åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œå…ƒç´ æ˜¯è¿™å‡ ä¸ªæ“ä½œè¿”å›çš„å€¼ï¼Œé¡ºåºå’Œ promise å¯¹è±¡æ”¾å…¥çš„é¡ºåºä¸€æ ·ï¼Œæ¯”å¦‚ç¬¬ä¸€ä¸ª promise å¯¹è±¡è¿”å›çš„å€¼æ˜¯2ï¼Œé‚£ä¹ˆç»“æœçš„ç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯2ã€‚<br>å¹¶ä¸”æ¯ä¸€ä¸ªpromiseæ˜¯åŒæ—¶æ‰§è¡Œçš„ï¼ï¼å¹¶å‘ã€‚<br>åœ¨æ‰€æœ‰ promise çš„çŠ¶æ€ä¸º FulFilled çš„æ—¶å€™æ‰ä¼šå»æ‰§è¡Œ then é‡Œé¢çš„å‡½æ•°ã€‚<br>é‚£ä¹ˆæ•æ‰å¼‚å¸¸å‘¢ï¼Ÿ<br>ä¿®æ”¹ä¸€ä¸‹ä¾‹å­ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> testFoo = <span class="function"><span class="keyword">function</span>(<span class="params">time, value, err</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(err) &#123;</span><br><span class="line">	    reject(err);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	  &#125;</span><br><span class="line">      resolve(value);</span><br><span class="line">    &#125;, time * <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> tasks = &#123;</span><br><span class="line">  task1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1</span>, <span class="number">2</span>, <span class="string">'error'</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  task2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1.3</span>, <span class="number">3</span>, <span class="string">'error1'</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  task3: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1.5</span>, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> main = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.all([tasks.task1(), tasks.task2(), tasks.task3()]);</span><br><span class="line">&#125;</span><br><span class="line">main().then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [2, 3, 1]</span></span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬è®©å…¶ä¸­2 promise ä¸ªæŠ›å‡ºå¼‚å¸¸ï¼Œçœ‹åˆ°æ•æ‰åˆ°äº†é‚£ä¸ªå¼‚å¸¸ï¼Œè€Œä¸”æ˜¯æ•æ‰åˆ°ç¬¬ä¸€ä¸ªå¼‚å¸¸å°±åœæ­¢äº†ã€‚<br>è¯´æ˜ all çš„æ“ä½œæ˜¯å½“æ‰€æœ‰ promise çŠ¶æ€ä¸º FulFilled çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œ then çš„æ“ä½œã€‚è€Œä¸€æ—¦æœ‰ä¸€ä¸ª Rejected å°±catchè¿™ä¸ªå¼‚å¸¸ï¼Œå¹¶ä¸”åœæ­¢ã€‚</p>
<h2 id="Promise-race">Promise.race</h2><p>ä»–å’Œ Promise.all ä¸€æ ·ï¼Œæ¥å—ä¸€ä¸ª promise å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œä¹Ÿæ˜¯å¹¶å‘æ‰§è¡Œï¼Œä½†æ˜¯ Promise.race æ˜¯åªè¦æœ‰ä¸€ä¸ªpromiseå¯¹è±¡è¿›å…¥ FulFilled æˆ–è€… Rejected çŠ¶æ€çš„è¯ï¼Œå°±ä¼šç»§ç»­è¿›è¡Œåé¢çš„å¤„ç†ã€‚<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> testFoo = <span class="function"><span class="keyword">function</span>(<span class="params">time, value</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(value);</span><br><span class="line">    &#125;, time * <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> tasks = &#123;</span><br><span class="line">  task1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  task2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1.3</span>, <span class="number">3</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  task3: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> testFoo(<span class="number">1.5</span>, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> main = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.race([tasks.task1(), tasks.task2(), tasks.task3()]);</span><br><span class="line">&#125;</span><br><span class="line">main().then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œtask1 æœ€å…ˆå®Œæˆï¼Œç„¶åå°±æ‹¿åˆ°ä»–çš„å€¼è¿›è¡Œ then æ“ä½œã€‚</p>
]]></content>
    <summary type="html">
    <![CDATA[<p><img src="/img/promise-1.png" alt="Promise"></p>
<h1 id="æµè§ˆå™¨æ”¯æŒ">æµè§ˆå™¨æ”¯æŒ</h1><p><img src="/img/promise-3.jpg" alt="Promise"><br><a href="htt]]>
    </summary>
    
      <category term="JavaScript" scheme="http://qiutc.me/tags/JavaScript/"/>
    
      <category term="Note" scheme="http://qiutc.me/tags/Note/"/>
    
      <category term="JavaScript" scheme="http://qiutc.me/categories/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ä½¿ç”¨ React å®ç°ä¸€ä¸ªè½®æ’­ç»„ä»¶]]></title>
    <link href="http://qiutc.me/post/%E4%BD%BF%E7%94%A8-React-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%BD%AE%E6%92%AD%E7%BB%84%E4%BB%B6.html"/>
    <id>http://qiutc.me/post/ä½¿ç”¨-React-å®ç°ä¸€ä¸ªè½®æ’­ç»„ä»¶.html</id>
    <published>2016-02-19T06:03:49.000Z</published>
    <updated>2016-05-10T03:51:51.000Z</updated>
    <content type="html"><![CDATA[<p><img src="/img/react.png" alt="React"></p>
<h1 id="tip">tip</h1><p>React åˆšå‡ºæ¥ä¸ä¹…ï¼Œç»„ä»¶è¿˜æ¯”è¾ƒå°‘ï¼Œä¸åƒ jquery é‚£æ ·å·²ç»æœ‰å¾ˆå¤šç°æˆçš„æ’ä»¶äº†ï¼Œå½“æ˜¯å°±è‡ªå·±å†™äº†ä¸€ä¸ªåŸºäº React çš„è½®æ’­ç»„ä»¶ï¼Œå½“ç„¶åªæ˜¯ä¸€ä¸ªå° demoï¼Œåˆšåˆšæœ‰ç”¨ es6 çš„è¯­æ³•é‡æ–°æ”¹äº†æ”¹ï¼Œå°±æƒ³ç€å†™ä¸€ä¸ªå°æ•™ç¨‹ç»™æ–°æ‰‹ï¼Œå¦‚ä½•å®ç°ä¸€ä¸ª React çš„å°ç»„ä»¶ã€‚<br>å…ˆæ”¾ä¸Šä»“åº“åœ°å€ï¼Œå¯ä»¥å…ˆ clone æ¥çœ‹çœ‹ä»£ç ï¼š<a href="https://github.com/TongchengQiu/react-slider" target="_blank" rel="external">https://github.com/TongchengQiu/react-slider</a>ã€‚<br>react-slider æ˜¯ä¸€ä¸ªå›¾ç‰‡è½®æ’­çš„ç»„ä»¶ï¼Œæ”¯æŒçš„é…ç½®æœ‰ å›¾ç‰‡ï¼ˆå¿…é¡»å¥½ä¸å¥½ï¼Œè¦ä¸ç„¶è½®æ’­æ¯›ï¼‰ã€è½®æ’­å›¾ç‰‡çš„é€Ÿåº¦ã€æ˜¯å¦è‡ªåŠ¨è½®æ’­ã€è‡ªåŠ¨è½®æ’­çš„æ—¶å€™é¼ æ ‡æ”¾ä¸Šå»æ˜¯å¦æš‚åœã€è‡ªåŠ¨è½®æ’­é€Ÿåº¦ã€æ˜¯å¦éœ€è¦å‰åç®­å¤´ã€æ˜¯å¦éœ€è¦ dot ï¼ˆæˆ‘ä¸çŸ¥é“æ€ä¹ˆè¡¨è¿°å¥½ï¼Œåæ­£æ„æ€ä½ æ‡‚ï¼‰ã€‚</p>
<h1 id="ç¬¬ä¸€æ­¥ï¼Œéœ€æ±‚">ç¬¬ä¸€æ­¥ï¼Œéœ€æ±‚</h1><p>é¦–å…ˆï¼Œå†™ä¸€ä¸ªç»„ä»¶å¿…é¡»å…ˆè€ƒè™‘æ”¹ç»„ä»¶çš„éœ€æ±‚æœ‰å“ªäº›ï¼Œæ”¯æŒçš„é…ç½®éœ€è¦å“ªäº›ã€‚<br>å¦‚ä¸Šå·²ç»è¯´äº†æ”¹ç»„ä»¶çš„éœ€æ±‚ï¼š</p>
<ul>
<li>è½®æ’­çš„å›¾ç‰‡</li>
<li>é…ç½®è½®æ’­å›¾ç‰‡åˆ‡æ¢çš„é€Ÿåº¦</li>
<li>å¯é…ç½®æ˜¯å¦è‡ªåŠ¨è½®æ’­</li>
<li>å¯é…ç½®è‡ªåŠ¨è½®æ’­çš„æ—¶å€™é¼ æ ‡æ”¾ä¸Šå»æ˜¯å¦æš‚åœ</li>
<li>å¯é…ç½®è‡ªåŠ¨è½®æ’­çš„é€Ÿåº¦</li>
<li>å¯é…ç½®æ˜¯å¦éœ€è¦å‰åç®­å¤´</li>
<li>å¯é…ç½®æ˜¯å¦éœ€è¦ dot ï¼ˆæˆ‘ä¸çŸ¥é“æ€ä¹ˆè¡¨è¿°å¥½ï¼Œåæ­£æ„æ€ä½ æ‡‚ï¼‰<br>è¿™ä¸€æ­¥å…ˆåˆ°æ­¤ä¸ºæ­¢ï½ï½ï½</li>
</ul>
<h1 id="ç¬¬äºŒæ­¥ï¼Œæ„å»ºé¡¹ç›®">ç¬¬äºŒæ­¥ï¼Œæ„å»ºé¡¹ç›®</h1><p>è¿™é‡Œæˆ‘ä»¬æ˜¯ä½¿ç”¨ React æ¡†æ¶ï¼Œå½“ç„¶ä¹Ÿæ˜¯ç”¨å®ƒçš„å¥½æ­æ¡£ webpack æ¥æ„å»ºè‡ªåŠ¨åŒ–æµç¨‹å’¯ï½ğŸ˜<br>ä¸æ‡‚ webpack çš„é…ç½®å¯ä»¥çœ‹æˆ‘çš„åšå®¢å…³äº webpack ä½¿ç”¨çš„æ–‡ç« ï¼Œè°¢è°¢ï½ğŸ˜„<br>è¿™æ˜¯é¡¹ç›®å¼€å‘ç›®å½•çš„æ–‡ä»¶ç»“æ„ï¼š<br><figure class="highlight gherkin"><table><tr><td class="code"><pre><span class="line">src</span><br><span class="line">â”œâ”€â”€ Slider              <span class="comment">#Sliderç»„ä»¶</span></span><br><span class="line">|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   â”œâ”€â”€SliderItem          </span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   â”œâ”€â”€SliderItem.jsx</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   â””â”€â”€SliderItem.scss</span><br><span class="line"></span>|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   â”œâ”€â”€SliderDots        </span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   â”œâ”€â”€SliderItem.jsx</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   â””â”€â”€SliderItem.scss</span><br><span class="line"></span>|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   â”œâ”€â”€SliderArrows         </span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   â”œâ”€â”€SliderItem.jsx</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   â””â”€â”€SliderItem.scss</span><br><span class="line"></span>|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   â”œâ”€â”€Slider.jsx         </span><br><span class="line"></span>|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   â””â”€â”€Slider.scss</span><br><span class="line"></span>|</span><br><span class="line">â”œâ”€â”€images              <span class="comment">#å­˜æ”¾demoç”¨çš„å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">|<span class="string"></span><br><span class="line">â””â”€â”€ index.js           #demoçš„å…¥å£æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></p>
<p>çœ‹ç›®å½•ç»“æ„æˆ‘ä»¬åº”è¯¥æ˜ç™½äº†ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ Slider æ–‡ä»¶å¤¹ã€‚</p>
<h1 id="ç¬¬ä¸‰æ­¥ï¼ŒåŸºäºéœ€æ±‚çš„å¼€å‘">ç¬¬ä¸‰æ­¥ï¼ŒåŸºäºéœ€æ±‚çš„å¼€å‘</h1><p>è¿™é‡Œæˆ‘ä»¬å¼€å‘ç»„ä»¶çš„æ¨¡å¼æ˜¯æŒ‰ç…§éœ€æ±‚é©±åŠ¨å‹ï¼Œå›åˆ°ç¬¬ä¸€æ­¥çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å…ˆä¸ç®¡ç»„ä»¶å†…ä»£ç ï¼Œå…ˆå†™å‡ºæˆ‘ä»¬æƒ³æ€ä¹ˆæ ·é…ç½®ä½¿ç”¨ç»„ä»¶ï¼š<br><figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">// index.js</span><br><span class="line"><span class="keyword">import</span> React from <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; render &#125; from <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> Slider from <span class="string">'./Slider/Slider'</span>;</span><br><span class="line"></span><br><span class="line">const IMAGE_DATA = [</span><br><span class="line">  &#123;</span><br><span class="line">    src: require(<span class="string">'./images/demo1.jpg'</span>),</span><br><span class="line">    alt: <span class="string">'images-1'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    src: require(<span class="string">'./images/demo2.jpg'</span>),</span><br><span class="line">    alt: <span class="string">'images-2'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    src: require(<span class="string">'./images/demo3.jpg'</span>),</span><br><span class="line">    alt: <span class="string">'images-3'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">render(</span><br><span class="line">  &lt;Slider</span><br><span class="line">    items=&#123;IMAGE_DATA&#125;</span><br><span class="line">    speed=&#123;<span class="number">1.2</span>&#125;</span><br><span class="line">    delay=&#123;<span class="number">2.1</span>&#125;</span><br><span class="line">    pause=&#123;true&#125;</span><br><span class="line">    autoplay=&#123;true&#125;</span><br><span class="line">    dots=&#123;true&#125;</span><br><span class="line">    arrows=&#123;true&#125;</span><br><span class="line">  /&gt;,</span><br><span class="line">  document.getElementById(<span class="string">'root'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä½¿ç”¨ Slider ç»„ä»¶çš„æ—¶å€™ï¼Œæ ¹æ®éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥è¿™äº›å±æ€§æ¥é…ç½®ç»„ä»¶ã€‚<br>ä¸€ä¸ª <code>items</code> æ•°ç»„ï¼Œå†³å®šäº†éœ€è¦è½®æ’­çš„å†…å®¹ï¼Œitems é‡Œé¢æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰ src å’Œ alt å±æ€§ï¼Œåˆ†åˆ«æ˜¯è½®æ’­å›¾ç‰‡çš„ src åœ°å€å’Œ alt å†…å®¹ï¼›<br><code>speed</code> æ˜¯å›¾ç‰‡åˆ‡æ¢çš„æ—¶å€™çš„é€Ÿåº¦æ—¶é—´ï¼Œéœ€è¦é…ç½®ä¸€ä¸ª number ç±»å‹çš„æ•°æ®ï¼Œå†³å®šæ—¶é—´æ˜¯å‡ ç§’ï¼›<br><code>autoplay</code> æ˜¯é…ç½®æ˜¯å¦éœ€è¦è‡ªåŠ¨è½®æ’­ï¼Œæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼›<br><code>delay</code> æ˜¯åœ¨éœ€è¦è‡ªåŠ¨è½®æ’­çš„æ—¶å€™ï¼Œæ¯å¼ å›¾ç‰‡åœç•™çš„æ—¶é—´ï¼Œä¸€ä¸ª number å€¼ï¼›<br><code>pause</code> æ˜¯åœ¨éœ€è¦è‡ªåŠ¨è½®æ’­çš„æ—¶å€™ï¼Œé¼ æ ‡åœç•™åœ¨å›¾ç‰‡ä¸Šï¼Œæ˜¯å¦æš‚åœè½®æ’­ï¼Œæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼›<br><code>dots</code> æ˜¯é…ç½®æ˜¯å¦éœ€è¦è½®æ’­ä¸‹é¢çš„å°ç‚¹ï¼›<br><code>arrows</code> æ˜¯é…ç½®æ˜¯å¦éœ€è¦è½®æ’­çš„å‰åç®­å¤´ï¼›</p>
<h1 id="ç¬¬å››æ­¥ï¼Œç¼–å†™ç»„ä»¶">ç¬¬å››æ­¥ï¼Œç¼–å†™ç»„ä»¶</h1><p>é¦–å…ˆæˆ‘ä»¬æ¥è€ƒè™‘ä¸€ä¸‹éœ€è¦å¤šå°‘ä¸ªç»„ä»¶ï¼Œæœ€å¤–å±‚çš„ Slider ç»„ä»¶æ˜¯æ¯‹åº¸ç½®ç–‘çš„äº†ã€‚<br>æ ¹æ®éœ€æ±‚æˆ‘ä»¬å¯ä»¥åˆ†å‡ºä¸€ä¸ª SliderItem ç»„ä»¶ï¼Œä¸€ä¸ª SliderDotsï¼Œä¸€ä¸ª SliderArrows ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯ è½®æ’­æ¯ä¸ªå›¾ç‰‡çš„itemï¼Œè½®æ’­ä¸‹é¢dotsçš„ç»„ä»¶ï¼Œå·¦å³ç®­å¤´ç»„ä»¶ã€‚<br>æˆ‘ä»¬å…ˆæ¥ç¼–å†™æ¯ä¸ªå°ç»„ä»¶ï¼Œç»„ä»¶æ˜¯å¯¹å¤–å°é—­ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥å®ƒåªéœ€è¦å¯¹å¤–æš´æ¼å±æ€§çš„é…ç½®å³å¯ã€‚</p>
<h2 id="SliderItem">SliderItem</h2><p>å› ä¸º SliderItem æ˜¯å±•ç¤ºè½®æ’­å›¾ç‰‡çš„æ¯ä¸ªå†…å®¹çš„ï¼Œæ‰€ä»¥å®ƒéœ€è¦çš„å±æ€§æœ‰ï¼Œsrc å’Œ altï¼Œå› ä¸ºä¹‹å‰æˆ‘ä»¬å·²ç»æŠŠæ¯ä¸ªè½®æ’­é¡¹å†™æˆä¸€ä¸ªå¯¹è±¡äº†ï¼Œæ‰€ä»¥æŠŠ src å’Œ alt ä½œä¸ºå±æ€§æ”¾åœ¨ itemï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ª item å±æ€§å³å¯ï¼›å®ƒè¿˜éœ€è¦å†³å®šå®ƒåœ¨çˆ¶ç»„ä»¶ä¸­å¤§å°ï¼Œå› ä¸ºåœ¨æœªä½¿ç”¨ç»„ä»¶çš„æ—¶å€™æˆ‘ä»¬æ˜¯ä¸çŸ¥é“è½®æ’­é¡¹çš„æ•°ç›®çš„ï¼Œæ‰€ä»¥å®ƒçš„å®½åº¦éœ€è¦æ ¹æ®çˆ¶ç»„ä»¶ä¼ ç»™å®ƒcountï¼ˆå›¾ç‰‡æ•°ç›®ï¼‰æ¥è®¡ç®—ã€‚<br>æ‰€ä»¥å®ƒéœ€è¦çš„å±æ€§æœ‰ï¼š</p>
<ul>
<li>item (æœ‰ src å’Œ alt å±æ€§)</li>
<li>count ï¼ˆè½®æ’­é¡¹æ€»æ•°ç›®ï¼Œè®¡ç®—æ¯ä¸ªè½®æ’­é¡¹çš„å®½åº¦ï¼‰</li>
</ul>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">SliderItem</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    let &#123; count, item &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    let width = <span class="number">100</span> / count + '%';</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;li className=<span class="string">"slider-item"</span> style=&#123;&#123;width: width&#125;&#125;&gt;</span><br><span class="line">        &lt;img src=&#123;item.src&#125; alt=&#123;item.alt&#125; /&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>let width = 100 / count + &#39;%&#39;;</code> å³æ˜¯è®¡ç®—å®ƒå çˆ¶ç»„ä»¶çš„å®½åº¦ç™¾åˆ†æ¯”ã€‚</p>
<h2 id="SliderDots">SliderDots</h2><p>å¯¹äº SliderDots ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª countï¼ˆè½®æ’­é¡¹æ€»æ•°ç›®ï¼‰æ¥å†³å®šæ˜¾ç¤ºå‡ ä¸ª dotï¼Œè¿˜éœ€è¦ä¸€ä¸ª nowLocal å±æ€§æ¥åˆ¤æ–­å“ªä¸ª dot å¯¹åº”å½“å‰æ˜¾ç¤ºçš„è½®æ’­é¡¹ï¼Œç‚¹å‡»æ¯ä¸ª dot çš„æ˜¯å¦éœ€è¦ä¸€ä¸ªå›è°ƒå‡½æ•° turn æ¥åšå‡ºå“åº”ã€‚<br>æ‰€ä»¥å®ƒéœ€è¦çš„å±æ€§æœ‰ï¼š</p>
<ul>
<li>countï¼ˆè½®æ’­é¡¹æ€»æ•°ç›®ï¼‰</li>
<li>nowLocalï¼ˆå½“å‰çš„è½®æ’­é¡¹ï¼‰</li>
<li>turnï¼ˆç‚¹å‡» dot å›è°ƒå‡½æ•°ï¼‰</li>
</ul>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">SliderDots</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleDotClick(i) &#123;</span><br><span class="line">    <span class="keyword">var</span> option = i - <span class="keyword">this</span>.props.nowLocal;</span><br><span class="line">    <span class="keyword">this</span>.props.turn(option);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    let dotNodes = [];</span><br><span class="line">    let &#123; count, nowLocal &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">for</span>(let i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">      dotNodes[i] = (</span><br><span class="line">        &lt;span</span><br><span class="line">          key=&#123;<span class="symbol">'do</span>t' + i&#125;</span><br><span class="line">          className=&#123;<span class="string">"slider-dot"</span> + (i === <span class="keyword">this</span>.props.nowLocal?<span class="string">" slider-dot-selected"</span>:<span class="string">""</span>)&#125;</span><br><span class="line">          onClick=&#123;<span class="keyword">this</span>.handleDotClick.bind(<span class="keyword">this</span>, i)&#125;&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"slider-dots-wrap"</span>&gt;</span><br><span class="line">        &#123;dotNodes&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬ç”¨ for å¾ªç¯æ ¹æ® count æ¥å†³å®šäº†éœ€è¦å¤šå°‘ä¸ª dotï¼Œç„¶ååœ¨æ¯ä¸ª dot ç»‘å®šå‡½æ•°ä¼ å…¥ä¸€ä¸ª i å€¼ï¼Œå¹¶ä¸”å¦‚æœè¿™ä¸ª dot å¯¹äºå½“å‰æ˜¾ç¤ºçš„è½®æ’­é¡¹ï¼Œå°±å¤šåŠ ä¸€ä¸ªclass slider-dot-selectedã€‚<br>æ¯ä¸ª dot click ç»‘å®šçš„å‡½æ•°è¿˜éœ€è¦è®¡ç®—éœ€è¦å‘å‰æˆ–è€…å‘åç§»åŠ¨å¤šå°‘ä¸ªè½®æ’­é¡¹ï¼Œç„¶åå›è°ƒ turn å‡½æ•°ã€‚</p>
<h2 id="SliderArrows">SliderArrows</h2><p>å¯¹äº SliderArrows ç»„ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ª turn å‡½æ•°ä½œå‡ºå›è°ƒã€‚<br>åºŸè¯ä¸å¤šå°‘ï¼Œä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">SliderArrows</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleArrowClick(option) &#123;</span><br><span class="line">    <span class="keyword">this</span>.props.turn(option);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"slider-arrows-wrap"</span>&gt;</span><br><span class="line">        &lt;span</span><br><span class="line">          className=<span class="string">"slider-arrow slider-arrow-left"</span></span><br><span class="line">          onClick=&#123;<span class="keyword">this</span>.handleArrowClick.bind(<span class="keyword">this</span>, -<span class="number">1</span>)&#125;&gt;</span><br><span class="line">          &amp;lt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">        &lt;span</span><br><span class="line">          className=<span class="string">"slider-arrow slider-arrow-right"</span></span><br><span class="line">          onClick=&#123;<span class="keyword">this</span>.handleArrowClick.bind(<span class="keyword">this</span>, <span class="number">1</span>)&#125;&gt;</span><br><span class="line">          &amp;gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªç»„ä»¶ä¸‹é¢æœ‰ä¸¤ä¸ªç®­å¤´ï¼Œåˆ†åˆ«æ˜¯å‘å‰å’Œå‘åï¼Œå›è°ƒçš„ turn æ˜¯ 1 å’Œ ï¼1ã€‚</p>
<h2 id="Slider_ç»„ä»¶">Slider ç»„ä»¶</h2><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"></span><br><span class="line">require('./<span class="type">Slider</span>.scss');</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="type">SliderItem</span> from './<span class="type">SliderItem</span>/<span class="type">SliderItem</span>';</span><br><span class="line"><span class="keyword">import</span> <span class="type">SliderDots</span> from './<span class="type">SliderDots</span>/<span class="type">SliderDots</span>';</span><br><span class="line"><span class="keyword">import</span> <span class="type">SliderArrows</span> from './<span class="type">SliderArrows</span>/<span class="type">SliderArrows</span>';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Slider</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      nowLocal: <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‘å‰å‘åå¤šå°‘</span></span><br><span class="line">  turn(n) &#123;</span><br><span class="line">    <span class="keyword">var</span> _n = <span class="keyword">this</span>.state.nowLocal + n;</span><br><span class="line">    <span class="keyword">if</span>(_n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      _n = _n + <span class="keyword">this</span>.props.items.length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(_n &gt;= <span class="keyword">this</span>.props.items.length) &#123;</span><br><span class="line">      _n = _n - <span class="keyword">this</span>.props.items.length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;nowLocal: _n&#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¼€å§‹è‡ªåŠ¨è½®æ’­</span></span><br><span class="line">  goPlay() &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.props.autoplay) &#123;</span><br><span class="line">      <span class="keyword">this</span>.autoPlayFlag = setInterval(() =&gt; &#123;</span><br><span class="line">        <span class="keyword">this</span>.turn(<span class="number">1</span>);</span><br><span class="line">      &#125;, <span class="keyword">this</span>.props.delay * <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æš‚åœè‡ªåŠ¨è½®æ’­</span></span><br><span class="line">  pausePlay() &#123;</span><br><span class="line">    clearInterval(<span class="keyword">this</span>.autoPlayFlag);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.goPlay();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    let count = <span class="keyword">this</span>.props.items.length;</span><br><span class="line"></span><br><span class="line">    let itemNodes = <span class="keyword">this</span>.props.items.map((item, idx) =&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> &lt;<span class="type">SliderItem</span> item=&#123;item&#125; count=&#123;count&#125; key=&#123;<span class="symbol">'ite</span>m' + idx&#125; /&gt;;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    let arrowsNode = &lt;<span class="type">SliderArrows</span> turn=&#123;<span class="keyword">this</span>.turn.bind(<span class="keyword">this</span>)&#125;/&gt;;</span><br><span class="line"></span><br><span class="line">    let dotsNode = &lt;<span class="type">SliderDots</span> turn=&#123;<span class="keyword">this</span>.turn.bind(<span class="keyword">this</span>)&#125; count=&#123;count&#125; nowLocal=&#123;<span class="keyword">this</span>.state.nowLocal&#125; /&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div</span><br><span class="line">        className=<span class="string">"slider"</span></span><br><span class="line">        onMouseOver=&#123;<span class="keyword">this</span>.props.pause?<span class="keyword">this</span>.pausePlay.bind(<span class="keyword">this</span>):<span class="literal">null</span>&#125; onMouseOut=&#123;<span class="keyword">this</span>.props.pause?<span class="keyword">this</span>.goPlay.bind(<span class="keyword">this</span>):<span class="literal">null</span>&#125;&gt;</span><br><span class="line">          &lt;ul style=&#123;&#123;</span><br><span class="line">              left: -<span class="number">100</span> * <span class="keyword">this</span>.state.nowLocal + <span class="string">"%"</span>,</span><br><span class="line">              transitionDuration: <span class="keyword">this</span>.props.speed + <span class="string">"s"</span>,</span><br><span class="line">              width: <span class="keyword">this</span>.props.items.length * <span class="number">100</span> + <span class="string">"%"</span></span><br><span class="line">            &#125;&#125;&gt;</span><br><span class="line">              &#123;itemNodes&#125;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.props.arrows?arrowsNode:<span class="literal">null</span>&#125;</span><br><span class="line">          &#123;<span class="keyword">this</span>.props.dots?dotsNode:<span class="literal">null</span>&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Slider</span>.defaultProps = &#123;</span><br><span class="line">  speed: <span class="number">1</span>,</span><br><span class="line">  delay: <span class="number">2</span>,</span><br><span class="line">  pause: <span class="literal">true</span>,</span><br><span class="line">  autoplay: <span class="literal">true</span>,</span><br><span class="line">  dots: <span class="literal">true</span>,</span><br><span class="line">  arrows: <span class="literal">true</span>,</span><br><span class="line">  items: [],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">Slider</span>.autoPlayFlag = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨è¿™é‡Œæˆ‘ä»¬å…ˆæ˜¯ import ä¾èµ–ï¼Œä»¥åŠ éœ€è¦çš„ å­ç»„ä»¶ã€‚</li>
<li>Slider æœ‰ä¸€ä¸ªçŠ¶æ€ nowLocalï¼Œæ˜¯è¡¨æ˜å½“å‰è½®æ’­çš„ç¬¬å‡ é¡¹ã€‚</li>
<li>å‰é¢ä¸€ç›´è®² turn å‡½æ•°ï¼Œæˆ‘ä»¬å°±å…ˆåˆ†æä¸€ä¸‹è¿™ä¸ªå‡½æ•°ï¼š<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">turn(n) &#123;</span><br><span class="line">  console.<span class="built_in">log</span>();</span><br><span class="line">  var _n = <span class="keyword">this</span>.state.nowLocal + n;</span><br><span class="line">  <span class="keyword">if</span>(_n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    _n = _n + <span class="keyword">this</span>.props.items.length;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(_n &gt;= <span class="keyword">this</span>.props.items.length) &#123;</span><br><span class="line">    _n = _n - <span class="keyword">this</span>.props.items.length;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;nowLocal: _n&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å®ƒä¼ å…¥ä¸€ä¸ª å‚æ•° n ï¼Œå†³å®šå‘å‰æˆ–è€…å‘åç§»åŠ¨å¤šå°‘ä¸ªè½®æ’­é¡¹ï¼Œå‘å‰å’Œå‘ååˆ†åˆ«å¯¹äº ï¼ å’Œ ï¼‹ã€‚<br>turn å‡½æ•°å†…ï¼Œå£°æ˜ä¸€ä¸ª <code>_n</code> å˜é‡è¡¨ç¤ºä¸‹ä¸€ä¸ªè½®æ’­çš„ç¬¬å‡ é¡¹ã€‚<br>å¦‚æœ <code>_n</code> å°äº 0 ï¼Œé‚£å½“ç„¶æ˜¯ä¸è¡Œçš„ï¼Œæ‰€ä»¥å°±ä¼šè®© <code>_n</code> å˜æˆæœ€åä¸€é¡¹ï¼›<br>å¦‚æœ <code>_n</code> å¤§äº items çš„é•¿åº¦ ï¼Œé‚£å½“ç„¶ä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œæ‰€ä»¥å°±ä¼šè®© <code>_n</code> å˜æˆç¬¬ä¸€é¡¹ï¼›<br>æœ€åæ”¹å˜çŠ¶æ€ <code>nowLocal</code> ç­‰äº <code>_n</code>ã€‚</p>
<ul>
<li>ä¸‹é¢æ˜¯ä¸€ä¸ªå¼€å§‹è‡ªåŠ¨è½®æ’­çš„å‡½æ•° goPlayï¼š<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">goPlay() &#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">this</span>.props.autoplay) &#123;</span><br><span class="line">    <span class="keyword">this</span>.autoPlayFlag = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.turn(<span class="number">1</span>);</span><br><span class="line">    &#125;, <span class="keyword">this</span>.props.delay * <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å¦‚æœ autoplay æ˜¯ trueï¼Œåˆ™æ‰§è¡Œ setInterval æ¥è‡ªåŠ¨è°ƒç”¨ this.turn(1) å‘å‰ç§»åŠ¨è½®æ’­é¡¹ï¼Œ<code>this.props.delay * 1000</code>å°±æ˜¯æ ¹æ®é…ç½®çš„ delay æ¥å†³å®šå¤šä¹…ç§»åŠ¨ä¸€æ¬¡ã€‚<br>è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª autoPlayFlag å‚æ•°æ¥ä¿å­˜ setInterval çš„å›è°ƒï¼Œç”¨æ¥åœ¨é¼ æ ‡åœæ”¾åœ¨å›¾ç‰‡ä¸Šåœæ­¢è‡ªåŠ¨è½®æ’­ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ª autoPlayFlag ä½œä¸ºç»„ä»¶çš„ä¸€ä¸ªå±æ€§æ¥ä¿å­˜ã€‚<br><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">Slider.autoPlayFlag = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨ç»„ä»¶åˆå§‹åŒ– componentDidMount çš„æ—¶å€™è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼š<br><figure class="highlight roboconf"><table><tr><td class="code"><pre><span class="line"><span class="component">componentDidMount() &#123;</span><br><span class="line">  this<span class="string">.goPlay()</span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ª pausePlay å‡½æ•°æ¥æš‚åœè‡ªåŠ¨è½®æ’­ã€‚</p>
<figure class="highlight roboconf"><table><tr><td class="code"><pre><span class="line"><span class="component">pausePlay() &#123;</span><br><span class="line">  clearInterval(this<span class="string">.autoPlayFlag)</span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ€åå°±æ˜¯ render äº†ï¼Œæ ¹æ®å±æ€§é…ç½®å“ªäº›å‡½æ•°å’Œç»„ä»¶éœ€è¦ï½</p>
</li>
<li>é»˜è®¤å±æ€§ï¼Œè¿™ä¸ªæ˜¯éœ€è¦çš„ï¼Œåœ¨ä½¿ç”¨å±æ€§çš„æ—¶å€™å¦‚æœå¿˜äº†ä¸€äº›é…ç½®é¡¹ä¹Ÿä¸ä¼šå‡ºé”™ã€‚<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Slider.defaultProps = &#123;</span><br><span class="line">  speed: <span class="number">1</span>,</span><br><span class="line">  delay: <span class="number">2</span>,</span><br><span class="line">  pause: <span class="literal">true</span>,</span><br><span class="line">  autoplay: <span class="literal">true</span>,</span><br><span class="line">  dots: <span class="literal">true</span>,</span><br><span class="line">  arrows: <span class="literal">true</span>,</span><br><span class="line">  items: [],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="æ ·å¼">æ ·å¼</h2><p>ä»€ä¹ˆï¼Œä½ å‘Šè¯‰æˆ‘æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šçš„éƒ½æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ<br>æ¥å†™ scss å§ï¼š<br><figure class="highlight less"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class">.slider</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">&amp;</span>&gt;<span class="tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: left <span class="number">1s</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class">.slider-item</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">&amp;</span>&gt;<span class="tag">img</span> &#123;</span><br><span class="line">      <span class="attribute">display</span>: block;</span><br><span class="line">      <span class="attribute">height</span>: auto;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class">.slider-arrow</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">color</span>: <span class="hexcolor">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">&amp;</span><span class="pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">background</span>: <span class="function">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">&amp;</span><span class="class">.slider-arrow-right</span> &#123;</span><br><span class="line">      <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">&amp;</span><span class="class">.slider-arrow-left</span> &#123;</span><br><span class="line">      <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class">.slider-dots-wrap</span> &#123;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">99</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class">.slider-dot</span> &#123;</span><br><span class="line">      <span class="attribute">display</span>: inline-block;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">6px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">6px</span>;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">3px</span> solid <span class="hexcolor">#ccc</span>;</span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">6px</span>;</span><br><span class="line">      <span class="attribute">cursor</span>: pointer;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">&amp;</span><span class="pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">3px</span> solid <span class="hexcolor">#868686</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">&amp;</span><span class="class">.slider-dot-selected</span> &#123;</span><br><span class="line">        <span class="attribute">background</span>: <span class="hexcolor">#ccc</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œä¸å¤šè¯´äº†ï¼Œæ ·å¼å°±è¿™æ ·ï½<br>æœ‰ç–‘é—®å¯ä»¥ call meã€‚</p>
<h1 id="è°¢è°¢è°¢è°¢ï¼Œè°¢è°¢å„ä½å®¢å®˜å…‰çœ‹_ï½_ğŸ˜„_ğŸ˜„_å•Šå“ˆ_ğŸ˜">è°¢è°¢è°¢è°¢ï¼Œè°¢è°¢å„ä½å®¢å®˜å…‰çœ‹ ï½  ğŸ˜„ ğŸ˜„ å•Šå“ˆ ğŸ˜</h1><p> ğŸ˜„ ğŸ˜„ ğŸ˜ ğŸ¶ ğŸ©</p>
]]></content>
    <summary type="html">
    <![CDATA[<p><img src="/img/react.png" alt="React"></p>
<h1 id="tip">tip</h1><p>React åˆšå‡ºæ¥ä¸ä¹…ï¼Œç»„ä»¶è¿˜æ¯”è¾ƒå°‘ï¼Œä¸åƒ jquery é‚£æ ·å·²ç»æœ‰å¾ˆå¤šç°æˆçš„æ’ä»¶äº†ï¼Œå½“æ˜¯å°±è‡ªå·±å†™äº†ä¸€ä¸ªåŸºäº React çš„è½®æ’­ç»„ä»¶ï¼Œå½“ç„¶åª]]>
    </summary>
    
      <category term="JavaScript" scheme="http://qiutc.me/tags/JavaScript/"/>
    
      <category term="React" scheme="http://qiutc.me/tags/React/"/>
    
      <category term="React" scheme="http://qiutc.me/categories/React/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[webpack 2 çš„æ–°ç‰¹æ€§ - What's new in webpack 2]]></title>
    <link href="http://qiutc.me/post/webpack-2-%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7-What-s-new-in-webpack-2.html"/>
    <id>http://qiutc.me/post/webpack-2-çš„æ–°ç‰¹æ€§-What-s-new-in-webpack-2.html</id>
    <published>2016-02-02T09:31:32.000Z</published>
    <updated>2016-05-10T03:52:07.000Z</updated>
    <content type="html"><![CDATA[<p><img src="/img/webpack.png" alt="webpack"></p>
<p>åŸæ–‡ <a href="https://gist.github.com/sokra/27b24881210b56bbaff7" target="_blank" rel="external">Whatâ€™s new in webpack 2</a></p>
<h1 id="webpack_2_ä¸­çš„æ–°ç‰¹æ€§">webpack 2 ä¸­çš„æ–°ç‰¹æ€§</h1><p>åˆ›é€ æ°¸æ— æ­¢å¢ƒï¼Œç°åœ¨ webpack 2 çš„ç‰ˆæœ¬å·²ç»æ›´æ–°åˆ°äº† 2.0.5-beta+ ã€‚</p>
<h1 id="ä¸»è¦çš„å˜åŒ–">ä¸»è¦çš„å˜åŒ–</h1><h2 id="ES6_Modules">ES6 Modules</h2><p>webpack 2 å·²ç»æ”¯æŒåŸç”Ÿçš„ ES6 çš„æ¨¡å—åŠ è½½å™¨äº†ï¼Œè¿™æ„å‘³ç€ webpack 2 èƒ½å¤Ÿç†è§£å’Œå¤„ç† <code>import</code>å’Œ<code>export</code>äº†ï¼Œè€Œä¸ç”¨æŠŠä»–ä»¬è½¬åŒ–æˆ CommonJS æ¥å¤„ç†äº†ã€‚<br><figure class="highlight dns"><table><tr><td class="code"><pre><span class="line">import &#123; currentPage, readPage &#125; from "./book"<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">currentPage === 0<span class="comment">;</span></span><br><span class="line">readPage()<span class="comment">;</span></span><br><span class="line">currentPage === 1<span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// book.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> currentPage = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">readPage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    currentPage++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="string">"This is a book"</span>;</span><br></pre></td></tr></table></figure>
<h3 id="ç”¨_ES6_æ¥åšä»£ç æ‹†åˆ†">ç”¨ ES6 æ¥åšä»£ç æ‹†åˆ†</h3><p>ES6 çš„æ¨¡å—åŠ è½½å™¨å®šä¹‰äº†<code>System.import</code>è¿™ä¸€ä¸ªæ–¹æ³•ï¼Œ<code>System.import</code>èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ ES6 æ¨¡å—ã€‚<br>webpack æŠŠ<code>System.import</code>çº¿ç¨‹ä½œä¸ºä¸€ä¸ªäº¤å‰æŒ‡é’ˆç„¶åæŠŠè¢«è¦æ±‚çš„æ¨¡å—æ”¾åˆ°ä¸€ä¸ªåˆ†ç¦»çš„ä»£ç å—é‡Œé¢ã€‚ï¼ˆè¿™é‡ŒçœŸå¿ƒçœ‹ä¸æ‡‚ï¼Œä¹±æ¥äº†ğŸ˜‚ï¼Œåæ­£æ„æ€å°±æ˜¯é‚£æ ·ï¼‰<br><code>System.import</code>å‡½æ•°æŠŠæ¨¡å—åä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªå¼‚æ­¥å›è°ƒå‡½æ•°ã€‚<br><figure class="highlight openscad"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onClick</span><span class="params">()</span> &#123;</span></span><br><span class="line">    System.<span class="built_in">import</span>(<span class="string">"./module"</span>).then(<span class="function"><span class="keyword">module</span> =</span>&gt; &#123;</span><br><span class="line">        <span class="function"><span class="keyword">module</span>.<span class="title">default</span>;</span><br><span class="line">    &#125;).<span class="title">catch</span><span class="params">(err =&gt; &#123;</span><br><span class="line">        console.log<span class="params">(<span class="string">"Chunk loading failed"</span>)</span>;</span><br><span class="line">    &#125;)</span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>å¥½æ¶ˆæ¯ï¼šæ¨¡å—åŠ è½½å¤±è´¥å¯ä»¥è¢«æ•æ‰åˆ°é”™è¯¯äº†ã€‚</p>
<h3 id="åŠ¨æ€è¡¨è¾¾ï¼ˆå¼‚æ­¥è¯·æ±‚jsï¼‰">åŠ¨æ€è¡¨è¾¾ï¼ˆå¼‚æ­¥è¯·æ±‚jsï¼‰</h3><p>å¯ä»¥å¯ä»¥æŠŠéƒ¨åˆ†ä»£ç ä¼ é€’ç»™ <code>System.import</code> ï¼Œå®ƒçš„æ“ä½œå…¶å®å’Œ CommonJS æ˜¯ç±»ä¼¼çš„ï¼Œç»™æ‰€æœ‰å¯èƒ½çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªç¯å¢ƒã€‚æ„æ€å°±æ˜¯è¯´å½“ä½ ä¼ é€’é‚£éƒ¨åˆ†ä»£ç çš„æ¨¡å—è¿˜ä¸ç¡®å®šçš„æ—¶å€™ï¼Œwebpack ä¼šè‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„æ¨¡å—ï¼Œç„¶åæ ¹æ®éœ€æ±‚åŠ è½½ã€‚<br>è¿™ä¸ªç‰¹æ€§åœ¨å‰ç«¯è·¯ç”±çš„æ—¶å€™å¾ˆæœ‰ç”¨ï¼Œå¯ä»¥å®ç°æŒ‰éœ€åŠ è½½èµ„æºã€‚<br><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">route</span><span class="params">(path, query)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> System.<span class="keyword">import</span>(<span class="string">"./routes/"</span> + path + <span class="string">"/route"</span>)</span><br><span class="line">        .then(route =&gt; <span class="keyword">new</span> route.Route(query));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// This creates a separate chunk for each possible route</span></span><br></pre></td></tr></table></figure></p>
<h3 id="æ··åˆä½¿ç”¨_ES6_å’Œ_AMD_å’Œ_CommonJS_(Mixing_ES6_with_AMD_and_CommonJS)">æ··åˆä½¿ç”¨ ES6 å’Œ AMD å’Œ CommonJS (Mixing ES6 with AMD and CommonJS)</h3><p>åœ¨ AMD å’Œ CommonJS æ¨¡å—åŠ è½½å™¨ä¸­ï¼Œä½ å¯ä»¥æ··åˆä½¿ç”¨æ‰€æœ‰ï¼ˆä¸‰ç§ï¼‰çš„æ¨¡å—ç±»å‹ï¼ˆå³ä½¿æ˜¯åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼‰ã€‚åœ¨ä¸‹é¢çš„æƒ…å†µä¸­ webpack çš„å¤„ç†æ—¶ç±»ä¼¼çš„ã€‚<br><figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line">// CommonJS consuming ES6 Module</span><br><span class="line"><span class="label">var</span> <span class="keyword">book </span>= <span class="preprocessor">require</span>(<span class="string">"./book"</span>)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">book.currentPage;</span><br><span class="line"></span><span class="keyword">book.readPage();</span><br><span class="line"></span><span class="keyword">book.default </span>=== <span class="string">"This is a book"</span><span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ES6 Module consuming CommonJS</span></span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">"fs"</span>; <span class="comment">// module.exports map to default</span></span><br><span class="line"><span class="keyword">import</span> &#123; readFileSync &#125; <span class="keyword">from</span> <span class="string">"fs"</span>; <span class="comment">// named exports are read from returned object+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> fs.readFileSync === <span class="string">"function"</span>;</span><br><span class="line"><span class="keyword">typeof</span> readFileSync === <span class="string">"function"</span>;</span><br></pre></td></tr></table></figure>
<h3 id="babel_å’Œ_webpack">babel å’Œ webpack</h3><p><code>es2015</code> balel çš„é»˜è®¤é¢„å¤„ç†ä¼šæŠŠ ES6 æ¨¡å—åŠ è½½å™¨è½¬åŒ–æˆ CommonJS æ¨¡å—åŠ è½½ã€‚è¦æ˜¯æƒ³ä½¿ç”¨ webpack æ–°å¢çš„å¯¹åŸç”Ÿ ES6 æ¨¡å—åŠ è½½å™¨çš„æ”¯æŒï¼Œä½ éœ€è¦ä½¿ç”¨ <code>es2015-webpack</code> æ¥ä»£æ›¿ã€‚</p>
<h3 id="å¯¹_ES6_ä¼˜åŒ–ç»†è¿°">å¯¹ ES6 ä¼˜åŒ–ç»†è¿°</h3><p>ES6 åº•å±‚æ”¯æŒä¸€äº›æ–°çš„ä¼˜åŒ–ã€‚æ¯”å¦‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹å®ƒå¯ä»¥æŸ¥æ˜å“ªäº› exports æ˜¯ä½¿ç”¨è¿‡çš„ï¼Œå“ªäº›æ˜¯æœªä½¿ç”¨è¿‡çš„ã€‚<br>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå½“ webpack å¯ä»¥è‚¯å®šåœ°è®¤ä¸ºä¸€ä¸ª export å®ƒæ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œä»–ä¼šå¿½ç•¥æš´æ¼ export ç»™å…¶ä»–æ¨¡å—çš„çš„å£°æ˜ï¼Œè¿™æ ·å¯ä»¥æå°æˆæœ¬åœ°æ ‡å¿—ä¸€ä¸ª export æœªä½¿ç”¨è¿‡å¹¶ä¸”å¿½ç•¥å®ƒã€‚<br><br><br>åœ¨ä»¥ä¸‹çš„æƒ…å†µä¸­å¾ˆå¯èƒ½æŸ¥æ˜ä½¿ç”¨çŠ¶å†µï¼š</p>
<ul>
<li>named import</li>
<li>default import</li>
<li>reexport</li>
</ul>
<p>åœ¨ä»¥ä¸‹çš„æƒ…å†µä¸­ä¸å¤§å¯èƒ½æŸ¥æ˜ä½¿ç”¨çŠ¶å†µï¼š</p>
<ul>
<li>import * as â€¦</li>
<li>CommonJS or AMD consuming ES6 module</li>
<li>System.import</li>
</ul>
<h2 id="ç»“æ„é…ç½®">ç»“æ„é…ç½®</h2><p>åœ¨è¿‡å»ï¼Œç”±äºç¯å¢ƒçš„ä¸åŒéœ€è¦å»å¤„ç†ä¸åŒç¯å¢ƒä¸‹çš„ç»“æ„é…ç½®ï¼Œwebpack 2 å¸¦æ¥äº†ä¸€ç§æ–°çš„æ–¹å¼å»é…ç½®ã€‚<br>é…ç½®æ–‡ä»¶å¯ä»¥æš´æ¼ä¸€ä¸ªè¿”å›ç»“æ„é…ç½®çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¢« CLI è°ƒç”¨ï¼Œç„¶åå€¼é€šè¿‡ <code>--env</code> ä¼ é€’ç»™ç»“æ„é…ç½®çš„å‡½æ•°ã€‚<br>ä½ å¯ä»¥ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆâ€“env dev =&gt; â€œdevâ€ï¼‰æˆ–è€…ä¸€ä¸ªå¤æ‚çš„é…ç½®å¯¹è±¡ (â€“env.minimize â€“env.server localhost =&gt; {minimize: true, server: â€œlocalhostâ€}) ç»™è¿™ä¸ªå‡½æ•°ã€‚æˆ‘æ¨èå¤§å®¶ä½¿ç”¨å¯¹è±¡ï¼Œå› ä¸ºå®ƒæ›´å…·æœ‰å¯æ‰©å±•æ€§ï¼Œå½“æ˜¯è¿™å–å†³äºä½ ã€‚<br>ä¾‹å­ï¼š<br><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.babel.js</span></span><br><span class="line">exports <span class="keyword">default</span> <span class="function"><span class="keyword">function</span><span class="params">(options)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        devtool: options.dev ? <span class="string">"cheap-module-eval-source-map"</span> : <span class="string">"hidden-source-map"</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="é…ç½®é¡¹">é…ç½®é¡¹</h2><p>è¿™é‡Œæ˜¯ä¸€äº›ä¸»è¦çš„é‡æ„<a href="https://github.com/webpack/enhanced-resolve" target="_blank" rel="external">https://github.com/webpack/enhanced-resolve</a>ã€‚å®ƒæ„å‘³ç€é…ç½®é¡¹ä¹Ÿæ”¹å˜äº†ã€‚<br>å¤§å¤šæ•°æ˜¯ç®€åŒ–äº†é…ç½®ï¼Œæˆ–è€…æ˜¯è®©é…ç½®æ›´ä¸å®¹æ˜“å‡ºé”™ã€‚<br>æ–°çš„é…ç½®ï¼š<br><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    modules: [path.<span class="built_in">resolve</span>(__dirname, <span class="string">"app"</span>), <span class="string">"node_modules"</span>]</span><br><span class="line">   <span class="comment"> // (was split into `root`, `modulesDirectories` and `fallback` in the old options)</span></span><br><span class="line">   <span class="comment"> // In which folders the resolver look for modules</span></span><br><span class="line">   <span class="comment"> // relative paths are looked up in every parent folder (like node_modules)</span></span><br><span class="line">   <span class="comment"> // absolute paths are looked up directly</span></span><br><span class="line">   <span class="comment"> // the order is respected</span></span><br><span class="line"></span><br><span class="line">    descriptionFiles: [<span class="string">"package.json"</span>, <span class="string">"bower.json"</span>],</span><br><span class="line">   <span class="comment"> // These JSON files are read in directories</span></span><br><span class="line"></span><br><span class="line">    mainFields: [<span class="string">"main"</span>, <span class="string">"browser"</span>],</span><br><span class="line">   <span class="comment"> // These fields in the description files are looked up when trying to resolve the package directory</span></span><br><span class="line"></span><br><span class="line">    mainFiles: [<span class="string">"index"</span>]</span><br><span class="line">   <span class="comment"> // These files are tried when trying to resolve a directory</span></span><br><span class="line"></span><br><span class="line">    aliasFields: [<span class="string">"browser"</span>],</span><br><span class="line">   <span class="comment"> // These fields in the description files offer aliasing in this package</span></span><br><span class="line">   <span class="comment"> // The content of these fields is an object where requests to a key are mapped to the corresponding value</span></span><br><span class="line"></span><br><span class="line">    extensions: [<span class="string">".js"</span>, <span class="string">".json"</span>],</span><br><span class="line">   <span class="comment"> // These extensions are tried when resolving a file</span></span><br><span class="line"></span><br><span class="line">    enforceExtension: <span class="constant">false</span>,</span><br><span class="line">   <span class="comment"> // If false it will also try to use no extension from above</span></span><br><span class="line"></span><br><span class="line">    moduleExtensions: [<span class="string">"-loader"</span>],</span><br><span class="line">   <span class="comment"> // These extensions are tried when resolving a module</span></span><br><span class="line"></span><br><span class="line">    enforceModuleExtension: <span class="constant">false</span>,</span><br><span class="line">   <span class="comment"> // If false it's also try to use no module extension from above</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">alias</span>: &#123;</span><br><span class="line">        jquery: path.<span class="built_in">resolve</span>(__dirname, <span class="string">"vendor/jquery-2.0.0.js"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment"> // These aliasing is used when trying to resolve a module</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="ä¸€äº›å¤§å˜åŒ–">ä¸€äº›å¤§å˜åŒ–</h1><h2 id="Promise_polyfill">Promise polyfill</h2><h2 id="Loaders_çš„é…ç½®">Loaders çš„é…ç½®</h2><p>åœ¨ loaders çš„é…ç½®ä¸­ä½¿ç”¨äº† <code>resourcePath</code> æ¥æ›¿ä»£åŸæ¥çš„ <code>resource</code><br><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="string">loaders:</span> [</span><br><span class="line">    &#123;</span><br><span class="line"><span class="label">        test:</span> <span class="regexp">/\.css$/</span>,</span><br><span class="line"><span class="label">        loaders:</span> [</span><br><span class="line">            <span class="string">"style-loader"</span>,</span><br><span class="line">            &#123; <span class="string">loader:</span> <span class="string">"css-loader"</span>, <span class="string">query:</span> &#123; <span class="string">modules:</span> <span class="literal">true</span> &#125; &#125;,</span><br><span class="line">            &#123;</span><br><span class="line"><span class="label">                loader:</span> <span class="string">"sass-loader"</span>,</span><br><span class="line"><span class="label">                query:</span> &#123;</span><br><span class="line"><span class="label">                    includePaths:</span> [</span><br><span class="line">                        path.resolve(__dirname, <span class="string">"some-folder"</span>)</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<h2 id="Minimize">Minimize</h2><p>åœ¨ UglifyJsPlugin ä¸­ä¸å†æ”¯æŒè®© Loaders æœ€å°åŒ–æ–‡ä»¶çš„æ¨¡å¼äº†ï¼Œ<code>debug</code> é…ç½®ä¹Ÿè¢«ç§»é™¤äº†ï¼ŒLoaders ä¸èƒ½ä» webpack çš„é…ç½®ä¸­è¯»å–åˆ°ä»–ä»¬çš„é…ç½®é¡¹äº†ï¼Œå–ä»£çš„æ–¹æ¡ˆæ˜¯ï¼š<br><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.LoaderOptionsPlugin(&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>, <span class="comment">// optionally pass test, include and exclude, default affects all loaders</span></span><br><span class="line">    minimize: <span class="keyword">true</span>,</span><br><span class="line">    debug: <span class="keyword">false</span>,</span><br><span class="line">    <span class="keyword">options</span>: &#123;</span><br><span class="line">        <span class="comment">// pass stuff to the loader</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<p><img src="/img/webpack.png" alt="webpack"></p>
<p>åŸæ–‡ <a href="https://gist.github.com/sokra/27b24881210b56bbaff7" target="_blank" rel="ex]]>
    </summary>
    
      <category term="JavaScript" scheme="http://qiutc.me/tags/JavaScript/"/>
    
      <category term="webpack" scheme="http://qiutc.me/tags/webpack/"/>
    
      <category term="webpack" scheme="http://qiutc.me/categories/webpack/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[redux å¤§æ³•å¥½ â€”â€” å…¥é—¨å®ä¾‹ TodoList]]></title>
    <link href="http://qiutc.me/post/redux-%E5%A4%A7%E6%B3%95%E5%A5%BD-%E2%80%94%E2%80%94-%E5%85%A5%E9%97%A8%E5%AE%9E%E4%BE%8B-TodoList.html"/>
    <id>http://qiutc.me/post/redux-å¤§æ³•å¥½-â€”â€”-å…¥é—¨å®ä¾‹-TodoList.html</id>
    <published>2015-12-21T06:24:43.000Z</published>
    <updated>2016-05-10T03:53:46.000Z</updated>
    <content type="html"><![CDATA[<p><img src="/img/redux.jpeg" alt="redux"></p>
<h1 id="Tip">Tip</h1><p>å‰ç«¯æŠ€æœ¯çœŸæ˜¯æ—¥æ–°æœˆå¼‚ï¼Œæå®Œ React ä¸æ­é…ä¸ªæ•°æ®æµéƒ½ä¸å¥½æ„æ€äº†ã€‚<br>æ»¡æ€€æœŸå¾…çš„å¿ƒå»ç¿»äº†ç¿» fluxï¼Œç®€ç›´è¢«å®˜æ–¹é‚£æ„è¯†æµçš„æ–‡æ¡£æŠ˜æœäº†ï¼ŒçœŸæ˜¯åˆè‡­åˆé•¿è¿˜æ˜¯æˆ‘æ™ºå•†é—®é¢˜ï¼ŸğŸ˜–<br>è½¬æˆ˜ redux ï¼Œè¶Šçœ‹è¶Šæœ‰æ„æ€ï¼Œè·Ÿç€æ–‡æ¡£åšäº†ä¸ª TodoList çš„å…¥é—¨å°ä¾‹å­ã€‚</p>
<p>åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆè´´ä¸Šæ–‡ç« ç”¨åˆ°ä¾‹å­çš„æºç  <a href="https://github.com/TongchengQiu/TodoList-as-redux-demo" target="_blank" rel="external">https://github.com/TongchengQiu/TodoList-as-redux-demo</a><br>redux çš„ Github ä»“åº“ <a href="https://github.com/rackt/redux" target="_blank" rel="external">https://github.com/rackt/redux</a><br>è¿˜æœ‰ä¸ªä¸­æ–‡çš„ gitbook ç¿»è¯‘æ–‡æ¡£ <a href="http://camsong.github.io/redux-in-chinese/index.html" target="_blank" rel="external">http://camsong.github.io/redux-in-chinese/index.html</a></p>
<h1 id="advantage">advantage</h1><p>éšç€spaï¼ˆä¸æ˜¯SPAï¼Œæ˜¯å•é¡µåº”ç”¨ï¼‰çš„å‘å±•ï¼Œä»¥ react æ¥è¯´ï¼Œç»„ä»¶åŒ–å’ŒçŠ¶æ€æœºçš„æ€æƒ³çœŸæ˜¯è§£æ”¾äº†çƒ¦æ¼çš„ dom æ“ä½œï¼Œä¸€åˆ‡éƒ½ä¸ºçŠ¶æ€ã€‚state æ¥æ“çºµ views çš„å˜åŒ–ã€‚<br>ç„¶è€Œï¼Œå› ä¸ºé¡µé¢çš„ç»„ä»¶åŒ–ï¼Œå¯¼è‡´æ¯ä¸ªç»„ä»¶éƒ½å¿…é¡»ç»´æŠ¤è‡ªèº«çš„ä¸€å¥—çŠ¶æ€ï¼Œå¯¹äºå°å‹åº”ç”¨è¿˜å¥½ã€‚<br>ä½†æ˜¯å¯¹äºæ¯”è¾ƒå¤§çš„åº”ç”¨æ¥è¯´ï¼Œè¿‡å¤šçš„çŠ¶æ€æ˜¾å¾—é”™ç»¼å¤æ‚ï¼Œåˆ°æœ€åéš¾ä»¥ç»´æŠ¤ï¼Œå¾ˆéš¾æ¸…æ™°åœ°ç»„ç»‡æ‰€æœ‰çš„çŠ¶æ€ï¼Œåœ¨å¤šäººå¼€å‘ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¯¼è‡´ç»å¸¸ä¼šå‡ºç°ä¸€äº›ä¸æ˜æ‰€ä»¥çš„å˜åŒ–ï¼Œè¶Šåˆ°åé¢è°ƒè¯•ä¸Šä¹Ÿæ˜¯è¶Šéº»çƒ¦ï¼Œå¾ˆå¤šæ—¶å€™ state çš„å˜åŒ–å·²ç»ä¸å—æ§åˆ¶ã€‚å¯¹äºç»„ä»¶é—´é€šè¡Œã€æœåŠ¡ç«¯æ¸²æŸ“ã€è·¯ç”±è·³è½¬ã€æ›´æ–°è°ƒè¯•ï¼Œæˆ‘ä»¬å¾ˆéœ€è¦ä¸€å¥—æœºåˆ¶æ¥æ¸…æ™°çš„ç»„ç»‡æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€ï¼Œredux åº”ç„¶è€Œç”Ÿï¼Œè¿™ç§æ•°æ®æµçš„æ€æƒ³çœŸæ˜¯äº†ä¸èµ·ã€‚</p>
<h1 id="state_æ ¹å¯¹è±¡çš„ç»“æ„">state æ ¹å¯¹è±¡çš„ç»“æ„</h1><p>åœ¨ react ä¸­ï¼Œæˆ‘ä»¬å°½é‡ä¼šæŠŠçŠ¶æ€æ”¾åœ¨é¡¶å±‚çš„ç»„ä»¶ï¼Œåœ¨é¡¶å±‚ç»„ä»¶ä½¿ç”¨ redux æˆ–è€… routerã€‚<br>è¿™å°±æŠŠç»„ä»¶åˆ†ä¸ºäº†ä¸¤ç§ï¼šå®¹å™¨ç»„ä»¶å’Œå±•ç¤ºç»„ä»¶ã€‚<br>å®¹å™¨ç»„ä»¶ï¼šå’Œ redux å’Œ router äº¤äº’ï¼Œç»´æŠ¤ä¸€å¥—çŠ¶æ€å’Œè§¦å‘ actionã€‚<br>å±•ç¤ºç»„ä»¶ï¼šå±•ç¤ºç»„ä»¶æ˜¯åœ¨å®¹å™¨ç»„ä»¶çš„å†…éƒ¨ï¼Œä»–ä»¬ä¸ç»´æŠ¤çŠ¶æ€ï¼Œæ‰€æœ‰æ•°æ®é€šè¿‡ props ä¼ ç»™ä»–ä»¬ï¼Œæ‰€æœ‰æ“ä½œä¹Ÿæ˜¯é€šè¿‡å›è°ƒå®Œæˆã€‚<br>è¿™æ ·ï¼Œæˆ‘ä»¬æ•´å¥—åº”ç”¨çš„æ¶æ„å°±æ˜¾å¾—æ¸…æ™°äº†ã€‚</p>
<h1 id="part">part</h1><p>redux åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼Œstore ï¼Œ action ï¼Œreducer ã€‚</p>
<h2 id="store">store</h2><p>æ•´ä¸ªåº”ç”¨çš„ state è¢«å‚¨å­˜åœ¨ä¸€æ£µ object tree ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª object tree åªå­˜åœ¨äºå”¯ä¸€ä¸€ä¸ª store ä¸­ã€‚<br>æˆ–è€…è¿™ä¹ˆè¯´ store çš„æŒ‡è´£æœ‰è¿™äº›ï¼š</p>
<ul>
<li>ç»´æŠ¤æ•´ä¸ªåº”ç”¨çš„ state</li>
<li>æä¾› getState() æ–¹æ³•è·å– stateï¼›</li>
<li>æä¾› dispatch(action) æ–¹æ³•æ›´æ–° stateï¼›</li>
<li>é€šè¿‡ subscribe(listener) æ³¨å†Œç›‘å¬å™¨ã€‚</li>
</ul>
<p>è¿™ä¹ˆè§£é‡Šä¸€ä¸‹ï¼Œæ•´ä¸ªåº”ç”¨çš„ state éƒ½å‚¨å­˜åœ¨ store ä¸­ï¼Œå®¹å™¨ç»„ä»¶å¯ä»¥ä» store ä¸­è·å–æ‰€éœ€è¦çš„çŠ¶æ€ã€‚<br>å®¹å™¨ç»„ä»¶åŒæ—¶ä¹Ÿå¯ä»¥å‘é€ç»™ store ä¸€ä¸ª actionï¼Œå‘Šè¯‰ä»–æ”¹å˜æŸä¸ªçŠ¶æ€çš„å€¼ï¼Œæ‰€ä»¥è¯´å®¹å™¨ç»„ä»¶åªè¦å‘é€ä¸€ä¸ªæŒ‡ä»¤ï¼Œå°±å¯ä»¥å« store å» setStateï¼Œç„¶å store çš„ state æ”¹å˜ï¼Œå›è¿‡æ¥å®¹å™¨ç»„ä»¶è·å–åˆ°çš„ state æ”¹å˜ï¼Œå¯¼è‡´ views çš„æ›´æ–°ã€‚</p>
<h2 id="action">action</h2><p>action å¯ä»¥ç†è§£ä¸ºä¸€ç§æŒ‡ä»¤ï¼Œstore æ•°æ®çš„å”¯ä¸€ç”±æ¥å°±æ˜¯ actionï¼Œaction æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒéœ€è¦è‡³å°‘ä¸€ä¸ªå…ƒç´ ï¼Œtypeï¼Œtype æ˜¯è¿™ä¸ªæŒ‡ä»¤çš„å”¯ä¸€æ ‡è¯†ï¼Œå…¶å®ƒå…ƒç´ æ˜¯ä¼ é€è¿™ä¸ªæŒ‡ä»¤çš„ state å€¼<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">type</span>:<span class="value"> ACTION_TYPE,</span><br><span class="line">  text: â€œcontentâ€,</span><br><span class="line"></span></span></span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæŒ‡ä»¤ç”±ç»„ä»¶è§¦å‘ï¼Œç„¶åä¼ åˆ° reducerã€‚</p>
<h2 id="reducer">reducer</h2><p>action åªæ˜¯è¯´æ˜äº†è¦å»åšä»€ä¹ˆï¼Œå’Œåšè¿™ä»¶äº‹æƒ…éœ€è¦çš„å‚æ•°å€¼ã€‚<br>å…·ä½“å»æ”¹å˜ store ä¸­çš„ state æ˜¯ç”± reducer æ¥åšçš„ã€‚<br>reducer å…¶å®æ˜¯ä¸€ä¸ªåŒ…å« switch çš„å‡½æ•°ï¼Œå‰é¢ä¸æ˜¯è¯´ç»„ä»¶è§¦å‘çš„ action ä¼šä¼ é€’åˆ° reducerï¼Œreducer æ¥æ”¶è¿™ä¸ªå‚æ•° actionï¼Œä»–é€šè¿‡ switch(action.type) ç„¶ååšä¸åŒæ“ä½œï¼Œå‰é¢è¯´äº†ï¼Œè¿™ä¸ª type æ˜¯æŒ‡ä»¤çš„æ ‡è¯†ï¼Œreducer æ ¹æ®è¿™ä¸ªæ ‡è¯†æ¥ä½œå‡ºä¸åŒçš„æ“ä½œã€‚<br>è¿™ä¸ªæ“ä½œæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>reducer è¿˜æ¥æ”¶å¦ä¸€ä¸ªå‚æ•° stateï¼Œè¿™ä¸ªæ˜¯æ—§çš„ stateã€‚ä» action é‡Œé¢è¿˜å¯ä»¥è·å–åˆ°åšè¿™ä¸ªæ“ä½œéœ€è¦çš„ å‚æ•°å€¼ã€‚<br>è¿™ä¸ªæ“ä½œå…¶å®å°±æ˜¯å¯¹åŸæœ‰çš„ state å’Œ ä» action ä¸­çš„åˆ°çš„å€¼ï¼Œæ¥è¿›è¡Œæ“ä½œï¼ˆç»“åˆï¼Œåˆ é™¤ï¼Œâ€¦ï¼‰ç„¶åè¿”å›ä¸€ä¸ª æ–°çš„ state åˆ° storeã€‚</p>
<h2 id="æ•°æ®æµ">æ•°æ®æµ</h2><p>æŠŠå‰é¢çš„è¯­è¨€ç»„ç»‡ä¸€ä¸‹ï¼Œæ•´ä¸ªæ“ä½œçš„æ•°æ®æµå…¶å®æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>store æŠŠæ•´ä¸ªåº”ç”¨çš„ stateï¼ŒgetState()ï¼Œdispatch()ï¼Œsubscribe() ä¼ ç»™é¡¶å±‚å®¹å™¨ç»„ä»¶ï¼›</li>
<li>å®¹å™¨ç»„ä»¶å’Œä¸‰ä¸ªéƒ¨åˆ†äº¤äº’ï¼š<ul>
<li>å†…éƒ¨çš„å±•ç¤ºç»„ä»¶ï¼šå®¹å™¨æŠŠçŠ¶æ€åˆ†å‘ç»™å„ä¸ªç»„ä»¶ï¼ŒæŠŠ dispatchï¼ˆæ“ä½œæ•°æ®çš„å‡½æ•°ï¼‰ä»¥å›è°ƒçš„å½¢å¼åˆ†å‘ç»™å„ä¸ªç»„ä»¶ï¼›</li>
<li>actionï¼šå®¹å™¨è·å– actionï¼›</li>
<li>reducerï¼šå®¹å™¨å¯ä»¥è°ƒç”¨ dispatch(action)ï¼Œè¿™ä¸ªä¸Šé¢è¯´äº†ï¼Œä¼šä»¥å›è°ƒçš„å½¢å¼ç»™ä¸‹é¢çš„å­ç»„ä»¶ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®ä¸åŒçš„ç”¨æˆ·æ“ä½œï¼Œè°ƒç”¨ä¸åŒçš„ dispatch(action)ï¼Œæ‰§è¡Œäº†è¿™ä¸ªå‡½æ•°ä¹‹åï¼Œå°±æŠŠ action ä¼ ç»™ reducerï¼Œç„¶åçœ‹ reducerï¼›</li>
</ul>
</li>
<li>reducer å¾—åˆ°å®¹å™¨ç»„ä»¶ä¼ æ¥çš„ action ä¹‹åï¼Œæ ¹æ® action.type è¿™ä¸ªå‚æ•°æ‰§è¡Œä¸åŒæ“ä½œï¼Œä»–è¿˜ä¼šæ¥æ”¶åˆ° store é‡Œé¢çš„åŸ stateï¼Œç„¶åæŠŠåŸ state å’Œ action å¯¹è±¡é‡Œé¢çš„å…¶å®ƒå‚æ•°è¿›è¡Œæ“ä½œï¼Œç„¶å return ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</li>
<li>reducer return ä¸€ä¸ªæ–°çš„å¯¹è±¡åˆ° storeï¼Œstore æ ¹æ®è¿™ä¸ªæ–°å¯¹è±¡ï¼Œæ›´æ–°åº”ç”¨çŠ¶æ€ã€‚</li>
</ol>
<p>ï¼ï¼ï¼ï¼ä¸€ä¸ªå¾ªç¯ â™»ï¸</p>
<h1 id="connect">connect</h1><p>Redux å’Œ React ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œä»–ä»¬å¹¶è¡¥äº’ç›¸ä¾èµ–ï¼Œä½†æ˜¯ Redux å’Œ React æ­é…èµ·æ¥ç®€ç›´å®Œç¾ã€‚<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡ react-redux è¿™ä¸ªåº“æŠŠä»–ä»¬ç»‘å®šèµ·æ¥<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> <span class="comment">--save react-redux</span></span></span><br></pre></td></tr></table></figure></p>
<p>react-redux æä¾›ä¸¤ä¸ªä¸œè¥¿ Provider å’Œ connectã€‚</p>
<h2 id="Provider">Provider</h2><p>è¿™ä¸ª Provider å…¶å®å°±æ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œä»–æ˜¯åœ¨åŸæœ‰ App Container ä¸Šé¢å†åŒ…ä¸€å±‚ï¼Œä»–çš„ä½œç”¨å°±æ˜¯æ¥æ”¶ store é‡Œé¢çš„ store ä½œä¸º propsï¼Œå°†storeæ”¾åœ¨contexté‡Œï¼Œç»™ä¸‹é¢çš„connectç”¨çš„ã€‚</p>
<h2 id="connect-1">connect</h2><p>è¿™ä¸ªç»„ä»¶æ‰æ˜¯çœŸæ­£è¿æ¥ Redux å’Œ Reactï¼Œä»–åŒ…åœ¨æˆ‘ä»¬çš„å®¹å™¨ç»„ä»¶çš„å¤–ä¸€å±‚ï¼Œä»–æ¥æ”¶ä¸Šé¢ Provider æä¾›çš„ store é‡Œé¢çš„ state å’Œ dispatchï¼Œä¼ ç»™ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥å±æ€§å½¢å¼åºŠç»™æˆ‘ä»¬çš„å®¹å™¨ç»„ä»¶ã€‚</p>
<h1 id="å®æˆ˜_TodoList">å®æˆ˜ TodoList</h1><p>è¿™ä¸ªé¡¹ç›®ä½¿ç”¨ webpack æ¥æ„å»ºï¼Œæƒ³è¦äº†è§£ webpack çš„é…ç½®å¯ä»¥çœ‹æˆ‘çš„å…¶å®ƒä¸¤ç¯‡æ–‡ç« ï¼š<br><a href="http://qiutc.me/post/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8webpack%E2%80%94webpack-howto.html">å¦‚ä½•ä½¿ç”¨webpackâ€”webpack-howto</a>;<br><a href="http://qiutc.me/post/webpack-best-practice-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-%E9%83%A8%E7%BD%B2%E7%94%9F%E4%BA%A7.html">webpack-best-practice-æœ€ä½³å®è·µ-éƒ¨ç½²ç”Ÿäº§</a>.</p>
<h2 id="ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</h2><figure class="highlight gherkin"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ app                 <span class="comment">#å¼€å‘ç›®å½•</span></span><br><span class="line">|<span class="string">   </span>|<span class="string">   </span><br><span class="line"></span>|<span class="string">   â”œâ”€â”€actions          #actionçš„æ–‡ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span><br><span class="line"></span>|<span class="string">   â”œâ”€â”€components       #å†…éƒ¨ç»„ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span><br><span class="line"></span>|<span class="string">   â”œâ”€â”€containers       #å®¹å™¨ç»„ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span><br><span class="line"></span>|<span class="string">   â”œâ”€â”€reducers         #reduceræ–‡ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span><br><span class="line"></span>|<span class="string">   â”œâ”€â”€stores           #storeé…ç½®æ–‡ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   â””â”€â”€index.js         #å…¥å£æ–‡ä»¶</span><br><span class="line"></span>|<span class="string">      </span><br><span class="line">â”œâ”€â”€ dist                #å‘å¸ƒç›®å½•</span><br><span class="line">â”œâ”€â”€ node_modules        #åŒ…æ–‡ä»¶å¤¹</span><br><span class="line">â”œâ”€â”€ .gitignore     </span><br><span class="line">â”œâ”€â”€ .jshintrc      </span><br><span class="line">â”œâ”€â”€ server.js           #æœ¬åœ°é™æ€æœåŠ¡å™¨      </span><br><span class="line">â”œâ”€â”€ webpack.config.js   #webpacké…ç½®æ–‡ä»¶</span><br><span class="line">â””â”€â”€ package.json</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬åªå…³æ³¨æˆ‘ä»¬çš„ app å¼€å‘ç›®å½•ã€‚</p>
<h2 id="index-js_å…¥å£æ–‡ä»¶">index.js å…¥å£æ–‡ä»¶</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./containers/App'</span>;</span><br><span class="line"><span class="keyword">import</span> configureStore <span class="keyword">from</span> <span class="string">'./stores/configureStore'</span>;</span><br><span class="line"><span class="keyword">const</span> store = configureStore();</span><br><span class="line">render(</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="title">Provider</span> <span class="attribute">store</span>=<span class="value">&#123;store&#125;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">App</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">Provider</span>&gt;</span>,</span><br><span class="line">  document.getElementById('root')</span><br><span class="line">);</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬ä» react-redux ä¸­è·å–äº†ä¸€ä¸ª Provider ç»„ä»¶ï¼Œæˆ‘ä»¬æŠŠå®ƒæ¸²æŸ“åˆ°åº”ç”¨çš„æœ€å¤–å±‚ã€‚<br>ä»–éœ€è¦ä¸€ä¸ªå±æ€§ store ï¼Œä»–æŠŠè¿™ä¸ª store æ”¾åœ¨contexté‡Œï¼Œç»™App(connect)ç”¨ã€‚</p>
<h2 id="store-1">store</h2><p><code>app/stores.configureStore.js</code><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> rootReducer <span class="keyword">from</span> <span class="string">'../reducers'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">configureStore</span>(<span class="params">initialState</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> store = createStore(rootReducer, initialState);</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123;</span><br><span class="line">    <span class="built_in">module</span>.hot.accept(<span class="string">'../reducers'</span>, () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> nextReducer = <span class="built_in">require</span>(<span class="string">'../reducers'</span>);</span><br><span class="line">      store.replaceReducer(nextReducer);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> store;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä»–ä» redux æ‹¿åˆ° createStore è¿™ä¸ªå‡½æ•°ï¼Œå†è·å–åˆ° rootReducer ï¼›<br>createStore å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ(reducer, [initialState])ï¼Œreducer æ¯‹åº¸ç½®ç–‘ï¼Œä»–éœ€è¦ä» store è·å– stateï¼Œä»¥åŠè¿æ¥åˆ° reducer äº¤äº’ã€‚<br>initialState æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ä¸€ä¸ªåˆå§‹åŒ– stateï¼Œå¯é€‰å‚æ•°ã€‚<br><code>module.hot</code>è¿™ä¸ªå¯ä»¥ä¸ç”¨ç®¡ï¼Œè¿™æ˜¯ webpack çƒ­åŠ è½½çš„å¤„ç†ï¼Œä½ ä¹Ÿå¯ä»¥ä¸è¦ä»–ã€‚</p>
<h2 id="å®¹å™¨ç»„ä»¶">å®¹å™¨ç»„ä»¶</h2><p><code>containers/App.jsx</code><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  addTodo,</span><br><span class="line">  completeTodo,</span><br><span class="line">  setVisibilityFilter,</span><br><span class="line">  VisibilityFilters</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'../actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> AddTodo <span class="keyword">from</span> <span class="string">'../components/AddTodo'</span>;</span><br><span class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span>;</span><br><span class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'../components/Footer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; dispatch, visibleTodos, visibilityFilter &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">AddTodo</span></span><br><span class="line">          <span class="attribute">onAddClick</span>=<span class="value">&#123;text</span> =&gt;</span></span><br><span class="line">            dispatch(addTodo(text))</span><br><span class="line">          &#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="title">TodoList</span></span><br><span class="line">          <span class="attribute">todos</span>=<span class="value">&#123;visibleTodos&#125;</span></span><br><span class="line">          <span class="attribute">onTodoClick</span>=<span class="value">&#123;index</span> =&gt;</span> dispatch(completeTodo(index))&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="title">Footer</span></span><br><span class="line">          <span class="attribute">filter</span>=<span class="value">&#123;visibilityFilter&#125;</span></span><br><span class="line">          <span class="attribute">onFilterChange</span>=<span class="value">&#123;nextFilter</span> =&gt;</span> dispatch(setVisibilityFilter(nextFilter))&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    )</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">App.propTypes = &#123;</span><br><span class="line">  visibleTodos: PropTypes.arrayOf(PropTypes.shape(&#123;</span><br><span class="line">    text: PropTypes.string.isRequired,</span><br><span class="line">    completed: PropTypes.bool.isRequired</span><br><span class="line">  &#125;)),</span><br><span class="line">  visibilityFilter: PropTypes.oneOf([</span><br><span class="line">    <span class="string">'SHOW_ALL'</span>,</span><br><span class="line">    <span class="string">'SHOW_COMPLETED'</span>,</span><br><span class="line">    <span class="string">'SHOW_ACTIVE'</span></span><br><span class="line">  ]).isRequired</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectTodos</span>(<span class="params">todos, filter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (filter) &#123;</span><br><span class="line">    <span class="keyword">case</span> VisibilityFilters.SHOW_ALL:</span><br><span class="line">      <span class="keyword">return</span> todos;</span><br><span class="line">    <span class="keyword">case</span> VisibilityFilters.SHOW_COMPLETED:</span><br><span class="line">      <span class="keyword">return</span> todos.filter(todo =&gt; todo.completed);</span><br><span class="line">    <span class="keyword">case</span> VisibilityFilters.SHOW_ACTIVE:</span><br><span class="line">      <span class="keyword">return</span> todos.filter(todo =&gt; !todo.completed);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„ state æ˜¯ Connect çš„ç»„ä»¶çš„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">select</span>(<span class="params">state</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    visibleTodos: selectTodos(state.todos, state.visibilityFilter),</span><br><span class="line">    visibilityFilter: state.visibilityFilter</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(select)(App);</span><br></pre></td></tr></table></figure></p>
<p>ä»–ä» react-redux è·å– connect è¿æ¥ç»„ä»¶ï¼Œé€šè¿‡ <code>connect(select)(App)</code> è¿æ¥ store å’Œ App å®¹å™¨ç»„ä»¶ã€‚<br>select æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»–èƒ½æ¥æ”¶åˆ°ä¸€ä¸ª state å‚æ•°ï¼Œè¿™ä¸ªå°±æ˜¯ store é‡Œé¢çš„ stateï¼Œç„¶åé€šè¿‡è¿™ä¸ªå‡½æ•°çš„å¤„ç†ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒæŠŠå¯¹è±¡é‡Œé¢çš„å‚æ•°ä»¥å±æ€§ä¼ é€ç»™ Appï¼Œä»¥åŠé™„å¸¦ä¸€ä¸ª dispatchã€‚<br>æ‰€ä»¥åœ¨ App é‡Œé¢å¯ä»¥ï¼š<br><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; dispatch, visibleTodos, visibilityFilter &#125; = <span class="keyword">this</span>.props;</span><br></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ App é€šè¿‡ connect çš„åˆ° state å’Œ dispatchï¼ŒæŠŠ state ä¼ é€’ç»™å­ç»„ä»¶ã€‚<br>dispatch è¿™ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ª action å‚æ•°ï¼Œç„¶åå°±ä¼šæ‰§è¡Œ reducer é‡Œé¢çš„æ“ä½œã€‚<br>æ¯”å¦‚ï¼š<br><figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">text =&gt;</span><br><span class="line">  dispatch<span class="list">(<span class="keyword">addTodo</span><span class="list">(<span class="keyword">text</span>)</span>)</span></span><br></pre></td></tr></table></figure></p>
<p><code>addTodo(text)</code>ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯åœ¨ action é‡Œé¢çš„åˆ°çš„ï¼Œå¯ä»¥çœ‹ action çš„ä»£ç ï¼Œä»–å…¶å®è¿”å›ä¸€ä¸ª action å¯¹è±¡ï¼Œæ‰€ä»¥å…¶å®å°±æ˜¯<code>dispatch(action)</code> ã€‚</p>
<h2 id="action-1">action</h2><p><code>app/actions/index.js</code><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_TODO = <span class="string">'ADD_TODO'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> COMPLETE_TODO = <span class="string">'COMPLETE_TODO'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SET_VISIBILITY_FILTER = <span class="string">'SET_VISIBILITY_FILTER'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> VisibilityFilters = &#123;</span><br><span class="line">  SHOW_ALL: <span class="string">'SHOW_ALL'</span>,</span><br><span class="line">  SHOW_COMPLETED: <span class="string">'SHOW_COMPLETED'</span>,</span><br><span class="line">  SHOW_ACTIVE: <span class="string">'SHOW_ACTIVE'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addTodo</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: ADD_TODO,</span><br><span class="line">    text</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">completeTodo</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: COMPLETE_TODO,</span><br><span class="line">    index</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">setVisibilityFilter</span>(<span class="params">filter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: SET_VISIBILITY_FILTER,</span><br><span class="line">    filter</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨å£°æ˜æ¯ä¸€ä¸ªè¿”å› action å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¤´éƒ¨å£°æ˜è¿™ä¸ª action çš„ typeï¼Œä»¥ä¾¿å¥½ç»„ç»‡ç®¡ç†ã€‚<br>æ¯ä¸ªå‡½æ•°éƒ½ä¼šè¿”å›ä¸€ä¸ª action å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨ å®¹å™¨ç»„ä»¶é‡Œé¢ è°ƒç”¨<br><figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">text =&gt;</span><br><span class="line">  dispatch<span class="list">(<span class="keyword">addTodo</span><span class="list">(<span class="keyword">text</span>)</span>)</span></span><br></pre></td></tr></table></figure></p>
<p>å°±æ˜¯è°ƒç”¨<code>dispatch(action)</code> ã€‚</p>
<h2 id="reducer-1">reducer</h2><p><code>app/reducers/visibilityFilter.js</code><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  SET_VISIBILITY_FILTER,</span><br><span class="line">  VisibilityFilters</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'../actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; SHOW_ALL &#125; = VisibilityFilters;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visibilityFilter</span>(<span class="params">state = SHOW_ALL, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> SET_VISIBILITY_FILTER:</span><br><span class="line">      <span class="keyword">return</span> action.filter;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> visibilityFilter;</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œæˆ‘ä»¬ä» actions è·å¾—å„ä¸ª type çš„å‚æ•°ï¼Œä»¥ä¾¿å’Œ action åšå¥½æ˜ å°„å¯¹åº”ã€‚<br>æ•´ä¸ªå‡½æ•°å…¶å®å°±æ˜¯æ‰§è¡Œ switchï¼Œæ ¹æ®ä¸åŒçš„ action.typeï¼Œè¿”å›ä¸åŒçš„å¯¹è±¡çŠ¶æ€ã€‚<br>ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦ type å¾ˆå¤šï¼Œæ¯”å¦‚é™¤äº† visibilityFilterï¼Œè¿˜æœ‰ todosï¼Œéš¾é“è¦å†™ä¸€ä¸ªé•¿é•¿çš„switchï¼Œå½“ç„¶ä¸ã€‚<br>redux æä¾›ä¸€ä¸ª combineReducers è¾…åŠ©å‡½æ•°ï¼ŒæŠŠä¸€ä¸ªç”±å¤šä¸ªä¸åŒ reducer å‡½æ•°ä½œä¸º value çš„ objectï¼Œåˆå¹¶æˆä¸€ä¸ªæœ€ç»ˆçš„ reducer å‡½æ•°ï¼Œç„¶åå°±å¯ä»¥å¯¹è¿™ä¸ª reducer è°ƒç”¨ createStoreã€‚<br>æˆ‘ä»¬æŠŠä¸åŒçš„ reducer æ”¾åœ¨ä¸åŒæ–‡ä»¶ä¸‹ã€‚<br><code>app/reducers/todo.js</code><br><figure class="highlight pf"><table><tr><td class="code"><pre><span class="line">import &#123;</span><br><span class="line">  ADD_TODO,</span><br><span class="line">  COMPLETE_TODO</span><br><span class="line">&#125; <span class="keyword">from</span> '../actions';</span><br><span class="line"></span><br><span class="line">function todos(<span class="keyword">state</span> = [], action) &#123;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case ADD_TODO:</span><br><span class="line">      return [</span><br><span class="line">        ...<span class="keyword">state</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          text: action.text,</span><br><span class="line">          completed: false</span><br><span class="line">        &#125;</span><br><span class="line">      ];</span><br><span class="line">    case COMPLETE_TODO:</span><br><span class="line">      return [</span><br><span class="line">        ...<span class="keyword">state</span>.slice(<span class="number">0</span>, action.index),</span><br><span class="line">        Object.assign(&#123;&#125;, <span class="keyword">state</span>[action.index], &#123;</span><br><span class="line">          completed: true</span><br><span class="line">        &#125;),</span><br><span class="line">        ...<span class="keyword">state</span>.slice(action.index + <span class="number">1</span>)</span><br><span class="line">      ];</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      return <span class="keyword">state</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> todos;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åé€šè¿‡ä¸€ä¸ª index.js æŠŠä»–ä»¬åˆå¹¶ã€‚<br><code>app/reducers/index.js</code><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> todos <span class="keyword">from</span> <span class="string">'./todos'</span>;</span><br><span class="line"><span class="keyword">import</span> visibilityFilter <span class="keyword">from</span> <span class="string">'./visibilityFilter'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rootReducer = combineReducers(&#123;</span><br><span class="line">  todos,</span><br><span class="line">  visibilityFilter</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> rootReducer;</span><br></pre></td></tr></table></figure></p>
<h2 id="å±•ç¤ºç»„ä»¶">å±•ç¤ºç»„ä»¶</h2><p><code>app/components/AddTodo/index.jsx</code><br><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span>, <span class="type">PropTypes</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"><span class="keyword">import</span> &#123; findDOMNode &#125; from <span class="symbol">'react</span>-dom';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">AddTodo</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input <span class="class"><span class="keyword">type</span>=</span><span class="symbol">'tex</span>t' ref=<span class="symbol">'inpu</span>t' /&gt;</span><br><span class="line">        &lt;button onClick=&#123; e =&gt; <span class="keyword">this</span>.handleClick(e) &#125;&gt;</span><br><span class="line">          <span class="type">Add</span></span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClick(e) &#123;</span><br><span class="line">    const inputNode = findDOMNode(<span class="keyword">this</span>.refs.input);</span><br><span class="line">    const text = inputNode.value.trim();</span><br><span class="line">    <span class="keyword">this</span>.props.onAddClick(text);</span><br><span class="line">    inputNode.value = '';</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">AddTodo</span>.propTypes = &#123;</span><br><span class="line">  onAddClick: <span class="type">PropTypes</span>.func.isRequired</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><code>app/components/Todo/index.jsx</code><br><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span>, <span class="type">PropTypes</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Todo</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; onClick, completed, text &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;li</span><br><span class="line">        onClick=&#123;onClick&#125;</span><br><span class="line">        style=&#123;&#123;</span><br><span class="line">          textDecoration: completed ? <span class="symbol">'line</span>-through' : <span class="symbol">'non</span>e',</span><br><span class="line">          cursor: completed ? <span class="symbol">'defaul</span>t' : <span class="symbol">'pointe</span>r'</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;text&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Todo</span>.propTypes = &#123;</span><br><span class="line">  onClick: <span class="type">PropTypes</span>.func.isRequired,</span><br><span class="line">  text: <span class="type">PropTypes</span>.string.isRequired,</span><br><span class="line">  completed: <span class="type">PropTypes</span>.bool.isRequired</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><code>app/components/TodoList/index.jsx</code><br><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span>, <span class="type">PropTypes</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"><span class="keyword">import</span> <span class="type">Todo</span> from '../<span class="type">Todo</span>';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoList</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">this</span>.props.todos.map((todo, index) =&gt;</span><br><span class="line">            &lt;<span class="type">Todo</span></span><br><span class="line">              &#123;...todo&#125;</span><br><span class="line">              onClick=&#123;() =&gt; <span class="keyword">this</span>.props.onTodoClick(index)&#125;</span><br><span class="line">              key=&#123;index&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">TodoList</span>.propTypes = &#123;</span><br><span class="line">  onTodoClick: <span class="type">PropTypes</span>.func.isRequired,</span><br><span class="line">  todos: <span class="type">PropTypes</span>.arrayOf(<span class="type">PropTypes</span>.shape(&#123;</span><br><span class="line">    text: <span class="type">PropTypes</span>.string.isRequired,</span><br><span class="line">    completed: <span class="type">PropTypes</span>.bool.isRequired</span><br><span class="line">  &#125;).isRequired).isRequired</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><code>app/components/Footer/index.jsx</code><br><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span>, <span class="type">PropTypes</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Footer</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  renderFilter(filter, name) &#123;</span><br><span class="line">    <span class="keyword">if</span>(filter == <span class="keyword">this</span>.props.filter) &#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;a</span><br><span class="line">        href=<span class="string">"#"</span></span><br><span class="line">        onClick=&#123;e =&gt; &#123;</span><br><span class="line">          e.preventDefault();</span><br><span class="line">          <span class="keyword">this</span>.props.onFilterChange(filter);</span><br><span class="line">        &#125;&#125;&gt;</span><br><span class="line">        &#123;name&#125;</span><br><span class="line">      &lt;/a&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        <span class="type">SHOW</span></span><br><span class="line">        &#123;' '&#125;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderFilter(<span class="symbol">'SHOW_AL</span>L', <span class="symbol">'Al</span>l')&#125;</span><br><span class="line">        &#123;', '&#125;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderFilter(<span class="symbol">'SHOW_COMPLETE</span>D', <span class="symbol">'Complete</span>d')&#125;</span><br><span class="line">        &#123;', '&#125;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderFilter(<span class="symbol">'SHOW_ACTIV</span>E', <span class="symbol">'Activ</span>e')&#125;</span><br><span class="line">        .</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Footer</span>.propTypes = &#123;</span><br><span class="line">  onFilterChange: <span class="type">PropTypes</span>.func.isRequired,</span><br><span class="line">  filter: <span class="type">PropTypes</span>.oneOf([</span><br><span class="line">    <span class="symbol">'SHOW_AL</span>L',</span><br><span class="line">    <span class="symbol">'SHOW_COMPLETE</span>D',</span><br><span class="line">    <span class="symbol">'SHOW_ACTIV</span>E'</span><br><span class="line">  ]).isRequired</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œæ‰€æœ‰çš„å±•ç¤ºç»„ä»¶éœ€è¦çš„ state å’Œ æ•°æ®ï¼Œéƒ½ä»å±æ€§ä¸­è·å–çš„ï¼Œæ‰€æœ‰çš„æ“ä½œï¼Œéƒ½æ˜¯é€šè¿‡å®¹å™¨ç»„ä»¶ç»™çš„å›è°ƒå‡½æ•°æ¥æ“ä½œçš„ã€‚<br>ä»–ä»¬å°½å¯èƒ½åœ°ä¸æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œåšæ— çŠ¶æ€ç»„ä»¶ã€‚</p>
<h1 id="end">end</h1><p>å…³äº redux çš„ç”¨æ³•ï¼Œè¿™åªæ˜¯åŸºç¡€å…¥é—¨çš„éƒ¨åˆ†ï¼Œè¿˜æœ‰çš„å¤šçš„æåŸºæ“ä½œï¼Œæ¯”å¦‚å¼‚æ­¥æ•°æ®æµã€Middlewareã€å’Œ router é…åˆã€‚<br>æ•¬è¯·æœŸå¾…ï½ï½ï½ï½<br>ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶</p>
]]></content>
    <summary type="html">
    <![CDATA[<p><img src="/img/redux.jpeg" alt="redux"></p>
<h1 id="Tip">Tip</h1><p>å‰ç«¯æŠ€æœ¯çœŸæ˜¯æ—¥æ–°æœˆå¼‚ï¼Œæå®Œ React ä¸æ­é…ä¸ªæ•°æ®æµéƒ½ä¸å¥½æ„æ€äº†ã€‚<br>æ»¡æ€€æœŸå¾…çš„å¿ƒå»ç¿»äº†ç¿» fluxï¼Œç®€ç›´è¢«å®˜æ–¹é‚£æ„è¯†æµçš„æ–‡æ¡£æŠ˜æœäº†]]>
    </summary>
    
      <category term="JavaScript" scheme="http://qiutc.me/tags/JavaScript/"/>
    
      <category term="React" scheme="http://qiutc.me/tags/React/"/>
    
      <category term="redux" scheme="http://qiutc.me/tags/redux/"/>
    
      <category term="React" scheme="http://qiutc.me/categories/React/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[è°ˆè°ˆ react-router]]></title>
    <link href="http://qiutc.me/post/%E8%B0%88%E8%B0%88-react-router.html"/>
    <id>http://qiutc.me/post/è°ˆè°ˆ-react-router.html</id>
    <published>2015-12-11T01:33:12.000Z</published>
    <updated>2016-05-10T03:53:14.000Z</updated>
    <content type="html"><![CDATA[<h1 id="è°ˆè°ˆ">è°ˆè°ˆ</h1><p>æœ€è¿‘ä½¿ç”¨çš„ React + webpack æ¥å¼€å‘é¡¹ç›®ï¼Œæ„Ÿè§‰ç¡®å®æ˜¯çˆ½çš„é£èµ·ï¼Œç„¶è€Œæ€»æ„Ÿè§‰è¿˜æ˜¯å°‘äº†ç‚¹ä»€ä¹ˆã€‚ğŸ˜«<br>ğŸ˜å¯¹ï¼Œæ˜¯å¤šé¡µé¢ï¼Œæ¯æ¬¡è¯·æ±‚é¡µé¢è¿˜è¦åç«¯è·¯ç”±ç»™ä½ ï¼ŸğŸ˜„å¤šä¸çˆ½å•Šï¼Œè¯•è¯• react-router ï¼Œç®€ç›´æŒæ§ä¸€åˆ‡çš„æ„Ÿè§‰ï¼Œåªå¼€æ”¾ä¸€ä¸ªé¡µé¢è·¯ç”±æ¥å£ï¼Œå…¶ä»–å…¨ç»™æ•°æ®æ¥å£å°±ğŸ‘Œäº†ï¼ŒğŸ˜‚å¯ä»¥å’Œåç«¯å“¥å“¥è¯´æ‹œæ‹œäº†ã€‚<br>ğŸ‘‹ğŸ‘‹ğŸ‘‹ğŸ‘‹ğŸ‘‹ğŸ‘‹ğŸ‘‹ğŸ‘‹ğŸ‘‹ğŸ‘‹ğŸ‘‹ å•ªå•ªå•ªå•ªå•ªï½</p>
<p><img src="/img/react-router.png" alt="react-router"></p>
<h1 id="æ¦‚è¿°">æ¦‚è¿°</h1><p>å…ˆè´´ä¸Šå®˜æ–¹æ–‡æ¡£ <a href="https://github.com/rackt/react-router/tree/master/docs" target="_blank" rel="external">https://github.com/rackt/react-router/tree/master/docs</a>.<br>å¯¹äº†è¿™é‡Œè¿˜æœ‰ä¸€ä»½ä¸­æ–‡æ–‡æ¡£ï¼ˆä¸è¿‡ä¸æ˜¯å¾ˆå…¨ï¼‰<a href="http://react-guide.github.io/react-router-cn/" target="_blank" rel="external">http://react-guide.github.io/react-router-cn/</a>.<br>react-router æ˜¯ React çš„å®Œæ•´å‰ç«¯è·¯ç”±è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«åœ¨åšä¸€ä¸ª spa åº”ç”¨çš„æ—¶å€™ï¼Œä»–èƒ½å®ç° url å’Œ è§†å›¾ui çš„åŒæ­¥ï¼Œå¹¶ä¸”æ”¯æŒåç«¯æ¸²æŸ“ï¼Œå¼‚æ­¥æŒ‰éœ€åŠ è½½ç­‰ç­‰ğŸ˜„ã€‚<br>ç”±äº react-router æ–‡æ¡£çš„å¤šå˜ï¼Œè¿™é‡Œçš„ä¾‹å­ä»¥å½“å‰ç‰ˆæœ¬ 1.0.1 ä¸ºå‡†ã€‚ï¼ˆ1.0ä¹‹å‰æ–‡æ¡£æ¯ä¸€ä¸ªç‰ˆæœ¬çš„å˜åŠ¨éƒ½å¾ˆå¤§ï¼Œç´¢å¤šäº†éƒ½æ˜¯æ³ªï¼‰</p>
<h1 id="æµè§ˆå™¨æ”¯æŒ">æµè§ˆå™¨æ”¯æŒ</h1><p>æ‰€æœ‰æ”¯æŒ React çš„æµè§ˆå™¨ã€‚<br>å€¡è®®ï¼å»ºè®®å¤§å®¶ä¹ŸåŠè¯´èº«è¾¹çš„äººç”¨<strong><em>ç°ä»£åŒ–</em></strong>æµè§ˆå™¨ï¼Œå…³çˆ±å‰ç«¯å¼€å‘è€…ã€‚</p>
<h1 id="å®‰è£…">å®‰è£…</h1><figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">npm</span> install react-router<span class="property">@latest</span></span><br></pre></td></tr></table></figure>
<p>åŒæ—¶ï¼Œreact-router æ˜¯åŸºäº history å¼€å‘çš„ï¼Œè¿™é‡Œä½ éœ€è¦å®‰è£… historyã€‚<br>æ³¨æ„ react-router å½“å‰ç‰ˆæœ¬ 1.0.1 ä¾èµ–çš„æ˜¯ history 1.13.1 è¯·ä¸è¦å®‰è£…æœ€æ–°ç‰ˆã€‚<br>ä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆçŸ¥é“ï¼Œè¢«å‘æƒ¨äº†ï¼›æœ‰åŒå­¦é—®ï¼Œé‚£æ²¡æœ‰åŠæ³•ç”¨ history çš„æœ€æ–°ç‰ˆæœ¬å˜›ï¼Ÿæ¯•ç«Ÿè¿™åªæ˜¯æš‚ç¼“ä¹‹è®¡ï¼Œè§£å†³æ–¹æ¡ˆè¿˜æ˜¯æœ‰çš„ï¼Œé‚£å°±æ˜¯ç­‰ react-router ä½œè€…è§£å†³å’¯ ğŸ˜‚ã€‚<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">npm install history@<span class="number">1.13</span><span class="number">.1</span></span><br></pre></td></tr></table></figure></p>
<p>æ„å»ºå·¥å…·çš„è¯ï¼Œæˆ‘ä¾ç„¶å»ºè®®æ˜¯ webpack ï¼Œ React å’Œ webpack æ˜¯ä¸€å¯¹å¥½å…„å¼Ÿã€‚<br><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> webpack</span><br></pre></td></tr></table></figure></p>
<p>webpackçš„ä½¿ç”¨æ–¹æ³•å¯ä»¥çœ‹æˆ‘çš„å‰ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://qiutc.me/post/webpack-best-practice-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-%E9%83%A8%E7%BD%B2%E7%94%9F%E4%BA%A7.html">webpack-best-practice-æœ€ä½³å®è·µ-éƒ¨ç½²ç”Ÿäº§</a></li>
<li><a href="http://qiutc.me/post/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8webpack%E2%80%94webpack-howto.html">å¦‚ä½•ä½¿ç”¨webpackâ€”webpack-howto</a><br>(æ±‚èµï¼ï¼ï¼)</li>
</ul>
<h1 id="å°ä¾‹å­">å°ä¾‹å­</h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">// åŠ è½½ä¾èµ–åŒ…ï¼Œè¿™æ˜¯ es6 çš„è¯­æ³•ï¼ˆæˆ‘å¥½å•°å—¦ï¼‰ã€‚</span><br><span class="line">import React from 'react'</span><br><span class="line">import &#123; render &#125; from 'react-dom'</span><br><span class="line">// è¿™é‡Œä» react-router å¼•å…¥äº†ä¸‰ä¸ªç»„ä»¶ï¼Œå…ˆä¸è§£é‡Šã€‚</span><br><span class="line">import &#123; Router, Route, Link &#125; from 'react-router'</span><br><span class="line"></span><br><span class="line">const App = React.createClass(&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">h1</span>&gt;</span>App<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">Link</span> <span class="attribute">to</span>=<span class="value">"/about"</span>&gt;</span>About<span class="tag">&lt;/<span class="title">Link</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">Link</span> <span class="attribute">to</span>=<span class="value">"/inbox"</span>&gt;</span>Inbox<span class="tag">&lt;/<span class="title">Link</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line">        &#123;this.props.children&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const Inbox = React.createClass(&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        Inbox</span><br><span class="line">      <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const About = React.createClass(&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        About</span><br><span class="line">      <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">render((</span><br><span class="line">  <span class="tag">&lt;<span class="title">Router</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">Route</span> <span class="attribute">path</span>=<span class="value">"/"</span> <span class="attribute">component</span>=<span class="value">&#123;App&#125;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">Route</span> <span class="attribute">path</span>=<span class="value">"about"</span> <span class="attribute">component</span>=<span class="value">&#123;About&#125;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">Route</span> <span class="attribute">path</span>=<span class="value">"inbox"</span> <span class="attribute">component</span>=<span class="value">&#123;Inbox&#125;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">Route</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">Router</span>&gt;</span></span><br><span class="line">), document.getElementById('root'));</span><br></pre></td></tr></table></figure>
<p>æˆ‘å°±å·ä¸ªæ‡’æŠŠå®˜æ–¹æ–‡æ¡£çš„demoç›´æ¥copyäº†ã€‚<br>ç›´æ¥å…ˆæ¥çœ‹ render ä¸‹é¢çš„å†…å®¹ï¼Œè¿™é‡Œæ˜¯ç”¨ jsx è¯­æ³•ã€‚ æœ€å¤–å±‚ç»„ä»¶æ˜¯ Routerï¼ˆå¯ä»¥æŠŠä»–çœ‹ä½œæ˜¯react-routeræä¾›çš„æœ€å¤–å±‚å®¹å™¨ï¼‰ , ä¸‹ä¸€å±‚æ˜¯ Routeï¼Œè¿™ä¸ªæ˜¯è·¯ç”±ç»„ä»¶ã€‚å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š<br><code>/ ---&gt; &lt;App /&gt;</code><br><code>/about ---&gt; &lt;App&gt;&lt;About /&gt;&lt;/App&gt;</code><br><code>/inbox ---&gt; &lt;App&gt;&lt;Inbox /&gt;&lt;/App&gt;</code><br>path å¯¹åº”è·¯å¾„ï¼Œcomponent å¯¹åº”å½“å‰è·¯å¾„æ¸²æŸ“çš„ç»„ä»¶ã€‚<br>Route é‡Œé¢çš„ Route è¡¨ç¤ºåœ¨çˆ¶ç»„ä»¶è·¯ç”±çš„ path è·¯å¾„ä¸‹é¢çš„ä¸€çº§ path å¯¹åº”çš„è·¯ç”±ï¼Œè¿™é‡Œçš„è·¯ç”±æ˜¯çˆ¶å­åµŒå¥—ï¼Œå¯¹åº”çš„ç»„ä»¶ä¹ŸåŒæ ·æ˜¯çˆ¶å­åµŒå¥—çš„ã€‚<br>å¦‚æœæ˜¯å¤šçº§åµŒå¥—ä¹ŸåŒæ ·å¦‚æ­¤ã€‚</p>
<h1 id="ä¸æƒ³ç”¨_jsx_æ¥å†™ï¼Œæ¢ä¸ªæ–¹å¼å§ï½">ä¸æƒ³ç”¨ jsx æ¥å†™ï¼Œæ¢ä¸ªæ–¹å¼å§ï½</h1><p>ä»¥ä¸Šä¾‹å­å¯ä»¥æ”¹å†™æˆï¼š<br><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">const routerConfig = [</span><br><span class="line">  &#123;</span><br><span class="line"><span class="label">    path:</span> <span class="string">'/'</span>,</span><br><span class="line"><span class="label">    component:</span> App,</span><br><span class="line"><span class="label">    childrenRoutes:</span> [</span><br><span class="line">      &#123; <span class="string">path:</span> <span class="string">'about'</span>, <span class="string">component:</span> About &#125;,</span><br><span class="line">      &#123; <span class="string">path:</span> <span class="string">'inbox'</span>, <span class="string">component:</span> Inbox &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line">render((</span><br><span class="line">  &lt;Router routes=&#123;routeConfig&#125; /&gt;</span><br><span class="line">), document.getElementById(<span class="string">'root'</span>));</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œçš„ç»“æ„å°±æ›´æ¸…æ™°äº†ï¼Œæˆ‘æ˜¯æ¯”è¾ƒå–œæ¬¢è¿™ç§æ–¹å¼ã€‚</p>
<h1 id="é»˜è®¤çš„è·¯ç”±">é»˜è®¤çš„è·¯ç”±</h1><p>æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œ/ å¯¹äºçš„ç»„ä»¶æ˜¯ App , å¦‚æœ App åªæ˜¯æ¸²æŸ“äº†ä¸€ä¸ªå¯¼èˆªæ¡ï¼Œå´æ²¡æœ‰è‡ªç»„ä»¶ï¼Œé‚£æ‰“å¼€ æ¯”å¦‚ qiutc.me/ çš„æ—¶å€™ä¸æ˜¯å°±æ²¡æœ‰å†…å®¹äº†å—ã€‚<br>æŠŠä¸Šé¢ä¾‹å­æ”¹ä¸€ä¸‹<br><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">// æ·»åŠ ç»„ä»¶ Index</span></span><br><span class="line">const Index = React.createClass(&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        Index</span><br><span class="line">        Index</span><br><span class="line">        Index</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ä¿®æ”¹é…ç½®</span></span><br><span class="line">const routerConfig = [</span><br><span class="line">  &#123;</span><br><span class="line"><span class="label">    path:</span> <span class="string">'/'</span>,</span><br><span class="line"><span class="label">    component:</span> App,</span><br><span class="line"><span class="label">    indexRoute:</span> &#123; <span class="string">component:</span> Index &#125;,</span><br><span class="line"><span class="label">    childrenRoutes:</span> [</span><br><span class="line">      &#123; <span class="string">path:</span> <span class="string">'about'</span>, <span class="string">component:</span> About &#125;,</span><br><span class="line">      &#123; <span class="string">path:</span> <span class="string">'inbox'</span>, <span class="string">component:</span> Inbox &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡ŒåŠ äº†ä¸€ä¸ª <code>indexRoute</code> ï¼Œè¡¨ç¤ºä»–åœ¨æ²¡æœ‰åŒ¹é…å­è·¯ç”±çš„æ—¶å€™ï¼Œåœ¨ / è·¯ç”±ä¸‹æ¸²æŸ“é»˜è®¤çš„å­ç»„ä»¶ Indexã€‚<br>è·¯ç”±ç»„ä»¶åµŒå¥—ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚ï¼š<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="rules">&#123; <span class="rule"><span class="attribute">path</span>:<span class="value"> <span class="string">'about'</span>, component: About, indexRoute: &#123;component: AboutIndex</span></span></span>&#125; &#125;,</span><br></pre></td></tr></table></figure></p>
<p>ä»¥æ­¤ç±»æ¨ã€‚</p>
<h1 id="404_NotFound">404  NotFound</h1><p>å¦‚æœæˆ‘ä»¬æ‰“å¼€äº†ä¸€ä¸ªæ²¡æœ‰è®¾ç½®è·¯ç”±çš„é“¾æ¥ï¼Œå°±å¿…ç„¶éœ€è¦ä¸€ä¸ªå‹å¥½çš„ 404 é¡µé¢ã€‚é…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">// æ·»åŠ  404 ç»„ä»¶</span></span><br><span class="line">const NotFound = React.createClass(&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        <span class="number">404</span></span><br><span class="line">        NotFound</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ä¿®æ”¹é…ç½®</span></span><br><span class="line">const routerConfig = [</span><br><span class="line">  &#123;</span><br><span class="line"><span class="label">    path:</span> <span class="string">'/'</span>,</span><br><span class="line"><span class="label">    component:</span> App,</span><br><span class="line"><span class="label">    indexRoute:</span> &#123; <span class="string">component:</span> Index &#125;,</span><br><span class="line"><span class="label">    childrenRoutes:</span> [</span><br><span class="line">      &#123; <span class="string">path:</span> <span class="string">'about'</span>, <span class="string">component:</span> About &#125;,</span><br><span class="line">      &#123; <span class="string">path:</span> <span class="string">'inbox'</span>, <span class="string">component:</span> Inbox &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line"><span class="label">    path:</span> <span class="string">'*'</span>,</span><br><span class="line"><span class="label">    component:</span> NotFound,</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æ­¤ç®€å•ã€‚</p>
<h1 id="ç»å¯¹è·¯å¾„ä¸é‡å®šå‘">ç»å¯¹è·¯å¾„ä¸é‡å®šå‘</h1><figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">const routerConfig = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    component: App,</span><br><span class="line">    indexRoute: &#123; component: Index &#125;,</span><br><span class="line">    childrenRoutes: [</span><br><span class="line">      &#123; path: <span class="string">'about'</span>, component: About &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'inbox'</span>,</span><br><span class="line">        component: Inbox,</span><br><span class="line">        childrenRoutes: [</span><br><span class="line">          &#123;</span><br><span class="line">            path: <span class="string">'message/:id'</span>,</span><br><span class="line">            component: Message,</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'*'</span>,</span><br><span class="line">    component: NotFound,</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬è®¿é—® /inbox/message/1 å¯¹äºæ¸²æŸ“ Message ç»„ä»¶ï¼Œè¿™ä¸ªé“¾æ¥å¤ªé•¿äº†ï¼Œæˆ‘ä»¬æƒ³ç›´æ¥ /message/1 é‚£æ€ä¹ˆåŠï¼Œæ”¹è·¯ç”±ç»“æ„ï¼Ÿå¤ªéº»çƒ¦äº†ï¼ç»å¯¹è·¯å¾„å¯ä»¥å¸®ä½ åšåˆ°è¿™ä¸ªã€‚<br>æŠŠ <code>path: &#39;message/:id&#39;,</code> æ”¹ä¸º <code>path: &#39;/message/:id&#39;,</code> å°±å¥½äº†ã€‚<br>ç­‰ç­‰å¦‚æœç”¨æˆ·ä¹‹å‰æ”¶è—çš„é“¾æ¥æ˜¯ /inbox/message/1 ï¼Œé‚£ä¸æ˜¯å°±æ‰“ä¸å¼€äº†å˜›ï¼Œå’Œåç«¯è·¯ç”±ä¸€æ ·ï¼Œreact-router ä¹Ÿæœ‰é‡å®šå‘ï¼šredirect<br><figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">const routerConfig = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    component: App,</span><br><span class="line">    indexRoute: &#123; component: Index &#125;,</span><br><span class="line">    childrenRoutes: [</span><br><span class="line">      &#123; path: <span class="string">'about'</span>, component: About &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'inbox'</span>,</span><br><span class="line">        component: Inbox,</span><br><span class="line">        childrenRoutes: [</span><br><span class="line">          &#123;</span><br><span class="line">            path: <span class="string">'/message/:id'</span>,</span><br><span class="line">            component: Message,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            path: <span class="string">'message/:id'</span>,</span><br><span class="line">            onEnter: function (nextState, replaceState) &#123;</span><br><span class="line">              replaceState(null, <span class="string">'/messages/'</span> + nextState.params.id);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'*'</span>,</span><br><span class="line">    component: NotFound,</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure></p>
<h2 id="onEnter_æ–¹æ³•è¡¨ç¤ºè¿›å…¥è¿™ä¸ªè·¯ç”±å‰æ‰§è¡Œçš„æ–¹æ³•ï¼Œåœ¨è¿›å…¥_/inbox/messages/:id_çš„å‰ï¼Œæ‰§è¡Œ">onEnter æ–¹æ³•è¡¨ç¤ºè¿›å…¥è¿™ä¸ªè·¯ç”±å‰æ‰§è¡Œçš„æ–¹æ³•ï¼Œåœ¨è¿›å…¥ /inbox/messages/:id çš„å‰ï¼Œæ‰§è¡Œ</h2><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">(nextState, replaceState)</span> </span>&#123;</span><br><span class="line">  replaceState(<span class="literal">null</span>, <span class="string">'/messages/'</span> + nextState.params.id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>nextState</code>è¡¨ç¤ºè¦è¿›å…¥çš„ä¸‹ä¸€ä¸ªè·¯ç”±ï¼Œè¿™é‡Œå°±æ˜¯ /inbox/messages/:id ï¼Œ<code>replaceState</code> è¡¨ç¤ºæ›¿æ¢è·¯ç”±çŠ¶æ€çš„æ–¹æ³•ï¼ŒæŠŠ /inbox/messages/:id æ›¿æ¢æˆ /messages/:idï¼Œç„¶åå°±å¯ä»¥é‡å®šå‘åˆ° /messages/:idã€‚</p>
<h2 id="åŒæ ·çš„ä¹Ÿæœ‰_onLeave_è¿™ä¸ªæ–¹æ³•">åŒæ ·çš„ä¹Ÿæœ‰ onLeave è¿™ä¸ªæ–¹æ³•</h2><p>è¡¨ç¤ºåœ¨ç¦»å¼€è·¯ç”±å‰æ‰§è¡Œã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>å½“ç„¶å¦‚æœä½ ç”¨çš„æ˜¯ jsx è¯­æ³•ï¼Œæœ‰æ›´ç®€å•çš„ç»„ä»¶å¯ä»¥å®ç°ï¼š<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">import &#123; Redirect &#125; from 'react-router'</span><br><span class="line"></span><br><span class="line">React.render((</span><br><span class="line">  <span class="tag">&lt;<span class="title">Router</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">Route</span> <span class="attribute">path</span>=<span class="value">"/"</span> <span class="attribute">component</span>=<span class="value">&#123;App&#125;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">IndexRoute</span> <span class="attribute">component</span>=<span class="value">&#123;Index&#125;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">Route</span> <span class="attribute">path</span>=<span class="value">"about"</span> <span class="attribute">component</span>=<span class="value">&#123;About&#125;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">Route</span> <span class="attribute">path</span>=<span class="value">"inbox"</span> <span class="attribute">component</span>=<span class="value">&#123;Inbox&#125;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">Route</span> <span class="attribute">path</span>=<span class="value">"/messages/:id"</span> <span class="attribute">component</span>=<span class="value">&#123;Message&#125;</span> /&gt;</span></span><br><span class="line">        &#123;/* è·³è½¬ /inbox/messages/:id åˆ° /messages/:id */&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="title">Redirect</span> <span class="attribute">from</span>=<span class="value">"messages/:id"</span> <span class="attribute">to</span>=<span class="value">"/messages/:id"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">Route</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">Route</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">Router</span>&gt;</span></span><br><span class="line">), document.getElementById('root'))</span><br></pre></td></tr></table></figure></p>
<h1 id="è·¯å¾„åŒ¹é…åŸç†">è·¯å¾„åŒ¹é…åŸç†</h1><h2 id="åµŒå¥—å…³ç³»">åµŒå¥—å…³ç³»</h2><blockquote>
<p>React Router ä½¿ç”¨è·¯ç”±åµŒå¥—çš„æ¦‚å¿µæ¥è®©ä½ å®šä¹‰ view çš„åµŒå¥—é›†åˆï¼Œå½“ä¸€ä¸ªç»™å®šçš„ URL è¢«è°ƒç”¨æ—¶ï¼Œæ•´ä¸ªé›†åˆä¸­ï¼ˆå‘½ä¸­çš„éƒ¨åˆ†ï¼‰éƒ½ä¼šè¢«æ¸²æŸ“ã€‚åµŒå¥—è·¯ç”±è¢«æè¿°æˆä¸€ç§æ ‘å½¢ç»“æ„ã€‚React Router ä¼šæ·±åº¦ä¼˜å…ˆéå†æ•´ä¸ªç†ç”±é…ç½®æ¥å¯»æ‰¾ä¸€ä¸ªä¸ç»™å®šçš„ URL ç›¸åŒ¹é…çš„è·¯ç”±ã€‚</p>
</blockquote>
<p>ç®€å•æ¥è®²ï¼Œå°±æ˜¯è¯´ï¼ŒåŒ¹é…çš„æ—¶å€™ä¼šå…ˆåŒ¹é…åˆ°å¤–å±‚è·¯å¾„ï¼Œç„¶åä¾æ¬¡éå†åˆ°å†…å±‚ã€‚<br>æ¯”å¦‚ /inbox/messages/:id ä¼šå…ˆåŒ¹é… /ï¼Œæ¸²æŸ“ / å¯¹åº”çš„ç»„ä»¶ Appï¼Œç„¶åå†åˆ° / çš„ä¸‹ä¸€å±‚å¯»æ‰¾ /inbox ï¼ŒåŒæ ·æ¸²æŸ“ /inbox å¯¹åº”çš„ç»„ä»¶ Inboxï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°åˆ° message/:idã€‚</p>
<p>tipï¼šä½¿ç”¨ç»å¯¹è·¯å¾„å¯ä»¥å¿½ç•¥åµŒå¥—å…³ç³»ï¼Œå¦‚ä¸Šé¢ä¾‹å­ã€‚</p>
<h2 id="è·¯å¾„è¯­æ³•">è·¯å¾„è¯­æ³•</h2><p>è·¯ç”±è·¯å¾„æ˜¯åŒ¹é…ä¸€ä¸ªï¼ˆæˆ–ä¸€éƒ¨åˆ†ï¼‰URL çš„ ä¸€ä¸ªå­—ç¬¦ä¸²æ¨¡å¼ã€‚å¤§éƒ¨åˆ†çš„è·¯ç”±è·¯å¾„éƒ½å¯ä»¥ç›´æ¥æŒ‰ç…§å­—é¢é‡ç†è§£ï¼Œé™¤äº†ä»¥ä¸‹å‡ ä¸ªç‰¹æ®Šçš„ç¬¦å·ï¼š</p>
<ul>
<li>/:paramName â€“ åŒ¹é…ä¸€æ®µä½äº /ã€? æˆ– # ä¹‹åçš„ URLã€‚ å‘½ä¸­çš„éƒ¨åˆ†å°†è¢«ä½œä¸ºä¸€ä¸ªå‚æ•°</li>
<li>(/) â€“ åœ¨å®ƒå†…éƒ¨çš„å†…å®¹è¢«è®¤ä¸ºæ˜¯å¯é€‰çš„</li>
<li><p>/* â€“ åŒ¹é…ä»»æ„å­—ç¬¦ï¼ˆéè´ªå©ªçš„ï¼‰ç›´åˆ°å‘½ä¸­ä¸‹ä¸€ä¸ªå­—ç¬¦æˆ–è€…æ•´ä¸ª URL çš„æœ«å°¾ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª splat å‚æ•°</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line">&lt;<span class="constant">Route </span>path=<span class="string">"/hello/:name"</span>&gt;         <span class="regexp">//</span> åŒ¹é… /hello/michael å’Œ /hello/ryan</span><br><span class="line">&lt;<span class="constant">Route </span>path=<span class="string">"/hello(/:name)"</span>&gt;       <span class="regexp">//</span> åŒ¹é… /hello, <span class="regexp">/hello/michael</span> å’Œ /hello/ryan</span><br><span class="line">&lt;<span class="constant">Route </span>path=<span class="string">"/files/*.*"</span>&gt;           <span class="regexp">//</span> åŒ¹é… /files/hello.jpg å’Œ /files/path/to/hello.jpg</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="ä¼˜å…ˆçº§">ä¼˜å…ˆçº§</h2><p>æœ€åï¼Œè·¯ç”±ç®—æ³•ä¼šæ ¹æ®å®šä¹‰çš„é¡ºåºè‡ªé¡¶å‘ä¸‹åŒ¹é…è·¯ç”±ã€‚å› æ­¤ï¼Œå½“ä½ æ‹¥æœ‰ä¸¤ä¸ªå…„å¼Ÿè·¯ç”±èŠ‚ç‚¹é…ç½®æ—¶ï¼Œä½ å¿…é¡»ç¡®è®¤å‰ä¸€ä¸ªè·¯ç”±ä¸ä¼šåŒ¹é…åä¸€ä¸ªè·¯ç”±ä¸­çš„è·¯å¾„ã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">Route</span> <span class="attribute">path</span>=<span class="value">"/comments"</span> <span class="attribute">...</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">Redirect</span> <span class="attribute">from</span>=<span class="value">"/comments"</span> <span class="attribute">...</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>ç¬¬äºŒä¸ªæ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„ã€‚</p>
<h1 id="æ‹¿åˆ°å‚æ•°è·¯å¾„çš„">æ‹¿åˆ°å‚æ•°è·¯å¾„çš„</h1><p>æ¯”å¦‚ä¸Šé¢çš„ /messages/:id ï¼Œè¿™ä¸ªidå¯èƒ½æ˜¯æˆ‘ä»¬åœ¨ Message è·å–æ•°æ®æ—¶éœ€è¦çš„ idã€‚<br>ä»–ä¼šè¢«å½“åšä¸€ä¸ªå‚æ•°ä¼ ç»™ paramsï¼Œparmas ä¼šä¼ ç»™ Message ç»„ä»¶çš„ propsï¼š<br><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Message = React.createClass(&#123;</span><br><span class="line">    render: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;&#123; <span class="keyword">this</span>.props.params.id &#125;&lt;/div&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·å°±å¯ä»¥è·å–åˆ°äº†ã€‚</p>
<h1 id="history_é…ç½®">history é…ç½®</h1><p>React Router æ˜¯å»ºç«‹åœ¨ history ä¹‹ä¸Šçš„ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œä¸€ä¸ª history çŸ¥é“å¦‚ä½•å»ç›‘å¬æµè§ˆå™¨åœ°å€æ çš„å˜åŒ–ï¼Œ å¹¶è§£æè¿™ä¸ª URL è½¬åŒ–ä¸º location å¯¹è±¡ï¼Œ ç„¶å router ä½¿ç”¨å®ƒåŒ¹é…åˆ°è·¯ç”±ï¼Œæœ€åæ­£ç¡®åœ°æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ã€‚<br>å¸¸ç”¨çš„ history æœ‰ä¸‰ç§å½¢å¼ï¼Œ ä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ React Router å®ç°è‡ªå®šä¹‰çš„ historyã€‚</p>
<ul>
<li>createHashHistory</li>
<li>createBrowserHistory</li>
<li>createMemoryHistory</li>
</ul>
<h2 id="è¿™ä¸‰ä¸ªæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼š">è¿™ä¸‰ä¸ªæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼š</h2><h3 id="createHashHistory">createHashHistory</h3><p>è¿™æ˜¯ä¸€ä¸ªä½ ä¼šè·å–åˆ°çš„é»˜è®¤ history ï¼Œå¦‚æœä½ ä¸æŒ‡å®šæŸä¸ª history ã€‚å®ƒç”¨åˆ°çš„æ˜¯ URL ä¸­çš„ hashï¼ˆ#ï¼‰éƒ¨åˆ†å»åˆ›å»ºå½¢å¦‚ example.com/#/some/path çš„è·¯ç”±ã€‚<br>è¿™ä¸ª æ”¯æŒ ie8ï¼‹ çš„æµè§ˆå™¨ï¼Œä½†æ˜¯å› ä¸ºæ˜¯ hash å€¼ï¼Œæ‰€ä»¥ä¸æ¨èä½¿ç”¨ã€‚</p>
<h3 id="createBrowserHistory">createBrowserHistory</h3><p>Browser history æ˜¯ç”± React Router åˆ›å»ºæµè§ˆå™¨åº”ç”¨æ¨èçš„ historyã€‚å®ƒä½¿ç”¨ History API åœ¨æµè§ˆå™¨ä¸­è¢«åˆ›å»ºç”¨äºå¤„ç† URLï¼Œæ–°å»ºä¸€ä¸ªåƒè¿™æ ·çœŸå®çš„ URL example.com/some/pathã€‚</p>
<h3 id="Memoryhistory">Memoryhistory</h3><p>ä¸ä¼šåœ¨åœ°å€æ è¢«æ“ä½œæˆ–è¯»å–ã€‚</p>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createBrowserHistory, useBasename &#125; <span class="keyword">from</span> <span class="string">'history'</span>;</span><br><span class="line"><span class="keyword">const</span> historyConfig = useBasename(createHistory)(&#123;</span><br><span class="line">  basename: <span class="string">'/'</span>        <span class="comment">// æ ¹ç›®å½•å</span></span><br><span class="line">&#125;);</span><br><span class="line">...</span><br><span class="line">render((</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="title">Router</span> <span class="attribute">routes</span>=<span class="value">&#123;routeConfig&#125;</span> <span class="attribute">History</span>=<span class="value">&#123;historyConfig&#125;</span> /&gt;</span></span><br><span class="line">)</span>, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</span><br></pre></td></tr></table></figure>
<h1 id="Link&amp;IndexLink">Link&amp;IndexLink</h1><h2 id="Link">Link</h2><p>æˆ‘ä»¬åœ¨æœ€å¼€å¤´çœ‹åˆ°è¿™æ ·ä¸€ä¸ªä¸œè¥¿ï¼š<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">const App = React.createClass(&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">h1</span>&gt;</span>App<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">Link</span> <span class="attribute">to</span>=<span class="value">"/about"</span>&gt;</span>About<span class="tag">&lt;/<span class="title">Link</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">Link</span> <span class="attribute">to</span>=<span class="value">"/inbox"</span>&gt;</span>Inbox<span class="tag">&lt;/<span class="title">Link</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line">        &#123;this.props.children&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>Link ä¼šè¢«æ¸²æŸ“æˆ a ï¼Œto å…¶å®å°±æ˜¯ href ï¼Œ<br>ä½†æ˜¯ react-router ä¼šé˜»æ­¢é»˜è®¤è·³è½¬é¡µé¢ï¼Œè€Œæ”¹æˆ history è·¯ç”±çš„å˜æ¢ã€‚</p>
<p>å‚æ•°ï¼š</p>
<ul>
<li>to<br>åˆ‡æ¢åˆ°çš„è·¯ç”±åœ°å€</li>
<li>query<br>è·Ÿåœ¨ url çš„ query å‚æ•°ï¼Œæ¯”å¦‚<figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">query=<span class="expansion">&#123;&#123;<span class="symbol">q:</span> <span class="string">"que"</span>&#125;&#125;</span> å¯¹åº” <span class="string">`/example?a=que</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿™é‡Œçš„ query åŒæ ·å¯ä»¥åƒ params ä¼šè¢«ä¼ å…¥ä¸‹ä¸€ä¸ªè·¯ç”±ç»„ä»¶çš„ props</p>
<ul>
<li>hash<br>è·Ÿåœ¨ url çš„ hash å‚æ•°ï¼Œæ¯”å¦‚<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">hash=&#123;<span class="number">111</span>&#125; å¯¹åº” `/example<span class="preprocessor">#<span class="number">111</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿™é‡Œçš„ query åŒæ ·å¯ä»¥åƒ params ä¼šè¢«ä¼ å…¥ä¸‹ä¸€ä¸ªè·¯ç”±ç»„ä»¶çš„ props</p>
<ul>
<li><p>activeClassName<br>å½“å‰ url è·¯å¾„å¦‚æœå’Œ Link çš„ to åŒ¹é… è¿™ä¸ª Link å°±ä¼šæœ‰ä¸€ä¸ªå®šä¹‰çš„å±æ€§ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">åœ¨ /index ä¸‹</span><br><span class="line">&lt;<span class="constant">Link</span> to=<span class="string">"/index"</span> activeClassName=&#123;<span class="string">"active"</span>&#125; activeStyle=<span class="expansion">&#123;&#123;<span class="symbol">color:</span> <span class="string">'red'</span>&#125;&#125;</span> &gt;<span class="regexp">/&lt;/</span><span class="constant">Link</span>&gt;</span><br><span class="line">è¿™é‡Œæ¸²æŸ“å‡ºæ¥çš„ a æ ‡ç­¾ä¼šæœ‰ä¸€ä¸ªæ¿€æ´»çš„ active ç±»åï¼Œè¿˜ä¼šæœ‰ä¸€ä¸ªé¢œè‰² red</span><br><span class="line">&lt;<span class="constant">Link</span> to=<span class="string">"/about"</span> activeClassName=&#123;<span class="string">"active"</span>&#125; activeStyle=<span class="expansion">&#123;&#123;<span class="symbol">color:</span> <span class="string">'red'</span>&#125;&#125;</span> &gt;<span class="regexp">/&lt;/</span><span class="constant">Link</span>&gt;</span><br><span class="line">è¿™é‡Œæ¸²æŸ“å‡ºæ¥çš„ a æ ‡ç­¾å°±ä¸ä¼šæœ‰ä»¥ä¸Šå±æ€§</span><br></pre></td></tr></table></figure>
</li>
<li><p>activeStyle<br>åŒä¸Š</p>
</li>
<li>onClick<br>ç‚¹å‡»çš„æ—¶å€™æ‰§è¡Œçš„å‡½æ•°ï¼Œä¼šä¼ å…¥ä¸€ä¸ª e äº‹ä»¶å¯¹è±¡ï¼Œä½ å¯ä»¥ <code>e.stopPropagation()</code> é˜»æ­¢é»˜è®¤è·¯ç”±åˆ‡æ¢ã€‚</li>
</ul>
<h2 id="IndexLink">IndexLink</h2><p>åœ¨ä¸Šé¢æœ‰ä¸€ä¸ªé—®é¢˜å¦‚æœï¼š<br><figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">åœ¨ / ä¸‹ å’Œ /index</span><br><span class="line">&lt;<span class="constant">Link</span> to=<span class="string">"/"</span> activeClassName=&#123;<span class="string">"active"</span>&#125; activeStyle=<span class="expansion">&#123;&#123;<span class="symbol">color:</span> <span class="string">'red'</span>&#125;&#125;</span> &gt;<span class="regexp">/&lt;/</span><span class="constant">Link</span>&gt;</span><br><span class="line">è¿™ä¸ª <span class="constant">Link</span> æ¸²æŸ“å‡ºæ¥çš„ a æ ‡ç­¾éƒ½ä¼šæ¿€æ´» active å±æ€§ï¼Œå¹¶ä¸”ä¼šå¸¦ä¸Š <span class="symbol">color:</span> <span class="string">'red'</span></span><br><span class="line">å› ä¸º / å’Œ /index å’Œ ï¼ éƒ½æ˜¯åŒ¹é…çš„</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ—¶å€™å°±å¯ä»¥ç”¨:<br><figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">&lt;<span class="constant">IndexLink</span> to=<span class="string">"/"</span> activeClassName=&#123;<span class="string">"active"</span>&#125; activeStyle=<span class="expansion">&#123;&#123;<span class="symbol">color:</span> <span class="string">'red'</span>&#125;&#125;</span> &gt;<span class="regexp">/&lt;/</span><span class="constant">IndexLink</span>&gt;</span><br><span class="line">åªä¼šåœ¨ / ä¸‹å‘—æ¿€æ´»ï¼Œåœ¨ /index æˆ–è€…å…¶ä»–ä¸‹é¢ï¼Œä¸ä¼šè¢«æ¿€æ´»</span><br></pre></td></tr></table></figure></p>
<h1 id="æœªå®Œå¾…ç»­">æœªå®Œå¾…ç»­</h1><p>å…³äº <strong><em>æ ¹æ®è·¯ç”±æŒ‰éœ€å¼‚æ­¥åŠ è½½js</em></strong> å’Œ <strong><em>æœåŠ¡å™¨ç«¯æ¸²æŸ“è·¯ç”±è§†å›¾</em></strong> ä»¥åŠ <strong><em>react-routerçš„æ›´é«˜çº§ç”¨æ³•</em></strong> ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« æ¥æ¢è®¨ã€‚<br>æ¯•ç«Ÿå“¥ä¹Ÿéœ€è¦å»æ·±å…¥ç ”ç©¶ä¸€ä¸‹æ‰æ•¢çŒ®ä¸‘ã€‚ğŸ˜‚ğŸ˜‚ğŸ˜‚<br>ğŸ¶</p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="è°ˆè°ˆ">è°ˆè°ˆ</h1><p>æœ€è¿‘ä½¿ç”¨çš„ React + webpack æ¥å¼€å‘é¡¹ç›®ï¼Œæ„Ÿè§‰ç¡®å®æ˜¯çˆ½çš„é£èµ·ï¼Œç„¶è€Œæ€»æ„Ÿè§‰è¿˜æ˜¯å°‘äº†ç‚¹ä»€ä¹ˆã€‚ğŸ˜«<br>ğŸ˜å¯¹ï¼Œæ˜¯å¤šé¡µé¢ï¼Œæ¯æ¬¡è¯·æ±‚é¡µé¢è¿˜è¦åç«¯è·¯ç”±ç»™ä½ ï¼ŸğŸ˜„å¤šä¸çˆ½å•Šï¼Œè¯•è¯• react-router ï¼Œç®€ç›´æŒæ§ä¸€åˆ‡çš„æ„Ÿè§‰ï¼Œåªå¼€æ”¾]]>
    </summary>
    
      <category term="JavaScript" scheme="http://qiutc.me/tags/JavaScript/"/>
    
      <category term="React" scheme="http://qiutc.me/tags/React/"/>
    
      <category term="react-router" scheme="http://qiutc.me/tags/react-router/"/>
    
      <category term="React" scheme="http://qiutc.me/categories/React/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[webpack-best-practice-æœ€ä½³å®è·µ-éƒ¨ç½²ç”Ÿäº§]]></title>
    <link href="http://qiutc.me/post/webpack-best-practice-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-%E9%83%A8%E7%BD%B2%E7%94%9F%E4%BA%A7.html"/>
    <id>http://qiutc.me/post/webpack-best-practice-æœ€ä½³å®è·µ-éƒ¨ç½²ç”Ÿäº§.html</id>
    <published>2015-12-02T02:56:39.000Z</published>
    <updated>2016-05-10T03:51:59.000Z</updated>
    <content type="html"><![CDATA[<p><img src="/img/webpack.png" alt="webpack"></p>
<h1 id="tip">tip</h1><p>webpackçš„å…¥é—¨ç¯‡å¯ä»¥çœ‹æˆ‘çš„è¿™ä¸€ç‰‡åšæ–‡ã€‚<br><a href="http://qiutc.me/post/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8webpack%E2%80%94webpack-howto.html">ã€Šå¦‚ä½•ä½¿ç”¨webpackâ€”webpack-howtoã€‹</a>.</p>
<h1 id="å‰è¨€">å‰è¨€</h1><p>æœ€è¿‘ä¸€æ®µæ—¶é—´åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†webpackå’ŒReactæ¥å¼€å‘ï¼Œæ€»ä¹‹æ¥è¯´ä¹Ÿæ˜¯é‡åˆ°äº†è®¸å¤šå‘ï¼Œwebpackæ¯•ç«Ÿè¿˜æ˜¯æ¯”è¾ƒæ–°çš„æŠ€æœ¯ï¼Œè€Œä¸”ä¹Ÿå¾ˆéš¾æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ„å»ºæ¡ˆä¾‹æ¥é€‚åº”æ‰€æœ‰çš„é¡¹ç›®ï¼Œæ€»ä¹‹ï¼Œåœ¨çœ‹äº†è®¸å¤šé¡¹ç›®demoå’Œå®˜æ–¹æ–‡æ¡£ä»¥åŠå®˜æ–¹æ¨èçš„tutorialsä¹‹åï¼Œä¹Ÿç®—æ˜¯è‡ªå·±æ€»ç»“å‡ºçš„ä¸€å¥—æœ€ä½³å®è·µå§ã€‚</p>
<h2 id="ä»£ç ">ä»£ç </h2><p>ä»£ç å¯ä»¥åœ¨æˆ‘çš„<a href="https://github.com/TongchengQiu/webpack-best-practice" target="_blank" rel="external">Github</a>ä¸Šã€‚<br><a href="https://github.com/TongchengQiu/webpack-best-practice" target="_blank" rel="external">å¯ä»¥æˆ³è¿™é‡Œï½ï½</a>ã€‚</p>
<h1 id="package-json_å‘½ä»¤é…ç½®">package.json å‘½ä»¤é…ç½®</h1><p>æ—¢ç„¶æ˜¯éœ€è¦ç”¨åˆ°çš„æ˜¯å®é™…é¡¹ç›®çš„æ„å»ºï¼Œé‚£ä¹ˆå¿…ç„¶å°±è¦è€ƒè™‘å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸‹çš„é…ç½®é¡¹äº†ï¼š<br><figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"webpack --progress --colors --watch"</span>,</span><br><span class="line">    <span class="string">"watch"</span>: <span class="string">"webpack-dev-server --hot --progress --colors"</span>,</span><br><span class="line">    <span class="string">"dist"</span>: <span class="string">"NODE_ENV=production webpack --progress --colors"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥åœ¨ç›®å½•ä¸‹æ‰§è¡Œ <code>npm run build</code> , <code>npm run watch</code> , <code>npm run dist</code><br>è§£é‡Šä¸€ä¸‹:</p>
<ul>
<li>build æ˜¯åœ¨æˆ‘ä»¬å¼€å‘ç¯å¢ƒä¸‹æ‰§è¡Œçš„æ„å»ºå‘½ä»¤;</li>
<li>watch ä¹Ÿæ˜¯åœ¨å¼€å‘ç¯å¢ƒä¸‹æ‰§è¡Œï¼Œä½†æ˜¯åŠ äº†webpackæœ€å¼ºå¤§çš„åŠŸèƒ½ï¼ï¼æ­å»ºé™æ€æœåŠ¡å™¨å’Œçƒ­æ’æ‹”åŠŸèƒ½ï¼ˆè¿™ä¸ªåœ¨åé¢ä»‹ç»;</li>
<li>dist æ˜¯é¡¹ç›®åœ¨è¦éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶æ‰“åŒ…å‘å¸ƒã€‚</li>
</ul>
<p>dist é‡Œé¢çš„<code>NODE_ENV=production</code>æ˜¯å£°æ˜äº†å½“å‰æ‰§è¡Œçš„ç¯å¢ƒæ˜¯productionï¼ç”Ÿäº§ç¯å¢ƒ<br><br><br>åé¢è·Ÿç€å‡ ä¸ªå‘½ä»¤ï¼š</p>
<ul>
<li>â€“colors è¾“å‡ºçš„ç»“æœå¸¦å½©è‰²</li>
<li>â€“progress è¾“å‡ºè¿›åº¦æ˜¾ç¤º</li>
<li>â€“watch åŠ¨æ€å®æ—¶ç›‘æµ‹ä¾èµ–æ–‡ä»¶å˜åŒ–å¹¶ä¸”æ›´æ–°</li>
<li>â€“hot æ˜¯çƒ­æ’æ‹”</li>
<li>â€“display-error-details é”™è¯¯çš„æ—¶å€™æ˜¾ç¤ºæ›´å¤šè¯¦ç»†é”™è¯¯ä¿¡æ¯</li>
<li>â€“display-modules é»˜è®¤æƒ…å†µä¸‹ node_modules ä¸‹çš„æ¨¡å—ä¼šè¢«éšè—ï¼ŒåŠ ä¸Šè¿™ä¸ªå‚æ•°å¯ä»¥æ˜¾ç¤ºè¿™äº›è¢«éšè—çš„æ¨¡å—</li>
<li>-w åŠ¨æ€å®æ—¶ç›‘æµ‹ä¾èµ–æ–‡ä»¶å˜åŒ–å¹¶ä¸”æ›´æ–°</li>
<li>-d æä¾›sorcemap</li>
<li>-p å¯¹æ‰“åŒ…æ–‡ä»¶è¿›è¡Œå‹ç¼©</li>
</ul>
<h1 id="ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</h1><p>ç°åœ¨å‰ç«¯æ¨¡å—åŒ–çš„è¶‹åŠ¿å¯¼è‡´ç›®å½•ç»“æ„ä¹Ÿå‘ç”Ÿäº†å¾ˆå¤§çš„æ”¹å˜å’Œäº‰è®®ï¼Œè¿™åªæ˜¯æˆ‘è‡ªå·±ç”¨åˆ°çš„ä¸€ç§å½¢å¼ï¼Œå¯ä»¥å‚è€ƒã€‚<br><figure class="highlight gherkin"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ app                 <span class="comment">#å¼€å‘ç›®å½•</span></span><br><span class="line">|<span class="string">   â”œâ”€â”€assets           #å­˜æ”¾é™æ€èµ„æº</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   â”œâ”€â”€datas        #å­˜æ”¾æ•°æ® json æ–‡ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   â”œâ”€â”€images       #å­˜æ”¾å›¾ç‰‡èµ„æºæ–‡ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   â””â”€â”€styles       #å­˜æ”¾å…¨å±€sasså˜é‡æ–‡ä»¶å’Œresetæ–‡ä»¶</span><br><span class="line"></span>|<span class="string">   â”œâ”€â”€lib</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   â”œâ”€â”€components   #å­˜æ”¾æ•°æ® æ¨¡å—ç»„ä»¶ æ–‡ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span>|<span class="string">   â””â”€â”€Header</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span>|<span class="string">       â”œâ”€â”€Header.jsx</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span>|<span class="string">       â””â”€â”€Header.scss</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span>|<span class="string">       </span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   â””â”€â”€utils        #å­˜æ”¾utilså·¥å…·å‡½æ•°æ–‡ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   â””â”€â”€views</span><br><span class="line"></span>|<span class="string">       â”œâ”€â”€Index        #å…¥å£æ–‡ä»¶</span><br><span class="line"></span>|<span class="string">       </span>|<span class="string">   â”œâ”€â”€Index.html #htmlæ–‡ä»¶</span><br><span class="line"></span>|<span class="string">       </span>|<span class="string">   â”œâ”€â”€Index.jsx</span><br><span class="line"></span>|<span class="string">       </span>|<span class="string">   â””â”€â”€Index.scss</span><br><span class="line"></span>|<span class="string">       â””â”€â”€Index2</span><br><span class="line">â”œâ”€â”€ dist                #å‘å¸ƒç›®å½•</span><br><span class="line">â”œâ”€â”€ node_modules        #åŒ…æ–‡ä»¶å¤¹</span><br><span class="line">â”œâ”€â”€ .gitignore     </span><br><span class="line">â”œâ”€â”€ .jshintrc      </span><br><span class="line">â”œâ”€â”€ webpack.config.js   #webpacké…ç½®æ–‡ä»¶</span><br><span class="line">â””â”€â”€ package.json</span></span><br></pre></td></tr></table></figure></p>
<p>å…·ä½“å¯ä»¥åˆ°Githubä¸Šçœ‹demoã€‚</p>
<h1 id="webpack-config-js">webpack.config.js</h1><h2 id="å¼•å…¥åŒ…">å¼•å…¥åŒ…</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ¯‹åº¸ç½®ç–‘å§ã€‚</p>
<h2 id="åˆ¤æ–­æ˜¯å¦æ˜¯åœ¨å½“å‰ç”Ÿäº§ç¯å¢ƒ">åˆ¤æ–­æ˜¯å¦æ˜¯åœ¨å½“å‰ç”Ÿäº§ç¯å¢ƒ</h2><p>å®šä¹‰å‡½æ•°åˆ¤æ–­æ˜¯å¦æ˜¯åœ¨å½“å‰ç”Ÿäº§ç¯å¢ƒï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œä¸€ä½å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé…ç½®ä¸Šæœ‰ä¸€äº›åŒºåˆ«<br><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isProduction = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> process.env.NODE_ENV === <span class="string">'production'</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="å£°æ˜æ–‡ä»¶å¤¹">å£°æ˜æ–‡ä»¶å¤¹</h2><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰è¾“å‡ºæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="keyword">var</span> outputDir = <span class="string">'./dist'</span>;</span><br><span class="line"><span class="comment">// å®šä¹‰å¼€å‘æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="keyword">var</span> entryPath = <span class="string">'./app/views'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="å®šä¹‰æ’ä»¶">å®šä¹‰æ’ä»¶</h2><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">var plugins = [</span><br><span class="line">  <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">    name: <span class="string">'commons'</span>,</span><br><span class="line">    filename: <span class="string">'js/commons.js'</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</span><br><span class="line">    React: <span class="string">'react'</span>,</span><br><span class="line">    ReactDOM: <span class="string">'react-dom'</span>,</span><br><span class="line">    reqwest: <span class="string">'reqwest'</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">];</span><br><span class="line"><span class="keyword">if</span>( isProduction() ) &#123;</span><br><span class="line">  plugins.<span class="keyword">push</span>(</span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class="line">      test: <span class="regexp">/(\.jsx|\.js)$/</span>,</span><br><span class="line">      compress: &#123;</span><br><span class="line">        warnings: <span class="keyword">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>CommonsChunkPlugin æ’ä»¶å¯ä»¥æ‰“åŒ…æ‰€æœ‰æ–‡ä»¶çš„å…±ç”¨éƒ¨åˆ†ç”Ÿäº§ä¸€ä¸ªcommons.jsæ–‡ä»¶ã€‚</li>
<li>ProvidePlugin æ’ä»¶å¯ä»¥å®šä¹‰ä¸€ä¸ªå…±ç”¨çš„å…¥å£ï¼Œæ¯”å¦‚ ä¸‹é¢åŠ çš„ React ,ä»–ä¼šåœ¨æ¯ä¸ªæ–‡ä»¶è‡ªåŠ¨requireäº†reactï¼Œæ‰€ä»¥ä½ åœ¨æ–‡ä»¶ä¸­ä¸éœ€è¦ require(â€˜reactâ€™)ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Reactã€‚</li>
<li>å¦‚æœæ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œåˆ™åŠ å…¥æ’ä»¶ UglifyJsPlugin ï¼Œæ‰§è¡Œä»£ç å‹ç¼©ï¼Œå¹¶ä¸”å»é™¤ warningsã€‚</li>
</ol>
<h2 id="è‡ªåŠ¨éå†å¤šæ–‡ä»¶å…¥å£">è‡ªåŠ¨éå†å¤šæ–‡ä»¶å…¥å£</h2><figure class="highlight tcl"><table><tr><td class="code"><pre><span class="line">var entris = fs.readdirSync(entryPath).reduce(function (o, <span class="keyword">filename</span>) &#123;</span><br><span class="line">    !/\./.test(<span class="keyword">filename</span>) &amp;&amp;</span><br><span class="line">    (o[<span class="keyword">filename</span>] = <span class="string">'./'</span> + path.<span class="keyword">join</span>(entryPath, <span class="keyword">filename</span>, <span class="keyword">filename</span> + <span class="string">'.jsx'</span>));</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">  &#125;, &#123;&#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°ä¼šè‡ªåŠ¨éå†å¼€å‘çš„å…¥å£æ–‡ä»¶å¤¹ä¸‹é¢çš„æ–‡ä»¶ï¼Œç„¶åä¸€ä¸€ç”Ÿäº§å…¥å£å¹¶ä¸”è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ï¼å…¥å£ã€‚</p>
<h2 id="å¦‚æœåœ¨è¿™ä¸€æ­¥ä¸éœ€è¦å¤šé¡µé¢å¤šå…¥å£">å¦‚æœåœ¨è¿™ä¸€æ­¥ä¸éœ€è¦å¤šé¡µé¢å¤šå…¥å£</h2><p>é‚£ä¹ˆå¯ä»¥ä½¿ç”¨<a href="https://www.npmjs.com/package/html-webpack-plugin" target="_blank" rel="external">html-webpack-plugin</a>æ’ä»¶ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨ä¸ºå…¥å£ç”Ÿæˆä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line">plugins.push(<span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">  <span class="attribute">title</span>: <span class="string">'index'</span>,</span><br><span class="line">  <span class="attribute">filename</span>: outputDir+<span class="string">'/index.html'</span>,  <span class="comment">#ç”Ÿæˆhtmlçš„ä½ç½®</span></span><br><span class="line">  <span class="attribute">inject</span>: <span class="string">'body'</span>,                     <span class="comment">#æ’å…¥scriptåœ¨bodyæ ‡ç­¾é‡Œ</span></span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure></p>
<p>entry å°±å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªå…¥å£å°±å¤Ÿäº†</p>
<h2 id="configçš„å…·ä½“é…ç½®">configçš„å…·ä½“é…ç½®</h2><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line">  target: <span class="string">'web'</span>,</span><br><span class="line">  cache: <span class="literal">true</span>,</span><br><span class="line">  entry: entris,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: outputDir,</span><br><span class="line">    filename: <span class="string">'js/[name].bundle.js'</span>,</span><br><span class="line">    publicPath: isProduction()? <span class="string">'http://******'</span> : <span class="string">'http://localhost:3000'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="module"><span class="keyword">module</span>: </span>&#123;</span><br><span class="line">    loaders: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/(\.jsx|\.js)$/</span>,</span><br><span class="line">        loaders: [<span class="string">'babel?presets[]=es2015&amp;presets[]=react'</span>],</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        loaders: [<span class="string">'style'</span>, <span class="string">'css?root='</span>+__dirname, <span class="string">'resolve-url'</span>, <span class="string">'sass'</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.json$/</span>,</span><br><span class="line">        loader: <span class="string">'json'</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(jpe?g|png|gif|svg)$/</span>,</span><br><span class="line">        loader: <span class="string">'url?limit=1024&amp;name=img/[name].[ext]'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(woff2?|otf|eot|svg|ttf)$/i</span>,</span><br><span class="line">        loader: <span class="string">'url?name=fonts/[name].[ext]'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.html$/</span>,</span><br><span class="line">        loader: <span class="string">'file?name=views/[name].[ext]'</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: plugins,</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'jsx'</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  devtool: isProduction()?<span class="literal">null</span>:<span class="string">'source-map'</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ¥ä¸€ä¸€è¯´æ˜ï¼š</p>
<h3 id="å¯¹äºoutput">å¯¹äºoutput</h3><p>pathå’Œfilenameéƒ½ä¸ç”¨å¤šè¯´äº†ï¼Œpathæ˜¯ç”Ÿæˆæ–‡ä»¶çš„å­˜æ”¾ç›®å½•ï¼Œfilenameæ˜¯æ–‡ä»¶åï¼Œå½“ç„¶å¯ä»¥åœ¨å‰é¢åŠ ä¸Šç›®å½•ä½ç½®ã€‚<br>è¿™é‡Œæé†’ä¸€ä¸‹ï¼Œfilename çš„ç›¸å¯¹è·¯å¾„å°±æ˜¯ pathäº†ï¼Œå¹¶ä¸”ä¸‹é¢ é™æ€æ–‡ä»¶ç”Ÿæˆçš„filenameä¹Ÿæ˜¯ç›¸å¯¹äºè¿™é‡Œçš„pathçš„ï¼Œæ¯”å¦‚ image å’Œ htmlã€‚<br>publicPath çš„è¯æ˜¯æ‰“åŒ…çš„æ—¶å€™ç”Ÿæˆçš„æ–‡ä»¶é“¾æ¥ï¼Œæ¯”å¦‚ å›¾ç‰‡ èµ„æºï¼Œ<br>å¦‚æœæ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒå½“ç„¶æ˜¯ç”¨æœåŠ¡å™¨åœ°å€ï¼Œå¦‚æœæ˜¯å¼€å‘ç¯å¢ƒå°±æ˜¯ç”¨æœ¬åœ°é™æ€æœåŠ¡å™¨çš„åœ°å€ã€‚</p>
<h3 id="module_loaders_æ‰“åŒ…åŠ è½½çš„å¤„ç†å™¨">module loaders æ‰“åŒ…åŠ è½½çš„å¤„ç†å™¨</h3><p>å¯ä»¥ä¸ç”¨å¤¹ loaderäº† æ¯”å¦‚ åŸæ¥ url-loader  ç°åœ¨ url</p>
<h4 id="js/jsx">js/jsx</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">test</span>:<span class="value"> /(\.jsx|\.js)$/,</span><br><span class="line">  loaders: [<span class="string">'babel?presets[]=es2015&amp;presets[]=react'</span>],</span><br><span class="line">  exclude: /node_modules/</span><br><span class="line"></span></span></span>&#125;,</span><br></pre></td></tr></table></figure>
<p>å¯¹äºjsæ–‡ä»¶å’Œjsxæ–‡ä»¶ç”¨äº†babelæ¥å¤„ç†ï¼Œè¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œæœ€æ–°ç‰ˆæœ¬çš„babelå§es2015å’Œreactçš„å¤„ç†åˆ†å¼€äº†ï¼Œæ‰€æœ‰è¦è¿™ä¹ˆå†™ã€‚</p>
<h3 id="å¤„ç†scssæ–‡ä»¶">å¤„ç†scssæ–‡ä»¶</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">test</span>:<span class="value"> /\.scss$/,</span><br><span class="line">  loaders: [<span class="string">'style'</span>, <span class="string">'css?root='</span>+__dirname, <span class="string">'resolve-url'</span>, <span class="string">'sass'</span>]</span><br><span class="line"></span></span></span>&#125;,</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œç”¨äº†sassã€cssã€styleçš„loaderè¿™ä¸ç”¨å¤šè¯´äº†ã€‚<br>é‚£ä¹ˆrootå’Œresolve-urlæ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Œrootæ˜¯å®šä¹‰äº†scssæ–‡ä»¶é‡Œé¢å£°æ˜çš„urlåœ°å€æ˜¯ç›¸å¯¹äºæ ¹ç›®å½•çš„ï¼Œç„¶åresolve-urlå›å»ç›¸å¯¹è§£æè¿™ä¸ªè·¯å¾„ï¼Œè€Œä¸ç”¨requireå»è·å–ï¼Œæ¯”å¦‚<br><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background</span><span class="value">: <span class="function">url</span>(<span class="string">'./assets/images/webpack.png'</span>);</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·å°±å¯ä»¥åŠ è½½åˆ°<code>./assets/images/webpack.png</code>è¿™ä¸ªæ–‡ä»¶ï¼Œè€Œä¸ç”¨ä½¿ç”¨ç›¸å¯¹è·¯å¾„å’Œrequire</p>
<h3 id="å¤„ç†jsonæ–‡ä»¶">å¤„ç†jsonæ–‡ä»¶</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">test</span>:<span class="value"> /\.json$/,</span><br><span class="line">  loader: <span class="string">'json'</span>,</span><br><span class="line"></span></span></span>&#125;,</span><br></pre></td></tr></table></figure>
<p>å¯¹äºjsonæ–‡ä»¶ï¼Œå¯ä»¥è‡ªåŠ¨è¯·æ±‚è¯¥æ¨¡å—å¹¶ä¸”æ‰“åŒ…ã€‚</p>
<h3 id="å¤„ç†_å›¾ç‰‡_å­—ä½“_èµ„æºæ–‡ä»¶">å¤„ç† å›¾ç‰‡ å­—ä½“ èµ„æºæ–‡ä»¶</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">test</span>:<span class="value"> /\.(jpe?g|png|gif|svg)$/,</span><br><span class="line">  loader: <span class="string">'url?limit=1024&amp;name=img/[name].[ext]'</span></span><br><span class="line"></span></span></span>&#125;,</span><br><span class="line"><span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">test</span>:<span class="value"> /\.(woff2?|otf|eot|svg|ttf)$/i,</span><br><span class="line">  loader: <span class="string">'url?name=fonts/[name].[ext]'</span></span><br><span class="line"></span></span></span>&#125;,</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä½¿ç”¨äº† url è¿™ä¸ªloaderï¼Œä½†æ˜¯urlä¾èµ– file-loaderï¼Œå®ƒæ˜¯å¯¹file-loaderçš„äºŒæ¬¡å°è£…ã€‚<br>åœ¨è¯·æ±‚å›¾ç‰‡çš„æ—¶å€™å¦‚æœæ–‡ä»¶å¤§å°å°äº 1024k ï¼Œä½¿ç”¨å†…è” base64 URLsï¼Œå¦åˆ™ä¼šè‡ªåŠ¨å¯¼å…¥åˆ°nameæ‰€å£°æ˜çš„ç›®å½•ï¼Œè¿™é‡Œæ˜¯ç›¸å¯¹ä¹‹å‰å£°æ˜çš„ outputDir è·¯å¾„ã€‚<br>å­—ä½“èµ„æºä¹Ÿæ˜¯ä¸€æ ·ã€‚</p>
<h3 id="å¤„ç†htmlæ–‡ä»¶">å¤„ç†htmlæ–‡ä»¶</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">test</span>:<span class="value"> /\.html$/,</span><br><span class="line">  loader: <span class="string">'file?name=views/[name].[ext]'</span></span><br><span class="line"></span></span></span>&#125;,</span><br></pre></td></tr></table></figure>
<p>åœ¨å¤šé¡µé¢çš„é¡¹ç›®ä¸­éœ€è¦ï¼Œå¯ä»¥è‡ªåŠ¨å§htmlæ–‡ä»¶å¯¼å…¥åˆ°æŒ‡å®šçš„ç”Ÿäº§æ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<h2 id="resolve">resolve</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="tag">resolve</span>: <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">extensions</span>:<span class="value"> [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'jsx'</span>],</span><br><span class="line"></span></span></span>&#125;,</span><br></pre></td></tr></table></figure>
<p>æ˜¯å¯ä»¥å¿½ç•¥çš„æ–‡ä»¶åç¼€åï¼Œæ¯”å¦‚å¯ä»¥ç›´æ¥<code>require(&#39;Header&#39;);</code>è€Œä¸ç”¨åŠ .jsxã€‚</p>
<h2 id="devtool">devtool</h2><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="string">devtool:</span> isProduction()?null:<span class="string">'source-map'</span>,</span><br></pre></td></tr></table></figure>
<p>è§„å®šäº†åœ¨å¼€å‘ç¯å¢ƒä¸‹æ‰ä½¿ç”¨ source-mapã€‚</p>
<h1 id="ç–‘é—®">ç–‘é—®</h1><p>ç›®å‰ä¸ºæ­¢ï¼Œå¯¹äºå¤šé¡µé¢é¡¹ç›®è¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ¡ˆå»æ„å»ºè‡ªåŠ¨åŒ–ã€‚</p>
]]></content>
    <summary type="html">
    <![CDATA[<p><img src="/img/webpack.png" alt="webpack"></p>
<h1 id="tip">tip</h1><p>webpackçš„å…¥é—¨ç¯‡å¯ä»¥çœ‹æˆ‘çš„è¿™ä¸€ç‰‡åšæ–‡ã€‚<br><a href="http://qiutc.me/post/%E5%A6%82%]]>
    </summary>
    
      <category term="JavaScript" scheme="http://qiutc.me/tags/JavaScript/"/>
    
      <category term="webpack" scheme="http://qiutc.me/tags/webpack/"/>
    
      <category term="webpack" scheme="http://qiutc.me/categories/webpack/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[[RN]2.æ ·å¼style--React-Native learning notes]]></title>
    <link href="http://qiutc.me/post/RN-2-%E6%A0%B7%E5%BC%8Fstyle-React-Native-learning-notes.html"/>
    <id>http://qiutc.me/post/RN-2-æ ·å¼style-React-Native-learning-notes.html</id>
    <published>2015-11-22T08:27:03.000Z</published>
    <updated>2016-05-10T03:51:29.000Z</updated>
    <content type="html"><![CDATA[<h1 id="tip:">tip:</h1><p>è¿™æ˜¯ä¸€ç¯‡å­¦ä¹  React-Native for Android çš„å­¦ä¹ ç¬”è®°ï¼Œä¸»è¦ä¸Šå…¶å®æ˜¯çœ‹å®˜æ–¹çš„æ–‡æ¡£æ¥è‡ªå·±å­¦ä¹  RNï¼Œç›®å‰çš„ä¸»è¦æ˜¯å­¦ä¹ androidçš„å¼€å‘ã€‚</p>
<p>ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜</p>
<h1 id="React-Native_for_Android_æ ·å¼çš„ä½¿ç”¨ã€‚">React-Native for Android æ ·å¼çš„ä½¿ç”¨ã€‚</h1><p>React-Native ç¼–å†™çš„åº”ç”¨çš„æ ·å¼ä¸æ˜¯é cssæ¥å®ç°çš„ï¼Œè€Œæ˜¯ä¾èµ–javascriptæ¥ä¸ºä½ çš„åº”ç”¨æ¥æ·»åŠ æ ·å¼ï¼Œå…ˆä¸è®¨è®ºè¿™æ ·åšçš„å¥½å¤„ä¸åå¤„ï¼Œå› ä¸ºè¿™ä¸ªå®ç°æ–¹æ³•æœ¬èº«å°±å­˜åœ¨ç€å¾ˆå¤šäº‰è®®ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ä»–çš„æ ·å¼çš„è¯­æ³•å’Œç‰¹æ€§ã€‚</p>
<h1 id="å£°æ˜æ ·å¼:">å£°æ˜æ ·å¼:</h1><figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> styles = StyleSheet.create(&#123;</span><br><span class="line">     <span class="keyword">base</span>: &#123;</span><br><span class="line">          width: <span class="number">38</span>,</span><br><span class="line">          height: <span class="number">38</span>,</span><br><span class="line">     &#125;,</span><br><span class="line">     background: &#123;</span><br><span class="line">          backgroundColor: <span class="string">'#222222'</span>,</span><br><span class="line">     &#125;,</span><br><span class="line">     active: &#123;</span><br><span class="line">          borderWidth: <span class="number">2</span>,</span><br><span class="line">          borderColor: â€˜<span class="preprocessor">#ff00ff',</span></span><br><span class="line">     &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ä»è¯­æ³•æ¥çœ‹ï¼šè°ƒç”¨äº†React-Nativeçš„ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªå¯¹è±¡ç”Ÿæˆstyleï¼Œå¦‚æœä½ å†™è¿‡Reactå°±åº”è¯¥å¾ˆç†Ÿæ‚‰è¿™ç§å†™æ³•ï¼Œå’ŒReactçš„React.createCladd()è¯­æ³•æ˜¯ä¸€æ ·çš„ï¼Œä¼ å…¥å¯¹è±¡çš„keyå°±ç›¸å½“äºç±»åï¼ˆæˆ‘æ˜¯è¿™ä¹ˆç†è§£ï¼‰ï¼Œæ¯ä¸ªç±»ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥é…ç½®å„ç§æ ·å¼å‚æ•°ï¼Œæ€»ä½“æ¥è¯´å’ŒCSSçš„å†™æ³•å·®ä¸å¤šï¼Œå·®åˆ«ä¸ŠæŠŠCSSçš„å‘½ååˆâ€œ-â€è¿å­—ç¬¦æ”¹æˆé©¼å³°å†™æ³•ï¼Œç„¶åé•¿åº¦ä¸ç”¨åŠ å•ä½â€œpxâ€ï¼Œå­—ç¬¦ä¸²æ¯”å¦‚è‰²å€¼éœ€è¦åŠ å¼•å·å†™æˆå­—ç¬¦ä¸²ã€‚<br>å…¶å®ä¹Ÿæ˜¯å’ŒReactçš„è¡Œå†…æ ·å¼å†™æ³•çš„è¯­æ³•ä¸€æ ·ã€‚</p>
<h1 id="æ ·å¼çš„ä½¿ç”¨:">æ ·å¼çš„ä½¿ç”¨:</h1><p>æ‰€æœ‰çš„æ ¸å¿ƒç»„ä»¶éƒ½æ”¯æŒæ ·å¼å±æ€§<br><code>&lt;View style={style.base} /&gt;</code><br>å½“ä½ éœ€è¦è®¾ç½®å¤šä¸ªå±æ€§ç±»çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„<br><code>&lt;View style={[style.base,style.backgroundColor]} /&gt;</code><br>åœ¨ä¸¤ä¸ªæ ·å¼åˆå†²çªçš„æƒ…å†µä¸‹ï¼Œä»¥å³è¾¹çš„å€¼ä¼˜å…ˆï¼Œæœ‰äº›æƒ…å†µä¸‹å¯ä»¥åŠ ä¸€äº›æ¡ä»¶åˆ¤æ–­æ ·å¼æ˜¯å¦åŠ è½½ï¼Œæ¯”å¦‚ï¼Œ<br><code>&lt;View style={[style.base,this.state.active&amp;&amp;style.active]} /&gt;</code><br>ä½ ä¹Ÿå¯ä»¥åœ¨ç»„ä»¶ä¸­renderæ ·å¼ï¼Œç„¶è€Œè¿™ç§åšæ³•ä¸æ¨èï¼Œå…¶å®å°±åƒä¸€èˆ¬htmlé¡µé¢ä¸­è¡Œå†…æ ·å¼ä¸æ¨èä¸€æ ·ï¼Œ<br><figure class="highlight processing"><table><tr><td class="code"><pre><span class="line">&lt;View</span><br><span class="line">  style=&#123;[styles.base,&#123;<span class="variable">width</span>:<span class="keyword">this</span>.state.<span class="variable">width</span>, <span class="variable">height</span>:<span class="keyword">this</span>.state.<span class="variable">width</span>*<span class="keyword">this</span>.state.aspectRatio&#125;]&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="å¸ƒå±€_â€“_flexbox">å¸ƒå±€ â€“ flexbox</h1><p>React-Native é‡‡ç”¨flexboxå¸ƒå±€æ–¹å¼ï¼Œflexboxæ˜¯css3å¼•å…¥çš„å¸ƒå±€æ¨¡å‹ï¼ï¼å¼¹æ€§ç›’å­æ¨¡å‹ï¼Œæ—¨åœ¨é€šè¿‡å¼¹æ€§çš„æ–¹å¼å¯¹é½å’Œåˆ†å¸ƒå®¹å™¨ä¸­çš„itemï¼Œä½¿å…¶é€‚åº”ä¸åŒçš„å®½åº¦å’Œé«˜åº¦ã€‚<br>åœ¨ React-Native ä¸­çš„flexbox æ˜¯css3ä¸­flexboxçš„ä¸€ä¸ªå­é›†ï¼Œå¹¶ä¸æ”¯æŒæ‰€æœ‰çš„flexboxå±æ€§ã€‚<br>flexbox  å¸ƒå±€åˆ†ä¸ºflexbox container å’Œ flexbox item ï¼šå¦‚ä¸‹å›¾<br><img src="/img/RN_img_4.png" alt=""><br>flexbox æ˜¯ä¸€ä¸ªå±æ€§çš„é›†åˆï¼Œæœ‰äº›æ˜¯å±äºcontainerçš„æœ‰äº›æ¹¿å±äºitemçš„ã€‚<br>å¯ä»¥çœ‹ä¸‹é¢è¿™å¹…å›¾ï¼š<br><img src="/img/RN_img_5.png" alt=""><br>å¯¹äº container æœ‰ main axisï¼ˆä¸»è½´ï¼‰å’Œcross axisï¼ˆäº¤å‰è½´ï¼‰ã€‚main size å’Œ cross size åˆ†åˆ«æ˜¯containerä¸»è½´æ–¹å‘çš„äº¤å‰è½´æ–¹å‘çš„å®½åº¦ï¼Œmain start å’Œ main end åˆ†åˆ«æ˜¯ä¸»è½´çš„èµ·å§‹å’Œç»“ç‚¹ï¼Œå…¶ä»–åŒç†ï¼Œcontaineré‡Œé¢åŒ…å«itemsã€‚<br>ä¸‹é¢ä»‹ç»ä¸€ä¸‹å±æ€§ï¼š</p>
<h2 id="containerçš„å±æ€§ï¼š">containerçš„å±æ€§ï¼š</h2><ul>
<li><p>flexDirection: â€˜ row â€˜ | â€˜ column â€˜<br>ä¸»è½´çš„æ–¹å‘ï¼Œæ°´å¹³ | å‚ç›´ï¼Œé»˜è®¤æ˜¯ column ï¼Œitemä¼šæŒ‰ç…§ä¸»è½´æ–¹å‘æ’åˆ—ã€‚</p>
</li>
<li><p>flexWrap: â€˜ warp â€˜ | â€˜ nowrap â€™<br>flexbox ä¼šé»˜è®¤å°†æ‰€æœ‰å…ƒç´ åŸºäºä¸€è¡Œï¼Œè¿™ä¸ªå±æ€§è¡¨ç¤ºæ˜¯å¦æŠ˜è¡Œã€‚</p>
</li>
<li><p>alignItems: â€˜ flex-start â€™ | â€™ flex-end â€™ | â€™ center â€™ | â€˜ stretch â€˜<br>è¡¨ç¤ºitemåœ¨ cross axis ä¸Šçš„å¯¹é½æ–¹å¼ï¼ŒåŸºäºcross axisçš„é¡¶éƒ¨ï½œåŸºäºcross axisçš„åº•éƒ¨ï½œåŸºäºcross axisçš„ä¸­éƒ¨ï½œå¸ƒæ»¡æ•´ä¸ªã€‚</p>
</li>
<li><p>justifyContent: â€˜ flex-start â€™ | â€˜ flex-end â€˜ | â€˜ center â€˜ | â€˜ space-between â€˜ | â€™space-aroundâ€™<br>è¡¨ç¤ºitemåœ¨ main axis ä¸Šçš„å¯¹é½æ–¹å¼ï¼ŒåŸºäºä¸»è½´å¼€å§‹ï½œåŸºäºä¸»è½´ç»“æŸï½œå±…ä¸­ï½œå·¦å³ä¸¤è¾¹å¯¹é½ï¼Œitemé—´éš”ç›¸ç­‰ï½œæ¯ä¸ªitemä¸¤ç«¯é—´éš”ç›¸ç­‰ã€‚</p>
</li>
</ul>
<h2 id="itemçš„å±æ€§">itemçš„å±æ€§</h2><ul>
<li><p>flex: num<br>item æ‰€å çš„æ¯”ä¾‹å¤§å°ã€‚</p>
</li>
<li><p>alignSelf:â€˜ flex-start â€™ | â€™ flex-end â€™ | â€™ center â€™ | â€˜ stretch â€˜<br>å®ƒå…è®¸é¡¹ç›®ä¸­å½“ä¸ªitemå’Œå…¶ä»–itemsyouä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œä¼šè¦†ç›–alignitemsçš„å±æ€§ã€‚</p>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="tip:">tip:</h1><p>è¿™æ˜¯ä¸€ç¯‡å­¦ä¹  React-Native for Android çš„å­¦ä¹ ç¬”è®°ï¼Œä¸»è¦ä¸Šå…¶å®æ˜¯çœ‹å®˜æ–¹çš„æ–‡æ¡£æ¥è‡ªå·±å­¦ä¹  RNï¼Œç›®å‰çš„ä¸»è¦æ˜¯å­¦ä¹ androidçš„å¼€å‘ã€‚</p>
<p>ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜]]>
    </summary>
    
      <category term="Note" scheme="http://qiutc.me/tags/Note/"/>
    
      <category term="React-Native" scheme="http://qiutc.me/tags/React-Native/"/>
    
      <category term="React-Native" scheme="http://qiutc.me/categories/React-Native/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[[RN]1.ç¯å¢ƒæ­å»º--React-Native learning notes]]></title>
    <link href="http://qiutc.me/post/RN-1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-React-Native-learning-notes.html"/>
    <id>http://qiutc.me/post/RN-1-ç¯å¢ƒæ­å»º-React-Native-learning-notes.html</id>
    <published>2015-11-21T12:57:35.000Z</published>
    <updated>2016-05-10T03:51:20.000Z</updated>
    <content type="html"><![CDATA[<h1 id="tip:">tip:</h1><p>è¿™æ˜¯ä¸€ç¯‡å­¦ä¹  React-Native for Android çš„å­¦ä¹ ç¬”è®°ï¼Œä¸»è¦ä¸Šå…¶å®æ˜¯çœ‹å®˜æ–¹çš„æ–‡æ¡£æ¥è‡ªå·±å­¦ä¹  RNï¼Œç›®å‰çš„ä¸»è¦æ˜¯å­¦ä¹ androidçš„å¼€å‘ã€‚</p>
<h1 id="React-Native_for_Android_çš„ç¯å¢ƒæ­å»º">React-Native for Android çš„ç¯å¢ƒæ­å»º</h1><h3 id="è¦æ±‚ï¼š">è¦æ±‚ï¼š</h3><ol>
<li>å‰æ OS X (å‡è®¾å¤§å®¶æœ‰ç”¨Macäº†ğŸ˜ÃŸ);</li>
<li><a href="http://brew.sh/" target="_blank" rel="external">Homebrew</a> (åŒ…ç®¡ç†å™¨)(ç”¨æ¥å®‰è£…Watchman å’Œ Flow);</li>
<li>å®‰è£…<a href="https://nodejs.org/" target="_blank" rel="external">node.js</a> 4.0 æˆ–è€…ä»¥ä¸Š;</li>
<li>å®‰è£… watchman(æ–‡ä»¶ç›‘æ§) ,åœ¨å‘½ä»¤è¡Œ: <code>brew install watchman</code>;</li>
<li>å®‰è£… flow ,åœ¨å‘½ä»¤è¡Œ: <code>brew install flow</code>;</li>
<li>å®‰è£…æœ€æ–°çš„ <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="external">JDK</a>;</li>
<li>å®‰è£… SDK ,åœ¨å‘½ä»¤è¡Œ: <code>brew install android-idk</code>;</li>
<li>é…ç½® android ç¯å¢ƒ:<br>åœ¨ ~/.bashrc, ~/.bash_profileå†™å…¥<br>  <code>export ANDROID_HOME=/usr/local/opt/android-sdk</code>;<br>(åœ¨è¿™ä¸€æ­¥å¯ä»¥å…ˆåˆ°~ç›®å½•ä¸‹ï¼Œç„¶åå¦‚æœæ²¡æœ‰.bashrcï¼Œå°±åˆ›å»ºä¸€ä¸ªï¼Œç„¶åvim .bashrcï¼Œç„¶åå†™å…¥ä¸Šé¢ä»£ç ï¼ŒæŒ‰escé”®ï¼Œè¾“å…¥<code>:wq</code>ï¼Œç„¶åè‡ªåŠ¨ä¿å­˜é€€å‡ºï¼Œ.bash_profileåŒç†);</li>
<li>é…ç½® SDK:<br>æ–°å¼€ä¸€ä¸ªshellçª—å£ï¼šè¿è¡Œ <code>android</code>,<br>ä¼šå¼¹å‡º Android SDK Managerçª—å£ï¼Œ<br>å®‰è£…ä¸‹åˆ—é€‰é¡¹:<br><img src="/img/RN_img_1.png" alt=""><br><img src="/img/RN_img_2.png" alt=""><br>(tip: è¿™ä¸€æ­¥å¯èƒ½éœ€è¦ç¿»å¢™);</li>
<li>å®‰è£… <a href="https://www.genymotion.com/#!/download/freemium/mac/classical" target="_blank" rel="external">Genymotion</a> (android çš„æ¨¡æ‹Ÿå™¨,æ¨èä½¿ç”¨è¿™ä¸ªå§);</li>
<li>å®‰è£…react native çš„å‘½ä»¤è¡Œå·¥å…·åŒ…,åœ¨å‘½ä»¤è¡Œ: <code>npm install -g react-native-cli</code>;</li>
<li>å‘½ä»¤è¡Œè¿›å…¥éœ€è¦åˆ›å»ºçš„æ–‡ä»¶å¤¹ç›®å½•ä¸‹: <code>react-native init AwesomeProject</code>ï¼Œä¼šè‡ªåŠ¨è·å–ä¸‹è½½react nativeçš„åŒ…ï¼ˆå»ºè®®ç¿»å¢™ï¼‰;</li>
<li><p>é¡¹ç›®çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ <span class="tag">android</span>           <span class="id">#android</span>éœ€è¦çš„æ–‡ä»¶å¤¹</span><br><span class="line">â”œâ”€â”€ <span class="tag">ios</span>               <span class="id">#ios</span>éœ€è¦çš„æ–‡ä»¶å¤¹</span><br><span class="line">â”œâ”€â”€ <span class="tag">node_modules</span>      <span class="id">#npm</span>åŒ…æ–‡ä»¶å¤¹</span><br><span class="line">â”œâ”€â”€ <span class="tag">index</span><span class="class">.android</span><span class="class">.js</span>  <span class="id">#android</span>åº”ç”¨çš„å…¥å£<span class="tag">js</span>æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ <span class="tag">index</span><span class="class">.ios</span><span class="class">.js</span>      <span class="id">#ios</span>åº”ç”¨çš„å…¥å£<span class="tag">js</span>æ–‡ä»¶</span><br><span class="line">â””â”€â”€ <span class="tag">package</span><span class="class">.json</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰“å¼€Genymotion,ä¸‹è½½å®‰è£…æœ€æ–°çš„androidæ¨¡æ‹Ÿå™¨ï¼Œæ‰“å¼€;</p>
</li>
<li>åœ¨æ–‡ä»¶å¤¹ä¸‹è¿è¡Œå‘½ä»¤è¡Œ: <code>react-native run-android</code>,ç­‰å¾…å®‰è£…ï¼Œ<br>ç„¶åandroidçš„æ¨¡æ‹Ÿå™¨å°±ä¼šå‡ºç°ï¼š<br><img src="/img/RN_img_3.png" alt=""><br>ÃŸ<h2 id="å®Œæˆï¼">å®Œæˆï¼</h2></li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="tip:">tip:</h1><p>è¿™æ˜¯ä¸€ç¯‡å­¦ä¹  React-Native for Android çš„å­¦ä¹ ç¬”è®°ï¼Œä¸»è¦ä¸Šå…¶å®æ˜¯çœ‹å®˜æ–¹çš„æ–‡æ¡£æ¥è‡ªå·±å­¦ä¹  RNï¼Œç›®å‰çš„ä¸»è¦æ˜¯å­¦ä¹ androidçš„å¼€å‘ã€‚</p>
<h1 id="React-Native_for_Androi]]>
    </summary>
    
      <category term="Note" scheme="http://qiutc.me/tags/Note/"/>
    
      <category term="React-Native" scheme="http://qiutc.me/tags/React-Native/"/>
    
      <category term="React-Native" scheme="http://qiutc.me/categories/React-Native/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[å¦‚ä½•ä½¿ç”¨webpackâ€”webpack-howto]]></title>
    <link href="http://qiutc.me/post/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8webpack%E2%80%94webpack-howto.html"/>
    <id>http://qiutc.me/post/å¦‚ä½•ä½¿ç”¨webpackâ€”webpack-howto.html</id>
    <published>2015-10-21T02:58:10.000Z</published>
    <updated>2016-05-10T03:52:30.000Z</updated>
    <content type="html"><![CDATA[<h1 id="å¦‚ä½•ä½¿ç”¨webpack">å¦‚ä½•ä½¿ç”¨webpack</h1><p>æœ¬æ–‡ç« ç¿»è¯‘è‡ªpetehuntçš„webpack-howtoæ•™ç¨‹ï¼Œ<a href="https://github.com/petehunt/webpack-howto" target="_blank" rel="external">åŸåœ°å€https://github.com/petehunt/webpack-howto</a>ï¼Œè¿˜æœ‰æºç ã€‚</p>
<h2 id="æœ¬æ•™ç¨‹çš„ç›®æ ‡">æœ¬æ•™ç¨‹çš„ç›®æ ‡</h2><p>è¿™æ˜¯ä¸€æœ¬å¦‚ä½•ä½¿ç”¨webpackæ¥å¤„ç†ä»£ç çš„â€œçƒ¹é¥ªä¹¦â€ï¼Œå®ƒåŒ…æ‹¬äº†æˆ‘ä»¬åœ¨Instagramç”¨çš„å¤§å¤šæ•°ä¸œè¥¿ä»¥åŠæˆ‘ä»¬è¿˜æ²¡åœ¨é¡¹ç›®ä¸­ç”¨åˆ°è¿‡çš„ã€‚<br>æˆ‘ï¼ˆä½œè€…ï¼‰çš„å»ºè®®ï¼šæŠŠè¿™æœ¬ä¹¦ä½œä¸ºä½ å­¦ä¹ webpackæ–‡æ¡£çš„å¼€ç«¯ï¼Œç„¶åé…åˆçœ‹å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ã€‚</p>
<h2 id="é¢„å¤‡çŸ¥è¯†">é¢„å¤‡çŸ¥è¯†</h2><ul>
<li>ä½ äº†è§£browserifyï¼ŒReqiureJsæˆ–è€…å…¶ä»–ç±»ä¼¼çš„ä¸œè¥¿ã€‚</li>
<li>ä½ æ˜ç™½è¿™äº›ä¸œè¥¿çš„ä»·å€¼ï¼š<ul>
<li>æ‰“åŒ…åˆ†ç¦»</li>
<li>å¼‚æ­¥åŠ è½½</li>
<li>æ‰“åŒ…é™æ€èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡å’ŒCSS</li>
</ul>
</li>
</ul>
<h2 id="1-ä¸ºä»€ä¹ˆä½¿ç”¨webpackï¼Ÿ">1.ä¸ºä»€ä¹ˆä½¿ç”¨webpackï¼Ÿ</h2><ul>
<li><strong>ä»–ç±»ä¼¼browserify</strong> ä½†æ˜¯å¯ä»¥æŠŠä½ çš„åº”ç”¨åˆ†ç¦»æˆè®¸å¤šæ–‡ä»¶ï¼Œå¦‚æœä½ æœ‰è®¸å¤šé¡µé¢åœ¨ä½ çš„å•é¡µåº”ç”¨é‡Œé¢ï¼Œç”¨æˆ·åªéœ€è¦ä¸‹è½½å½“å‰é¡µé¢æ‰€éœ€è¦çš„ä»£ç ã€‚å¦‚æœä½ è·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œä»–ä»¬ä¸éœ€è¦é‡æ–°åŠ è½½é€šç”¨çš„ä»£ç ã€‚</li>
<li><strong>ä»–èƒ½æ›¿ä»£gruntæˆ–è€…gulpå¤§éƒ¨åˆ†çš„åŠŸèƒ½</strong> å› ä¸ºä»–å¯ä»¥æ„å»ºå’Œæ‰“åŒ…CSSï¼Œé¢„å¤„ç†CSSï¼Œç¼–è¯‘JSå’Œæ‰“åŒ…å¤„ç†å›¾ç‰‡ï¼Œç”šè‡³æ›´å¤šäº‹æƒ…ã€‚<br>ä»–æ”¯æŒAMDå’ŒCommonJsä»¥åŠå…¶ä»–çš„æ¨¡å—åŒ–ç³»ç»Ÿï¼ˆAngularï¼ŒES6ï¼‰ã€‚å¦‚æœä½ ä¸çŸ¥é“ç”¨ä»€ä¹ˆï¼Œé‚£ä¹ˆå¯ä»¥ç”¨CommonJsã€‚</li>
</ul>
<h2 id="2-ç»™ç”¨browserifyçš„äºº">2.ç»™ç”¨browserifyçš„äºº</h2><p>ä¸‹é¢çš„ä»£ç æ˜¯ç­‰ä»·çš„ï¼š<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="tag">browserify</span> <span class="tag">main</span><span class="class">.js</span> &gt; <span class="tag">bundle</span><span class="class">.js</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="tag">webpack</span> <span class="tag">main</span><span class="class">.js</span> <span class="tag">bundle</span><span class="class">.js</span></span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œwebpackæ¯”browserifyæ›´åŠ å¼ºå¤§ï¼Œä½ å¯èƒ½ä¼šæ›´æ„¿æ„å»ç¼–å†™ä¸€ä¸ª<code>webpack.config.js</code>æ¥åˆç†åœ°ç»„ç»‡ä½ çš„é¡¹ç›®ï¼š<br><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="module"><span class="keyword">module</span>.exports = </span>&#123;</span><br><span class="line">    entry: <span class="string">'./main.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">'bundle.js'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>è¿™å°±æ˜¯JSï¼Œæ‰€ä»¥ä½ å¯ä»¥å¾ˆè½»æ¾åœ°åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œç¼–å†™ä»£ç ã€‚</p>
<h2 id="3-å¦‚ä½•è°ƒç”¨webpackï¼Ÿ">3.å¦‚ä½•è°ƒç”¨webpackï¼Ÿ</h2><p>åˆ‡æ¢å¸¦åŒ…å«webpack.config.jsçš„ç›®å½•ç„¶ååœ¨å‘½ä»¤è¡Œè¿è¡Œï¼š</p>
<ul>
<li><code>webpack</code> æ‰§è¡Œä¸€æ¬¡å¼€å‘æ—¶çš„ç¼–è¯‘</li>
<li><code>webpack -p</code> æ‰§è¡Œä¸€æ¬¡ç”Ÿæˆç¯å¢ƒçš„ç¼–è¯‘ï¼ˆå‹ç¼©ï¼‰</li>
<li><code>webpack --watch</code> åœ¨å¼€å‘æ—¶æŒç»­ç›‘æ§å¢é‡ç¼–è¯‘ï¼ˆå¾ˆå¿«ï¼‰</li>
<li><code>webpack -d</code> è®©ä»–ç”ŸæˆSourceMaps</li>
</ul>
<h2 id="ç¼–è¯‘JSè¯­è¨€">ç¼–è¯‘JSè¯­è¨€</h2><p>webpackå’Œbrowserifyä¸€æ ·èƒ½è½¬åŒ–ï¼ˆtransformsï¼‰çš„RequireJsæ’ä»¶æ˜¯ä¸€ä¸ªåŠ è½½å™¨ï¼ˆloaderï¼‰<br>ä½ èƒ½è®©webpackåŠ è½½CoffeeScriptå’ŒFacebookçš„JSX+ES6æ”¯æŒï¼ˆä½ å¿…é¡»å…ˆ <code>npm install babel-loader coffee-loader</code>ï¼‰:<br><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line">module.exports = &#123;</span><br><span class="line"><span class="label">    entry:</span> <span class="string">'./main.js'</span>,</span><br><span class="line"><span class="label">    output:</span> &#123;</span><br><span class="line"><span class="label">        filename:</span> <span class="string">'bundle,js'</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="label">    module:</span> &#123;</span><br><span class="line"><span class="label">        loader:</span> [</span><br><span class="line">            &#123; <span class="string">test:</span> <span class="regexp">/\.coffee$/</span>, <span class="string">loader:</span> <span class="string">'coffee-loader'</span> &#125;,</span><br><span class="line">            &#123; <span class="string">test:</span> <span class="regexp">/\.js$/</span>, <span class="string">loader:</span> <span class="string">'bebel-loader'</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>ä¸ºäº†å¼€å¯åç¼€åçš„è‡ªåŠ¨è¡¥å…¨ï¼Œä½ éœ€è¦æ·»åŠ <code>resolve.extensions</code>å‚æ•°æ¥æŒ‡å®šå“ªäº›æ–‡ä»¶æ˜¯webpackéœ€è¦æœç´¢çš„ï¼š<br><figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> webpack.config.js</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attribute">entry</span>: <span class="string">'./main.js'</span>,</span><br><span class="line">    <span class="attribute">output</span>: &#123;</span><br><span class="line">        <span class="attribute">filename</span>: <span class="string">'bundle,js'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attribute">module</span>: &#123;</span><br><span class="line">        <span class="attribute">loader</span>: [</span><br><span class="line">            &#123; <span class="attribute">test</span>: <span class="regexp">/\.coffee$/</span>, <span class="attribute">loader</span>: <span class="string">'coffee-loader'</span> &#125;,</span><br><span class="line">            &#123; <span class="attribute">test</span>: <span class="regexp">/\.js$/</span>, <span class="attribute">loader</span>: <span class="string">'bebel-loader'</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attribute">resolve</span>: &#123;</span><br><span class="line">        <span class="regexp">//</span> ä½ ç°åœ¨å¯ä»¥ä½¿ç”¨ `<span class="javascript"></span>`<span class="built_in">require</span>(<span class="string">'file'</span>)`<span class="javascript"></span>` æ¥ä»£æ›¿ `<span class="javascript"></span>`<span class="built_in">require</span>(<span class="string">'file.coffee'</span>)`<span class="javascript"></span>` ã€‚</span><br><span class="line">        <span class="attribute">extensions</span>: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.coffee'</span>, <span class="string">'.jsx'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="5-æ ·å¼å’Œå›¾ç‰‡">5.æ ·å¼å’Œå›¾ç‰‡</h2><p>é¦–å…ˆä½ éœ€è¦æ›´æ–°ä½ çš„ä»£ç å»è¯·æ±‚ <code>require()</code> ä½ çš„é™æ€èµ„æºï¼ˆå‘½åå’Œä»–ä»¬åœ¨nodeé‡Œé¢ä½¿ç”¨ <code>require()</code> ä¸€æ ·ï¼‰ã€‚<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'./bootstrap.css'</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./myapp.less'</span>);</span><br><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</span><br><span class="line">img.src = <span class="built_in">require</span>(<span class="string">'./glyph.png'</span>);</span><br></pre></td></tr></table></figure></p>
<p>å½“ä½ è¯·æ±‚CSSï¼ˆæˆ–è€…lessæˆ–è€…å…¶ä»–ï¼‰çš„æ—¶å€™ï¼Œwebpackä¼šæŠŠCSSåƒå­—ç¬¦ä¸²ä¸€æ ·å†…è”åˆ°JSåŒ…é‡Œé¢ï¼Œrequireï¼ˆï¼‰ä¼šåœ¨é¡µé¢æ’å…¥ä¸€ä¸ªstyleæ ‡ç­¾ã€‚<br>å½“ä½ è¯·æ±‚å›¾ç‰‡æ—¶ï¼Œwebpackä¼šå†…è”ä¸€ä¸ªå›¾ç‰‡çš„URLé“¾æ¥åˆ°ä½ çš„ä»£ç åŒ…ç„¶åé€šè¿‡<code>require()</code>è¿”å›ã€‚<br>ä½†æ˜¯ä½ éœ€è¦å»æ•™webpackå»åšè¿™ä»¶äº‹ï¼ˆå†æ¬¡é‡å¤ï¼Œç”¨loadersï¼‰ï¼š<br><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line">module.exports = &#123;</span><br><span class="line"><span class="label">  entry:</span> <span class="string">'./main.js'</span>,</span><br><span class="line"><span class="label">  output:</span> &#123;</span><br><span class="line"><span class="label">    path:</span> <span class="string">'./build'</span>, <span class="comment">// å›¾ç‰‡å’Œjsä¼šè¢«æ‰“åŒ…åˆ°è¿™ä¸ªç›®å½•</span></span><br><span class="line"><span class="label">    publicPath:</span> <span class="string">'http://mycdn.com/'</span>, <span class="comment">// è¿™ä¸ªæ˜¯ç”¨æ¥ç”Ÿæˆå›¾ç‰‡åœ°å€çš„URL</span></span><br><span class="line"><span class="label">    filename:</span> <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line"><span class="label">  module:</span> &#123;</span><br><span class="line"><span class="label">    loaders:</span> [</span><br><span class="line">      &#123; <span class="string">test:</span> <span class="regexp">/\.less$/</span>, <span class="string">loader:</span> <span class="string">'style-loader!css-loader!less-loader'</span> &#125;, <span class="comment">// ä½¿ç”¨ ! æ¥é“¾æ¥å¤šä¸ªloader</span></span><br><span class="line">      &#123; <span class="string">test:</span> <span class="regexp">/\.css$/</span>, <span class="string">loader:</span> <span class="string">'style-loader!css-loader'</span> &#125;,</span><br><span class="line">      &#123;<span class="string">test:</span> <span class="regexp">/\.(png|jpg)$/</span>, <span class="string">loader:</span> <span class="string">'url-loader?limit=8192'</span>&#125; <span class="comment">// å†…è”å°äº8kçš„base64å›¾ç‰‡ï¼Œå…¶ä»–çš„ç›´æ¥ä½¿ç”¨URL</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="6-åŠŸèƒ½æ ‡å¿—">6.åŠŸèƒ½æ ‡å¿—</h2><p>æœ‰äº›ä»£ç å¯èƒ½æˆ‘ä»¬åªæƒ³è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹è¿è¡Œï¼ˆæ¯”å¦‚æ—¥å¿—loggingï¼‰å’Œæˆ‘ä»¬å†…éƒ¨çš„æµ‹è¯•è°ƒè¯•æœåŠ¡å™¨ï¼ˆå°±åƒæˆ‘ä»¬çš„æµ‹è¯•äººå‘˜åœ¨æµ‹è¯•åº”ç”¨ï¼‰ï¼Œå¯ä»¥åœ¨ä½ çš„ä»£ç å¼•å…¥å…¨å±€ç¯å¢ƒå˜é‡ã€‚<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(__DEV__) &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">'Extra logging'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">if</span>(__PRERELEASE__) &#123;</span><br><span class="line">    showSecretFeature();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¼šæ•™webpackè¿™äº›å¥‡ç‰¹çš„å…¨å±€ç¯å¢ƒï¼š<br><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// definePlugin æ¥æ”¶å­—ç¬¦ä¸²æ’å…¥åˆ°ä»£ç å½“ä¸­, æ‰€ä»¥ä½ éœ€è¦çš„è¯å¯ä»¥å†™ä¸Š JS çš„å­—ç¬¦ä¸².</span></span><br><span class="line"><span class="keyword">var</span> definePlugin = <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">  __DEV__: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse(process.env.BUILD_DEV || <span class="string">'true'</span>)),</span><br><span class="line">  __PRERELEASE__: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse(process.env.BUILD_PRERELEASE || <span class="string">'false'</span>))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="module"><span class="keyword">module</span>.exports = </span>&#123;</span><br><span class="line">  entry: <span class="string">'./main.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span>       </span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [definePlugin]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>ä½ å¯ä»¥åœ¨æ§åˆ¶å°é‡Œæ‰§è¡Œ <code>BUILD_DEV=1 BUILD_PRERELEASE=1 webpack</code> .<br>æ³¨æ„ï¼š<code>webpack -p</code>ä¼šä¸‘åŒ–å¹¶ä¸”å‰”é™¤æ­»ä»£ç ï¼Œç„¶å’ŒåŒ…å«åœ¨é‡Œé¢çš„ä»£ç éƒ½ä¼šè¢«å‰”é™¤æ‰ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨æ‹…å¿ƒæ³„éœ²ç§˜å¯†å’¯~</p>
<h2 id="7-å¤šé‡å…¥å£">7.å¤šé‡å…¥å£</h2><p>æ¯”å¦‚è¯´ä½ æœ‰ä¸€ä¸ªprofileå’Œä¸€ä¸ªfeedé¡µé¢ï¼Œä½ ä¸æƒ³è®©ç”¨æˆ·åœ¨åªæƒ³è¦profileé¡µé¢çš„æ—¶å€™ä¸‹è½½feedé¡µé¢çš„ä»£ç ï¼Œæ‰€ä»¥ä½ å¯ä»¥åˆ›å»ºå¤šä¸ªåŒ…ï¼Œæ¯ä¸ªé¡µé¢éƒ½æœ‰ä¸€ä¸ªâ€main moduleâ€ã€‚<br><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="module"><span class="keyword">module</span>.exports = </span>&#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    Profile: <span class="string">'./profile.js'</span>,</span><br><span class="line">    Feed: <span class="string">'./feed.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: <span class="string">'build'</span>,</span><br><span class="line">    filename: <span class="string">'[name].js'</span> <span class="comment">// æ¨¡æ¿åŸºäºä¸Šé¢å…¥å£æ–‡ä»¶çš„key</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨profileé¡µé¢ï¼Œæ’å…¥ <code>&lt;script src=&quot;build/Profile.js&quot;&gt;&lt;/script&gt;</code> .feedé¡µé¢ä¹Ÿä¼šè¿™æ ·ã€‚</p>
<h2 id="8-ä¼˜åŒ–é€šç”¨ä»£ç ">8.ä¼˜åŒ–é€šç”¨ä»£ç </h2><p>feedå’Œprofileé¡µé¢å…±äº«è®¸å¤šé€šç”¨çš„ä»£ç ï¼ˆæ¯”å¦‚Reactå’Œå…¬ç”¨æ ·å¼å’Œç»„ä»¶ï¼‰ã€‚<br>webpackå¯ä»¥è®¡ç®—å‡ºå“ªäº›ä»£ç æ˜¯å®ƒä»¬å…¬ç”¨çš„ç„¶åç”Ÿæˆä¸€ä¸ªå…±äº«çš„åŒ…ç„¶ååœ¨é¡µé¢ä¹‹é—´è¢«ç¼“å­˜ã€‚<br><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> commonsPlugin =</span><br><span class="line">  <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(<span class="string">'common.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="module"><span class="keyword">module</span>.exports = </span>&#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    Profile: <span class="string">'./profile.js'</span>,</span><br><span class="line">    Feed: <span class="string">'./feed.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: <span class="string">'build'</span>,</span><br><span class="line">    filename: <span class="string">'[name].js'</span> <span class="comment">// Template based on keys in entry above</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [commonsPlugin]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨scriptæ ‡ç­¾æ·»åŠ ä¹‹å‰æ·»åŠ  <code>&lt;script src=&quot;build/common.js&quot;&gt;&lt;/script&gt;</code> å°±å¯ä»¥ä½¿ç”¨ç¼“å­˜å•¦~</p>
<h2 id="9-å¼‚æ­¥åŠ è½½">9.å¼‚æ­¥åŠ è½½</h2><p>CommonJsæ˜¯åŒæ­¥åŠ è½½çš„ï¼Œä½†æ˜¯webpackæä¾›äº†ä¸€ä¸ªæ–¹æ³•å¯ä»¥å¼‚æ­¥åŠ è½½æŒ‡å®šçš„ä¾èµ–é¡¹ã€‚<br>è¿™å¯¹äºå®¢æˆ·ç«¯çš„è·¯ç”±æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œæ¯ä¸€ä¸ªé¡µé¢éƒ½éœ€è¦è·¯ç”±ï¼Œä½†æ˜¯åœ¨æŸä¸ªåŠŸèƒ½è¢«ç”¨åˆ°ä¹‹å‰ä½ ä¸ä¼šæƒ³å»ä¸‹è½½è¿™éƒ¨åˆ†ä»£ç çš„ã€‚<br>åœ¨ä½ æƒ³è¦å¼‚æ­¥åŠ è½½çš„åœ°æ–¹æŒ‡å®šåˆ†ç¦»ç‚¹ï¼Œæ¯”å¦‚ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.location.pathname === <span class="string">'/feed'</span>) &#123;</span><br><span class="line">  showLoadingState();</span><br><span class="line">  <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// è¿™ä¸ªè¯­æ³•å¾ˆæ€ªå¼‚ä½†æ˜¯ä»–èƒ½æ‰§è¡Œ</span></span><br><span class="line">    hideLoadingState();</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">'./feed'</span>).show(); <span class="comment">// å½“è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™, è¿™ä¸ªæ¨¡å—æ—¶å¯ä»¥åŒæ­¥çš„ã€‚</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.location.pathname === <span class="string">'/profile'</span>) &#123;</span><br><span class="line">  showLoadingState();</span><br><span class="line">  <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    hideLoadingState();</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">'./profile'</span>).show();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>webpackä¼šåšå‰©ä¸‹çš„äº‹æƒ…å¹¶ä¸”ç”Ÿæˆé¢å¤–çš„åŒ…ç„¶åç»™ä½ åŠ è½½ã€‚<br>webpackåœ¨htmlçš„scriptæ ‡ç­¾åŠ è½½æ—¶ä¼šå‡è®¾è¿™äº›æ–‡ä»¶æ˜¯åœ¨ä½ çš„æ ¹ç›®å½•ä¸‹çš„ï¼Œæ¯”å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>output.publicPathæ¥é…ç½®ä»–</code><br><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="tag">output</span>: &#123;</span><br><span class="line">    <span class="attribute">path</span>: <span class="string">"/home/proj/public/assets"</span>, <span class="comment">//pathæŒ‡å‘ä½ ç¼–è¯‘æ—¶çš„æ–‡ä»¶ç›®å½•</span></span><br><span class="line">    <span class="attribute">publicPath</span>: <span class="string">"/assets/"</span> <span class="comment">//publicPathæŒ‡å‘ä½ å¼•ç”¨æ–‡ä»¶æ˜¯è€ƒè™‘çš„åœ°å€</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº</h1><p>å¯ä»¥çœ‹ä¸€çœ‹ä¸€ä¸ªæˆåŠŸçš„å›¢é˜Ÿå¦‚ä½•åœ¨çœŸå®é¡¹ç›®ä¸­ä½¿ç”¨webpackï¼š<a href="http://youtu.be/VkTCL6Nqm6Y" target="_blank" rel="external">http://youtu.be/VkTCL6Nqm6Y</a><br>è¿™æ˜¯Pete Hunt åœ¨OSConå¤§ä¼šä¸Šè¯´çš„å…³äºwebpackåœ¨Instagram.comä¸­çš„ä½¿ç”¨ã€‚</p>
<h1 id="FAQ">FAQ</h1><p><strong>webpackä¸åƒæ¨¡å—åŒ–ï¼Ÿ</strong><br>webpackéå¸¸çš„æ¨¡å—åŒ–ã€‚ä»–èƒ½è®©æ’ä»¶è‡ªèº«é›†æˆåˆ°ç¼–è¯‘è¿‡ç¨‹ä¸­çš„è®¸å¤šåœ°æ–¹ç›¸æ¯”äºbrowserifyå’ŒrequireJs.<br>è®¸å¤šçœ‹èµ·æ¥æ˜¯åœ¨è¢«ç¼–å†™åœ¨æ ¸å¿ƒä»£ç ä¸­çš„åŠŸèƒ½å®é™…ä¸Šæ˜¯è¢«é»˜è®¤åŠ è½½çš„æ’ä»¶ï¼Œä»–ä»¬å¯ä»¥è¢«è¦†ç›–ã€‚</p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="å¦‚ä½•ä½¿ç”¨webpack">å¦‚ä½•ä½¿ç”¨webpack</h1><p>æœ¬æ–‡ç« ç¿»è¯‘è‡ªpetehuntçš„webpack-howtoæ•™ç¨‹ï¼Œ<a href="https://github.com/petehunt/webpack-howto" target="_blank" r]]>
    </summary>
    
      <category term="JavaScript" scheme="http://qiutc.me/tags/JavaScript/"/>
    
      <category term="webpack" scheme="http://qiutc.me/tags/webpack/"/>
    
      <category term="ç¿»è¯‘" scheme="http://qiutc.me/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="webpack" scheme="http://qiutc.me/categories/webpack/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[CSS ä¼ªç±»before/after contentå†…å®¹ç”ŸæˆæŠ€æœ¯----çº¯CSSå®ç°tooltip]]></title>
    <link href="http://qiutc.me/post/CSS-%E4%BC%AA%E7%B1%BBbefore-after-content%E5%86%85%E5%AE%B9%E7%94%9F%E6%88%90%E6%8A%80%E6%9C%AF-%E7%BA%AFCSS%E5%AE%9E%E7%8E%B0tooltip.html"/>
    <id>http://qiutc.me/post/CSS-ä¼ªç±»before-after-contentå†…å®¹ç”ŸæˆæŠ€æœ¯-çº¯CSSå®ç°tooltip.html</id>
    <published>2015-10-17T07:30:41.000Z</published>
    <updated>2016-05-10T03:50:22.000Z</updated>
    <content type="html"><![CDATA[<h1 id="ä¸€ã€ä»‹ç»before/after">ä¸€ã€ä»‹ç»before/after</h1><p>CSSä¸­çš„beforeå’Œafterä¼ªç±»é€‰æ‹©å™¨æ—©åœ¨CSS2æ—¶å°±è¢«å¼•å…¥ï¼Œæ”¹å±æ€§è¢«æ‰€æœ‰ä¸»æµæµè§ˆå™¨æ‰€æ”¯æŒäº†ã€‚<br>beforeå’Œafteré¡¾åæ€ä¹‰ï¼Œåˆ†åˆ«æŒ‡çš„æ˜¯ä¼ªå…ƒç´ åœ¨å…ƒç´ å‰/åæ·»åŠ å†…å®¹ï¼Œé»˜è®¤ä»–ä»¬æ˜¯displayæ˜¯inlineï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨CSSè®¾ç½®ä¸ºblockã€‚<br>åº”ç”¨before/å’Œafterä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä¸¾ä¸ªä¾‹å­ï¼š<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="tag">a</span><span class="pseudo">:after</span> <span class="rules">&#123;</span><br><span class="line">      <span class="rule"><span class="attribute">content</span>:<span class="value"> <span class="string">" after "</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">display</span>:<span class="value">  block</span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">coloe</span>:<span class="value"> red</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥åœ¨æµè§ˆå™¨çœ‹åˆ°ï¼Œaæ ‡ç­¾å…ƒç´ åé¢å¤šå‡ºäº†ä¸€æ®µæ–‡å­— afterã€‚ï¼ˆåœ¨CSS3ä¸­ä¼ªç±»å…ƒç´ ä½¿ç”¨æ˜¯å¦‚a::afterçš„ï¼Œä¸è¿‡ç›®å‰ä¸¤è€…å¹¶æ— å¤šå¤§åŒºåˆ«ï¼‰ã€‚<br>ï¼ˆä¼ªå…ƒç´ ä¸å¯é€šè¿‡DOMä½¿ç”¨ï¼ŒIE6/7å¯¹è¯¥å±æ€§ä¸æ”¯æŒï¼‰</p>
<p>afterå’Œbeforeä¼ªå…ƒç´ æœ‰è®¸å¤šç”¨å¤„ï¼Œè¿˜å¯ä»¥ç®€åŒ–ä»£ç ï¼Œæ¯”å¦‚å¯ä»¥å†™ä¸€ä¸ªè®¡æ•°å™¨ã€tipå°ä¸‰è§’å½¢ã€æ¸…é™¤æµ®åŠ¨â€¦â€¦ç‰¹åˆ«åœ¨CSS3ä¸­æ–°åŠ çš„ä¸€äº›å±æ€§æ›´æ˜¯ä¸°å¯Œäº†å®ƒçš„åº”ç”¨ï¼Œè¿™é‡Œæœ‰ä¸ªå°æ•™ç¨‹ï¼Œç”¨before/afterä¼ªå…ƒç´ æ¥å®ç°ä¸€ä¸ªçº¯CSS3çš„tooltipã€‚</p>
<h1 id="äºŒã€tooltipå®ç°æ•™ç¨‹">äºŒã€tooltipå®ç°æ•™ç¨‹</h1><p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦æ˜¯ç”¨è‰after/beforeä¼ªå…ƒç´ contentä¸­çš„attrå±æ€§ï¼Œå…ˆæ¥çœ‹çœ‹å®ç°åçš„æ ·å­ï¼š</p>
<h2 id="1-å®ç°æ ·å¼">1.å®ç°æ ·å¼</h2><p><img src="/img/after&amp;before-demo.png" alt="DEMO"></p>
<h2 id="2-ä»£ç ">2.ä»£ç </h2><p>é¼ æ ‡hover buttonä¹‹åï¼Œå‡ºç°ä¸€ä¸ªtooltipå°æ ‡ç­¾ã€‚<br>ä»£ç å…ˆè´´ä¸Šï¼š<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line">        <span class="class">.btn</span> <span class="rules">&#123;</span><br><span class="line">            <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">display</span>:<span class="value"> block</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">200px</span> auto</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">200px</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">10px</span> <span class="number">20px</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">20px</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#fff</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#6bdf4e</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#6bdf4e</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">cursor</span>:<span class="value"> pointer</span></span>;</span><br><span class="line">        &#125;</span></span><br><span class="line">        <span class="class">.btn</span><span class="pseudo">::after</span> <span class="rules">&#123;</span><br><span class="line">            <span class="rule"><span class="attribute">content</span>:<span class="value"> <span class="function">attr</span>(data-tip)</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">display</span>:<span class="value"> none</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">5px</span> <span class="number">10px</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">100%</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">margin-bottom</span>:<span class="value"> <span class="number">12px</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(-<span class="number">50%</span>)</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">16px</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#000</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#fff</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">cursor</span>:<span class="value"> default</span></span>;</span><br><span class="line">        &#125;</span></span><br><span class="line">        <span class="class">.btn</span><span class="pseudo">::before</span> <span class="rules">&#123;</span><br><span class="line">            <span class="rule"><span class="attribute">content</span>:<span class="value"> <span class="string">" "</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">display</span>:<span class="value"> none</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">100%</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(-<span class="number">50%</span>)</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">margin-bottom</span>:<span class="value"> <span class="number">3px</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">border-left</span>:<span class="value"> <span class="number">6px</span> solid transparent</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">border-right</span>:<span class="value"> <span class="number">6px</span> solid transparent</span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">border-top</span>:<span class="value"> <span class="number">9px</span> solid <span class="hexcolor">#000</span></span></span>;</span><br><span class="line">        &#125;</span></span><br><span class="line">        <span class="class">.btn</span><span class="pseudo">:hover</span><span class="pseudo">::after</span>,</span><br><span class="line">        <span class="class">.btn</span><span class="pseudo">:hover</span><span class="pseudo">::before</span> <span class="rules">&#123;</span><br><span class="line">            <span class="rule"><span class="attribute">display</span>:<span class="value"> block</span></span>;</span><br><span class="line">        &#125;</span></span><br><span class="line">    </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">button</span> <span class="attribute">class</span>=<span class="value">"btn"</span> <span class="attribute">data-tip</span>=<span class="value">"ToolTip"</span>&gt;</span>button<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="3-å®ç°è¿‡ç¨‹">3.å®ç°è¿‡ç¨‹</h2><ul>
<li>ä¸€. åˆ›å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œç„¶ååœ¨æ ‡ç­¾å†…åŠ ä¸Šä¸€ä¸ªå±æ€§ data-[] = â€œToolTipâ€,[]è¡¨ç¤ºçš„æ˜¯è‡ªå®šä¹‰çš„å±æ€§åç§°ï¼Œå¼•å·é‡Œé¢æ˜¯tooltipéœ€è¦æ˜¾ç¤ºçš„å†…å®¹ã€‚</li>
<li>äºŒ. ç»™æ ‡ç­¾åŠ æ ·å¼ï¼Œpositionè®¾ç½®ä¸ºrelativeï¼Œå› ä¸ºä¹‹åä¼ªå…ƒç´ éœ€è¦è®¾ç½®ç»å¯¹å®šä½æ¥è®¾ç½®ä½ç½®ã€‚</li>
<li>ä¸‰. ç»™afteråŠ æ ·å¼ï¼Œafteræ˜¯éœ€è¦æ˜¾ç¤ºçš„tooltipï¼Œé€šè¿‡content: attr(data-tip);æ‹¿åˆ°éœ€è¦æ˜¾ç¤ºçš„å†…å®¹ï¼Œè®¾ç½®ç»å¯¹å®šä½ï¼Œè°ƒæ•´ä½ç½®ã€‚</li>
<li>å››. ç»™beforeåŠ æ ·å¼ï¼Œbeforeéœ€è¦è®¾ç½®æˆä¸€ä¸ªå°ä¸‰è§’tipæ”¾åœ¨afterä¸‹é¢ã€‚</li>
<li>äº”. ç»™after/beforeçš„displayéƒ½è®¾ç½®ä¸ºnoneã€‚</li>
<li>å…­. ç»™éœ€è¦tooltipçš„å…ƒç´ ä¼ªç±»é€‰æ‹©hoveræ—¶è®¾ç½®after/beforeçš„displayä¸ºblockï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯after/beforeé»˜è®¤displayä¸ºinlineï¼Œæ‰€ä»¥æˆ‘ä»¬å‰é¢åˆ›å»ºè°ƒè¯•æ˜¯displayåº”è¯¥å…ˆè®¾ç½®ä¸ºblockã€‚</li>
<li>ä¸ƒ. æ‰“å¼€æµè§ˆå™¨æŸ¥çœ‹æ•ˆæœ~</li>
</ul>
<h1 id="ä¸‰ã€å¯¹äºä¸æ”¯æŒä¼ªå…ƒç´ çš„IE6/7">ä¸‰ã€å¯¹äºä¸æ”¯æŒä¼ªå…ƒç´ çš„IE6/7</h1><p>è§£å†³æ–¹æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> $beforeAfter = <span class="function"><span class="keyword">function</span>(<span class="params">dom</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.querySelector || !dom &amp;&amp; dom.nodeType !== <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">var</span> content = dom.getAttribute(<span class="string">"data-content"</span>) || <span class="string">''</span>;     </span><br><span class="line">    <span class="keyword">var</span> before = <span class="built_in">document</span>.createElement(<span class="string">"before"</span>)</span><br><span class="line">        , after = <span class="built_in">document</span>.createElement(<span class="string">"after"</span>);</span><br><span class="line">    before.innerHTML = content;</span><br><span class="line">    after.innerHTML = content;</span><br><span class="line">    dom.insertBefore(before, dom.firstChild);</span><br><span class="line">    dom.appendChild(after);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="å››ã€tip">å››ã€tip</h1><p>å…³äºafter/beforeè¿˜æœ‰è®¸å¤šæœ‰è¶£æœ‰ç”¨çš„ç”¨æ³•ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç ”ç©¶ç ”ç©¶å“¦~</p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="ä¸€ã€ä»‹ç»before/after">ä¸€ã€ä»‹ç»before/after</h1><p>CSSä¸­çš„beforeå’Œafterä¼ªç±»é€‰æ‹©å™¨æ—©åœ¨CSS2æ—¶å°±è¢«å¼•å…¥ï¼Œæ”¹å±æ€§è¢«æ‰€æœ‰ä¸»æµæµè§ˆå™¨æ‰€æ”¯æŒäº†ã€‚<br>beforeå’Œafteré¡¾åæ€ä¹‰ï¼Œåˆ†åˆ«æŒ‡çš„æ˜¯ä¼ªå…ƒç´ åœ¨å…ƒç´ å‰/åæ·»åŠ å†…å®¹ï¼Œ]]>
    </summary>
    
      <category term="CSS" scheme="http://qiutc.me/tags/CSS/"/>
    
      <category term="CSS" scheme="http://qiutc.me/categories/CSS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ä½¿ç”¨hexo+githubæ­å»ºé™æ€åšå®¢]]></title>
    <link href="http://qiutc.me/post/%E4%BD%BF%E7%94%A8hexo-github%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2.html"/>
    <id>http://qiutc.me/post/ä½¿ç”¨hexo-githubæ­å»ºé™æ€åšå®¢.html</id>
    <published>2015-10-04T03:01:31.000Z</published>
    <updated>2016-05-10T03:52:12.000Z</updated>
    <content type="html"><![CDATA[<h1 id="è®¤è¯†hexo">è®¤è¯†hexo</h1><p>&#8195;&#8195;hexoæ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶ï¼Œå¯ä»¥ç”Ÿæˆé™æ€æ–‡ä»¶å¹¶ä¸”ä¸€é”®éƒ¨ç½²åˆ°github pagesä¸Šï¼Œå¹¶ä¸”ä»–å¯ä»¥ä½¿ç”¨markdownæ¥ç¼–å†™æ–‡ç« ï¼Œååˆ†ç®€å•ã€‚</p>
<p>ä»–æœ‰è®¸å¤šä¼˜ç‚¹ï¼š</p>
<ul>
<li>å¿«é€Ÿï¼šhexoåŸºäºNode.jsï¼Œæ”¯æŒå¤šè¿›ç¨‹ï¼Œå‡ ç™¾ç¯‡æ–‡ç« å¯ä»¥ç§’ç”Ÿæˆã€‚</li>
<li>å†™æ–‡ç« æµç¨‹ï¼šæ”¯æŒGitHub Flavored Markdownå’Œæ‰€æœ‰Octopressçš„æ’ä»¶ã€‚</li>
<li>æ‰©å±•æ€§ï¼šHexoæ”¯æŒEJSã€Swigå’ŒStylusã€‚é€šè¿‡æ’ä»¶æ”¯æŒHamlã€Jadeå’ŒLessã€‚</li>
</ul>
<p><em>è¿™æ˜¯ä¸€ç¯‡ç”¨hexoåœ¨githubä¸Šé¢æ­å»ºåšå®¢çš„æ•™ç¨‹</em></p>
<hr>
<h1 id="å®‰è£…ï¼š">å®‰è£…ï¼š</h1><h2 id="ç³»ç»Ÿç¯å¢ƒï¼š">ç³»ç»Ÿç¯å¢ƒï¼š</h2><ul>
<li>ç³»ç»Ÿï¼š win10 64bit</li>
<li>ç¼–è¯‘å™¨ï¼š<a href="http://www.sublimetext.com/" target="_blank" rel="external">sublime text 3</a>ï¼ˆå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼‰</li>
<li>ç¼–ç ï¼š æŠŠæ–‡æœ¬ç¼–ç ç¡®å®šæˆ UTF-8</li>
</ul>
<h2 id="Git">Git</h2><ol>
<li>å¯ä»¥é€‰æ‹©å®‰è£…GitHub for Windows æˆ–è€… git ã€‚</li>
<li>æ³¨å†Œgithubï¼Œé€‰æ‹©Repositoriesï¼Œç„¶ånewæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œå»ºå¥½ä»“åº“ä¹‹åé€‰æ‹©settingsï¼Œåˆ°GitHub Pagesé‚£ä¸€æ ï¼Œé€‰æ‹©Launch automatic page generatorï¼Œæ¥ä¸‹å»å°±æ˜¯ç¡®å®šã€‚</li>
<li>ç„¶åå°±æ˜¯æŠŠä»“åº“cloneä¸‹æ¥ï¼Œå…³äºæ€ä¹ˆcloneå’Œä½¿ç”¨gitå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡å­—ã€‚</li>
</ol>
<h2 id="nodejs">nodejs</h2><p>ä¸‹è½½å®‰è£…<a href="https://nodejs.org/" target="_blank" rel="external">nodejs</a>ï¼Œnodejså®‰è£…åä¼šè‡ªåŠ¨å¸¦æœ‰npmåŒ…ï¼Œå¦‚æœå«Œå¤–ç½‘ä¸‹npmä¸‹è½½åŒ…æ–‡ä»¶æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥ä½¿ç”¨æ·˜å®çš„<a href="http://npm.taobao.org/" target="_blank" rel="external">cnpm</a>é•œåƒã€‚<br>nodejså®‰è£…å¥½ä¹‹åå¯ä»¥æ‰“å¼€å‘½ä»¤è¡Œï¼ˆwin+rï¼Œè¾“å…¥cmdï¼Œç¡®å®šï¼‰ï¼Œ<br>è¾“å…¥ node -v æŸ¥çœ‹nodejsç‰ˆæœ¬ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ node -v</span><br><span class="line">$ v0.<span class="number">12.7</span> <span class="comment">##ç‰ˆæœ¬å·</span></span><br></pre></td></tr></table></figure></p>
<p>è¾“å…¥ npm -v æŸ¥çœ‹npmç‰ˆæœ¬ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm -v</span><br><span class="line">$ v2.<span class="number">11.3</span> <span class="comment">##ç‰ˆæœ¬å·</span></span><br></pre></td></tr></table></figure></p>
<p>åˆ°è¿™é‡Œè¯´æ˜nodejså®‰è£…æˆåŠŸäº†ã€‚</p>
<h2 id="hexo">hexo</h2><p>æ‰“å¼€å‘½ä»¤è¡Œï¼Œæˆ‘è¿™é‡Œå®‰è£…çš„æ˜¯3.xç‰ˆæœ¬ï¼ˆåé¢å¯èƒ½ä¼šæœ‰ä¸ªå°å‘ï¼‰<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-cli -g <span class="operator">-d</span></span><br></pre></td></tr></table></figure></p>
<p>æŸ¥çœ‹hexoçš„ç‰ˆæœ¬å·ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo -v</span><br></pre></td></tr></table></figure></p>
<p>è¿›å…¥åˆ°æˆ‘ä»¬cloneçš„é‚£ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œå‘½ä»¤<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo init</span><br></pre></td></tr></table></figure></p>
<p>æ¥ç€å®‰è£…ä¾èµ–åŒ…ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install</span><br></pre></td></tr></table></figure></p>
<p>æ¥ç€å¯ä»¥å¯åŠ¨æœåŠ¡æµ‹è¯•ä¸€ä¸‹:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo s</span><br></pre></td></tr></table></figure></p>
<p>ç”¨æµè§ˆå™¨æ‰“å¼€<code>http://localhost:4000/</code>æˆ–è€…<code>http://127.0.0.1:4000/</code>å°±å¯ä»¥çœ‹åˆ°é¡µé¢äº†ã€‚</p>
<hr>
<h1 id="Hexoçš„ä½¿ç”¨">Hexoçš„ä½¿ç”¨</h1><h2 id="ç›®å½•å’Œæ–‡ä»¶">ç›®å½•å’Œæ–‡ä»¶</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ .deploy       <span class="preprocessor">#éœ€è¦éƒ¨ç½²çš„æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ node_modules  <span class="preprocessor">#Hexoæ’ä»¶</span></span><br><span class="line">â”œâ”€â”€ <span class="keyword">public</span>        <span class="preprocessor">#ç”Ÿæˆçš„é™æ€ç½‘é¡µæ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ scaffolds     <span class="preprocessor">#æ¨¡æ¿</span></span><br><span class="line">â”œâ”€â”€ source        <span class="preprocessor">#åšå®¢æ­£æ–‡å’Œå…¶ä»–æºæ–‡ä»¶, <span class="number">404</span> ã€favicon ã€CNAME</span></span><br><span class="line">|   â”œâ”€â”€ _drafts   <span class="preprocessor">#è‰ç¨¿</span></span><br><span class="line">|   â””â”€â”€ _posts    <span class="preprocessor">#æ–‡ç« </span></span><br><span class="line">â”œâ”€â”€ themes        <span class="preprocessor">#ä¸»é¢˜</span></span><br><span class="line">â”œâ”€â”€ _config.yml   <span class="preprocessor">#å…¨å±€é…ç½®æ–‡ä»¶</span></span><br><span class="line">â””â”€â”€ package.json</span><br></pre></td></tr></table></figure>
<p>ï¼ˆæœ‰äº›æ–‡ä»¶æ˜¯åœ¨éƒ¨ç½²æ—¶æ‰ä¼šäº§ç”Ÿçš„ï¼‰</p>
<h2 id="å…¨å±€ç«™ç‚¹é…ç½®æ–‡ä»¶_config-yml">å…¨å±€ç«™ç‚¹é…ç½®æ–‡ä»¶_config.yml</h2><p>ï¼ˆymlè¯­æ³•ä¸¥æ ¼ï¼Œæ³¨æ„å†’å·åé¢å¿…é¡»åŠ ç©ºæ ¼ï¼‰<br><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor"># Site #ç«™ç‚¹ä¿¡æ¯</span></span><br><span class="line"><span class="label">title:</span> Hexo <span class="preprocessor">#åšå®¢æ ‡é¢˜</span></span><br><span class="line"><span class="label">subtitle:</span> å•¦å•¦å•¦ <span class="preprocessor">#å‰¯æ ‡é¢˜</span></span><br><span class="line"><span class="label">description:</span> å“ˆå“ˆå“ˆ <span class="preprocessor">#æè¿°</span></span><br><span class="line"><span class="label">author:</span> John Doe <span class="preprocessor">#ä½œè€…</span></span><br><span class="line"><span class="label">language:</span> <span class="built_in">zh</span>-Hans <span class="preprocessor">#è¯­è¨€</span></span><br><span class="line"><span class="label">timezone:</span> Asia/Shanghai <span class="preprocessor">#æ—¶åŒº</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># URL #é“¾æ¥æ ¼å¼</span></span><br><span class="line"><span class="label">url:</span> http://yoursite.com <span class="preprocessor">#åšå®¢ç½‘å€</span></span><br><span class="line"><span class="label">root:</span> / <span class="preprocessor">#æ ¹ç›®å½•</span></span><br><span class="line"><span class="label">permalink:</span> :year/:month/:day/:title/ <span class="preprocessor">#æ–‡ç« çš„é“¾æ¥æ ¼å¼</span></span><br><span class="line"><span class="label">permalink_defaults:</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Directory #ç›®å½•</span></span><br><span class="line"><span class="label">source_dir:</span> source <span class="preprocessor">#æºæ–‡ä»¶</span></span><br><span class="line"><span class="label">public_dir:</span> public <span class="preprocessor">#ç”Ÿæˆçš„æ–‡ä»¶</span></span><br><span class="line"><span class="label">tag_dir:</span> tags <span class="preprocessor">#æ ‡ç­¾æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="label">archive_dir:</span> archives <span class="preprocessor">#å½’æ¡£æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="label">category_dir:</span> categories <span class="preprocessor">#åˆ†ç±»æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="label">code_dir:</span> downloads/code <span class="preprocessor">#ä¸‹è½½æ–‡ä»¶</span></span><br><span class="line"><span class="label">i18n_dir:</span> :lang <span class="preprocessor">#å›½é™…åŒ–</span></span><br><span class="line"><span class="label">skip_render:</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Writing #å†™ä½œ</span></span><br><span class="line"><span class="label">new_post_name:</span> :title.md <span class="preprocessor">#æ–‡ç« æ ‡é¢˜</span></span><br><span class="line"><span class="label">default_layout:</span> post <span class="preprocessor">#æ¨¡æ¿</span></span><br><span class="line"><span class="label">titlecase:</span> false <span class="preprocessor">#æ ‡é¢˜æ˜¯å¦æ¢æˆå°å†™</span></span><br><span class="line"><span class="label">external_link:</span> true <span class="preprocessor">#æ˜¯å¦åœ¨æ–°é¡µé¢æ‰“å¼€é“¾æ¥</span></span><br><span class="line"><span class="label">filename_case:</span> <span class="number">0</span></span><br><span class="line"><span class="label">render_drafts:</span> false</span><br><span class="line"><span class="label">post_asset_folder:</span> false</span><br><span class="line"><span class="label">relative_link:</span> false</span><br><span class="line"><span class="label">future:</span> true</span><br><span class="line"><span class="label">highlight:</span></span><br><span class="line">  enable: true</span><br><span class="line">  line_number: true</span><br><span class="line">  auto_detect: true</span><br><span class="line">  tab_replace:</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Category &amp; Tag #åˆ†ç±»å’Œæ ‡ç­¾</span></span><br><span class="line"><span class="label">default_category:</span> uncategorized</span><br><span class="line"><span class="label">category_map:</span></span><br><span class="line"><span class="label">tag_map:</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Date #æ—¶é—´æ—¥æœŸæ ¼å¼</span></span><br><span class="line"><span class="label">date_format:</span> YYYY-MM-DD</span><br><span class="line"><span class="label">time_format:</span> HH:mm:ss</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Pagination #åˆ†é¡µ</span></span><br><span class="line"><span class="label">per_page:</span> <span class="number">10</span> <span class="preprocessor">#æ¯é¡µæ–‡ç« æ•°</span></span><br><span class="line"><span class="label">pagination_dir:</span> page</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Extensions #æ’ä»¶å’Œä¸»é¢˜</span></span><br><span class="line"><span class="preprocessor">## Plugins: http://hexo.io/plugins/</span></span><br><span class="line"><span class="preprocessor">## Themes: http://hexo.io/themes/</span></span><br><span class="line"><span class="label">theme:</span> landscape</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Deployment #éƒ¨ç½²é…ç½®</span></span><br><span class="line"><span class="preprocessor">## Docs: http://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="label">deploy:</span></span><br><span class="line">  type:</span><br></pre></td></tr></table></figure></p>
<h2 id="ç«™ç‚¹çš„_config-yml_é…ç½®">ç«™ç‚¹çš„_config.yml é…ç½®</h2><h3 id="ç«™ç‚¹å»ºç«‹æ—¶é—´">ç«™ç‚¹å»ºç«‹æ—¶é—´</h3><p>ä¾‹å¦‚ <code>Â© 2015 - 2016</code><br>åœ¨æ–‡ä»¶æ·»åŠ ï¼š<br><figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">since</span>: <span class="string">2015</span></span><br></pre></td></tr></table></figure></p>
<h3 id="å¤´åƒè®¾ç½®">å¤´åƒè®¾ç½®</h3><p>/images/avatar.jpg //å¤´åƒå›¾ç‰‡æ”¾ç½®åœ¨ä¸»é¢˜çš„ source/images/<br>åœ¨æ–‡ä»¶æ·»åŠ ï¼š<br><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="string">avatar:</span> <span class="regexp">/images/</span>avatar.png</span><br></pre></td></tr></table></figure></p>
<h3 id="ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥">ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥</h3><p>å¢åŠ  social<br><figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor"># Social links</span></span><br><span class="line">social:</span><br><span class="line">  GitHub: https:<span class="comment">//github.com/tongchengqiu</span></span><br><span class="line">  Twitter: https:<span class="comment">//twitter.com/tongchengqiu</span></span><br><span class="line">  Zhihu: http:<span class="comment">//www.zhihu.com/people/tongchengqiu</span></span><br></pre></td></tr></table></figure></p>
<h2 id="å‹æƒ…é“¾æ¥">å‹æƒ…é“¾æ¥</h2><h3 id="æ ‡é¢˜">æ ‡é¢˜</h3><p>links_title: å‹æƒ…é“¾æ¥</p>
<h3 id="é“¾æ¥">é“¾æ¥</h3><p>links:<br>  Hexo: <a href="http://hexo.io/" target="_blank" rel="external">http://hexo.io/</a><br>  Lmintlcx: <a href="http://blog.lmintlcx.com/" target="_blank" rel="external">http://blog.lmintlcx.com/</a></p>
<h2 id="å‘½ä»¤çš„ä½¿ç”¨">å‘½ä»¤çš„ä½¿ç”¨</h2><figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">hexo help <span class="preprocessor">#æŸ¥çœ‹å¸®åŠ©</span></span><br><span class="line">hexo init <span class="preprocessor">#åˆå§‹åŒ–ç›®å½•</span></span><br><span class="line">hexo <span class="keyword">new</span> <span class="string">"postName"</span> <span class="preprocessor">#æ–°å»ºæ–‡ç« </span></span><br><span class="line">hexo <span class="keyword">new</span> page <span class="string">"pageName"</span> <span class="preprocessor">#æ–°å»ºé¡µé¢</span></span><br><span class="line">hexo generate <span class="preprocessor">#ç”Ÿæˆç½‘é¡µ, å¯ä»¥åœ¨publicç›®å½•æŸ¥çœ‹æ•´ä¸ªç½‘ç«™çš„æ–‡ä»¶</span></span><br><span class="line">hexo <span class="keyword">server</span> <span class="preprocessor">#æœ¬åœ°é¢„è§ˆ,'Ctrl+C'å…³é—­</span></span><br><span class="line">hexo deploy <span class="preprocessor">#éƒ¨ç½².deployç›®å½•</span></span><br><span class="line">hexo clean <span class="preprocessor">#æ¸…é™¤ç¼“å­˜, å»ºè®®æ¯æ¬¡æ‰§è¡Œå‘½ä»¤å‰å…ˆæ¸…ç†ç¼“å­˜</span></span><br><span class="line">hexo n == hexo <span class="keyword">new</span></span><br><span class="line">hexo g == hexo generate</span><br><span class="line">hexo s == hexo <span class="keyword">server</span></span><br><span class="line">hexo d == hexo deploy</span><br></pre></td></tr></table></figure>
<h2 id="å†™æ–‡ç« ">å†™æ–‡ç« </h2><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> <span class="string">"æ–‡ç« æ ‡é¢˜"</span></span><br></pre></td></tr></table></figure>
<p>ç„¶ååˆ°_post ç›®å½•ä¸‹æ‰“å¼€ æ–‡ç« æ ‡é¢˜.md<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">title: æ–‡ç« æ ‡é¢˜</span><br><span class="line">date: <span class="number">2015</span>-<span class="number">10</span>-<span class="number">3</span> <span class="number">11</span>:<span class="number">11</span>:<span class="number">11</span></span><br><span class="line">tags:</span><br><span class="line">- æ ‡ç­¾<span class="number">1</span></span><br><span class="line">- æ ‡ç­¾<span class="number">2</span></span><br><span class="line">- æ ‡ç­¾<span class="number">3</span></span><br><span class="line">categories: [åˆ†ç±»<span class="number">1</span>,åˆ†ç±»<span class="number">2</span>,åˆ†ç±»<span class="number">3</span>]</span><br><span class="line">---</span><br><span class="line">æ­£æ–‡, ä½¿ç”¨ Markdown è¯­æ³•ä¹¦å†™</span><br></pre></td></tr></table></figure></p>
<p>ç¼–è¾‘åå¯ä»¥å…ˆé¢„è§ˆ<br><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="title">hexo</span> clean</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åæ‰“å¼€æµè§ˆå™¨é¢„è§ˆ</p>
<h2 id="éƒ¨ç½²ä¸Šä¼ æ›´æ–°">éƒ¨ç½²ä¸Šä¼ æ›´æ–°</h2><p>ä»¥githubä¸ºä¾‹ï¼Œæ‰“å¼€ç«™ç‚¹æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼Œæ‰¾åˆ°deployéƒ¨åˆ†ï¼Œæ›´æ”¹é…ç½®<br><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repository</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:test/test.git #åœ¨ä»“åº“æ‰¾åˆ°è¯¥ä»“åº“çš„ssh</span><br><span class="line">  <span class="attribute">branch</span>: github-pages #åˆ†æ”¯ï¼Œè¿™é‡Œä¸ºgithub-pages</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå°±å¯ä»¥éƒ¨ç½²äº†ï¼Œåœ¨æ–‡ä»¶æ ¹ç›®å½•æ‰§è¡Œå‘½ä»¤è¡Œ<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œæœ‰å¯èƒ½ä¼šæŠ¥ä¸ªé”™è¯¯<code>ERROR Deployer not found : git</code><br>è¿™é‡Œéœ€è¦å®‰è£…ä¸€ä¸ªåŒ…<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå°±å¯ä»¥ç»§ç»­æ‰§è¡Œ<code>deploy</code>äº†ï¼Œç¬¬ä¸€æ¬¡éƒ¨ç½²å¯èƒ½ä¼šæœ‰ç‚¹æ…¢ï¼Œå¯ä»¥è€å¿ƒç­‰å€™å“¦ã€‚<br>æˆåŠŸä¹‹åå¯ä»¥ç»§ç»­æ‰“å¼€ä»“åº“çš„settingsï¼Œåœ¨GitHub Pagesä¼šçœ‹åˆ° Your site is published at <a href="http://qiutongcheng.com.ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ç»‘å®šåŸŸåå°±ä¼šæ˜¯githubç»™ä½ åˆ†é…çš„urlå“¦ï¼‰" target="_blank" rel="external">http://qiutongcheng.com.ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ç»‘å®šåŸŸåå°±ä¼šæ˜¯githubç»™ä½ åˆ†é…çš„urlå“¦ï¼‰</a><br>å°±å¯ä»¥æ‰“å¼€é“¾æ¥çœ‹çœ‹å’¯~</p>
<hr>
<h1 id="ç»‘å®šåŸŸå">ç»‘å®šåŸŸå</h1><p>å½“ç„¶æˆ‘ä»¬çš„ä¸ªäººåšå®¢å½“ç„¶å¸Œæœ›ç»‘å®šè‡ªå·±çš„ä¸€ä¸ªä¸ªæ€§åŸŸåå’¯~</p>
<h2 id="æ³¨å†Œè´­ä¹°é¡¶çº§åŸŸå">æ³¨å†Œè´­ä¹°é¡¶çº§åŸŸå</h2><p>å›½å†…è´­ä¹°å¯ä»¥ä¸Š<a href="http://wanwang.aliyun.com/" target="_blank" rel="external">ä¸‡ç½‘</a>ï¼›<br>å«Œå›½å†…ä¸å¥½å¯ä»¥ç”¨<a href="https://www.godaddy.com/" target="_blank" rel="external">godaddy</a>ã€‚</p>
<h2 id="DNSè®¾ç½®">DNSè®¾ç½®</h2><p>åœ¨è´­ä¹°åŸŸåçš„åå°ç®¡ç†è®¾ç½®DNS<br>ä¸»æœºè®°å½•@, ç±»å‹A, è®°å½•å€¼192.30.252.153<br>ä¸»æœºè®°å½•www, ç±»å‹A, è®°å½•å€¼192.30.252.153</p>
<h2 id="åœ¨githubç»‘å®šåŸŸå">åœ¨githubç»‘å®šåŸŸå</h2><p>åœ¨sourceæ–‡ä»¶å¤¹ä¸‹é¢æ–°å»º CNAMEï¼ˆä¸è¦åç¼€ï¼‰ï¼Œå†…å®¹è¾“å…¥è¦ç»‘å®šçš„åŸŸåï¼Œæ¯”å¦‚<br><code>qiutongcheng.com</code>æˆ–è€…<code>www.qiutongcheng.com</code>ã€‚</p>
<h2 id="ç»‘å®šå­åŸŸå">ç»‘å®šå­åŸŸå</h2><p>æ¯”å¦‚è¦ç»‘å®š <code>blog.qiutongcheng.com</code> ï¼š<br>å§CNAMEå†…å®¹æ”¹æˆ <code>blog.qiutongcheng.com</code><br>DNSè®¾ç½®é‡Œé¢æ·»åŠ  ä¸»æœºè®°å½•æœ‰blogï¼Œç±»å‹ CNAME ï¼Œè®°å½•å€¼ <code>blog.qiutongcheng.com</code></p>
<hr>
<h1 id="ä¸»é¢˜">ä¸»é¢˜</h1><p>hexoçš„<a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="external">(ä¸»é¢˜åˆ—è¡¨)</a><br>æˆ‘ä½¿ç”¨çš„æ˜¯ NexT ä¸»é¢˜ï¼Œè¿™é‡Œä¸€NexTä¸»é¢˜ä¸ºä¾‹å‰–æä¸€ä¸‹å§ã€‚</p>
<h2 id="ä¸‹è½½ä¸ä½¿ç”¨">ä¸‹è½½ä¸ä½¿ç”¨</h2><p>æ‰§è¡Œå‘½ä»¤è¡Œ<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next <span class="comment">#ä¸»é¢˜çš„åœ°å€</span></span><br></pre></td></tr></table></figure></p>
<p>ä¹Ÿå¯ä»¥ä¸‹è½½zipæ–‡ä»¶ï¼Œç„¶åæ‰‹åŠ¨è§£å‹åˆ°themesç›®å½•ä¸‹<br>é…ç½®å…¨å±€ç«™ç‚¹æ–‡ä»¶<code>_config.yml</code><br><figure class="highlight autoit"><table><tr><td class="code"><pre><span class="line">themes: <span class="keyword">next</span> <span class="preprocessor">#ä¸»é¢˜æ–‡ä»¶å¤¹å</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ä¸»é¢˜çš„ç›®å½•ç»“æ„">ä¸»é¢˜çš„ç›®å½•ç»“æ„</h2><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ languages          <span class="preprocessor">#å›½é™…åŒ–</span></span><br><span class="line">|   â”œâ”€â”€ <span class="keyword">default</span>.yml    <span class="preprocessor">#é»˜è®¤</span></span><br><span class="line">|   â””â”€â”€ zh-CN.yml      <span class="preprocessor">#ä¸­æ–‡</span></span><br><span class="line">â”œâ”€â”€ <span class="keyword">layout</span>             <span class="preprocessor">#å¸ƒå±€</span></span><br><span class="line">|   â”œâ”€â”€ _partial       <span class="preprocessor">#å±€éƒ¨çš„å¸ƒå±€</span></span><br><span class="line">|   â””â”€â”€ _widget        <span class="preprocessor">#å°æŒ‚ä»¶çš„å¸ƒå±€</span></span><br><span class="line">â”œâ”€â”€ script             <span class="preprocessor">#jsè„šæœ¬</span></span><br><span class="line">â”œâ”€â”€ source             <span class="preprocessor">#æºä»£ç æ–‡ä»¶</span></span><br><span class="line">|   â”œâ”€â”€ css            <span class="preprocessor">#CSS</span></span><br><span class="line">|   |   â”œâ”€â”€ _base      <span class="preprocessor">#åŸºç¡€CSS</span></span><br><span class="line">|   |   â”œâ”€â”€ _partial   <span class="preprocessor">#å±€éƒ¨CSS</span></span><br><span class="line">|   |   â”œâ”€â”€ fonts      <span class="preprocessor">#å­—ä½“</span></span><br><span class="line">|   |   â”œâ”€â”€ images     <span class="preprocessor">#å›¾ç‰‡</span></span><br><span class="line">|   |   â””â”€â”€ style.styl <span class="preprocessor">#style.css</span></span><br><span class="line">|   â”œâ”€â”€ fancybox       <span class="preprocessor">#fancybox</span></span><br><span class="line">|   â””â”€â”€ js             <span class="preprocessor">#js</span></span><br><span class="line">â”œâ”€â”€ _config.yml        <span class="preprocessor">#ä¸»é¢˜é…ç½®æ–‡ä»¶</span></span><br><span class="line">â””â”€â”€ README.md          <span class="preprocessor">#ä¸»é¢˜ä»‹ç»</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¸»é¢˜é…ç½®æ–‡ä»¶_config-ymlæ–‡ä»¶">ä¸»é¢˜é…ç½®æ–‡ä»¶_config.ymlæ–‡ä»¶</h2><p>æ‰“å¼€ä¸»é¢˜ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶<br><figure class="highlight vala"><table><tr><td class="code"><pre><span class="line">menu: #èœå•</span><br><span class="line">  home: / #é¦–é¡µ</span><br><span class="line">  archives: /archives #å½’æ¡£</span><br><span class="line">  #commonweal: /<span class="number">404.</span>html #<span class="number">404</span>é¡µé¢</span><br><span class="line">  #tags: /tags #æ ‡ç­¾</span><br><span class="line">  #categories: /categories #åˆ†ç±»</span><br><span class="line">  about: /about #å…³äº</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># å°å›¾æ ‡</span></span><br><span class="line">favicon: /favicon.ico</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># é»˜è®¤å…³é”®è¯</span></span><br><span class="line">keywords: <span class="string">"~"</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># ç•™ç©ºä½¿ç”¨é»˜è®¤çš„, false ç¦ç”¨, ä¹Ÿå¯ä»¥å†™æŒ‡å®šçš„åœ°å€</span></span><br><span class="line">rss:</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Icon fonts</span></span><br><span class="line"><span class="preprocessor"># default | linecons | fifty-shades | feather</span></span><br><span class="line">icon_font: <span class="keyword">default</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># ä»£ç é«˜äº®ä¸»é¢˜ https://github.com/chriskempson/tomorrow-theme</span></span><br><span class="line"><span class="preprocessor"># normal | night | night eighties | night blue | night bright</span></span><br><span class="line">highlight_theme: normal</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># MathJax Support #æ•°å­¦å…¬å¼</span></span><br><span class="line">mathjax: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Schemes #å¯ç”¨ä¸»é¢˜ä¸­çš„ä¸»é¢˜Mist</span></span><br><span class="line">scheme: Mist</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># ä¾§è¾¹æ </span></span><br><span class="line"><span class="preprocessor">#  - post    åªåœ¨æ–‡ç« é¡µé¢æ˜¾ç¤º</span></span><br><span class="line"><span class="preprocessor">#  - always  æ‰€æœ‰é¡µé¢æ˜¾ç¤º</span></span><br><span class="line"><span class="preprocessor">#  - hide    éšè—</span></span><br><span class="line">sidebar: always</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># è‡ªåŠ¨æ»šåŠ¨åˆ°"é˜…è¯»æ›´å¤š"æ ‡è®°çš„ä¸‹é¢</span></span><br><span class="line">scroll_to_more: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># è‡ªåŠ¨ç»™ç›®å½•æ·»åŠ åºå·</span></span><br><span class="line">toc_list_number: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># è‡ªåŠ¨æˆªå–æ‘˜è¦</span></span><br><span class="line">auto_excerpt:</span><br><span class="line">  enable: <span class="literal">false</span></span><br><span class="line">  length: <span class="number">150</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Lato å­—ä½“</span></span><br><span class="line">use_font_lato: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Make duoshuo show UA</span></span><br><span class="line"><span class="preprocessor"># user_id must NOT be null when admin_enable is true!</span></span><br><span class="line"><span class="preprocessor"># you can visit http://dev.duoshuo.com get duoshuo user id.</span></span><br><span class="line">duoshuo_info:</span><br><span class="line">  ua_enable: <span class="literal">true</span></span><br><span class="line">  admin_enable: <span class="literal">false</span></span><br><span class="line">  user_id: <span class="number">0</span></span><br><span class="line">  #admin_nickname: ROOT</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">## DO NOT EDIT THE FOLLOWING SETTINGS</span></span><br><span class="line"><span class="preprocessor">## UNLESS YOU KNOW WHAT YOU ARE DOING</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># åŠ¨ç”»</span></span><br><span class="line">use_motion: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Fancybox çœ‹å›¾æ’ä»¶</span></span><br><span class="line">fancybox: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Static files</span></span><br><span class="line">vendors: vendors</span><br><span class="line">css: css</span><br><span class="line">js: js</span><br><span class="line">images: images</span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Theme version</span></span><br><span class="line">version: <span class="number">0.4</span><span class="number">.5</span><span class="number">.1</span></span><br></pre></td></tr></table></figure></p>
<h3 id="é€‰æ‹©Scheme">é€‰æ‹©Scheme</h3><figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">scheme</span>: <span class="string">Mist</span></span><br></pre></td></tr></table></figure>
<h3 id="æ·»åŠ ç½‘ç«™å›¾æ ‡">æ·»åŠ ç½‘ç«™å›¾æ ‡</h3><p>å°†ç½‘ç«™å›¾æ ‡æ–‡ä»¶ favicon.ico æ”¾åˆ°sourceç›®å½•ä¸‹é¢<br>ä¿®æ”¹ä¸»é¢˜_config.ymlæ–‡ä»¶<br><figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">favicon</span>: <span class="string">/favicon.ico</span></span><br></pre></td></tr></table></figure></p>
<h3 id="èœå•è®¾ç½®">èœå•è®¾ç½®</h3><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="attribute">menu</span>:</span><br><span class="line">  <span class="attribute">home</span>: /</span><br><span class="line">  <span class="attribute">archives</span>: /archives</span><br><span class="line">  <span class="attribute">categories</span>: /categories</span><br><span class="line">  <span class="attribute">tags</span>: /tags</span><br><span class="line">  <span class="attribute">commonweal</span>: /<span class="number">404</span>.html</span><br><span class="line">  <span class="attribute">about</span>: /about</span><br></pre></td></tr></table></figure>
<h3 id="æ ‡ç­¾é¡µé¢">æ ‡ç­¾é¡µé¢</h3><p>æ‰§è¡Œå‘½ä»¤è¡Œ<br><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page <span class="string">"tags"</span></span><br></pre></td></tr></table></figure></p>
<p>åˆ°ç”Ÿæˆçš„é¡µé¢æ–‡ä»¶é‡Œ<br><figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line">title: tags</span><br><span class="line">date: 2015-10-4 22:37:08</span><br><span class="line">type: "tags"</span><br><span class="line"><span class="header">comments: false    #å…³é—­è¯„è®ºï¼ˆå»ºè®®ï¼‰</span><br><span class="line">---</span></span><br></pre></td></tr></table></figure></p>
<h3 id="åˆ†ç±»é¡µé¢">åˆ†ç±»é¡µé¢</h3><p>æ‰§è¡Œå‘½ä»¤è¡Œ<br><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page <span class="string">"categories"</span></span><br></pre></td></tr></table></figure></p>
<p>åˆ°ç”Ÿæˆçš„é¡µé¢æ–‡ä»¶é‡Œ<br><figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line">title: categories</span><br><span class="line">date: 2015-10-4 22:37:08</span><br><span class="line">type: "categories"</span><br><span class="line"><span class="header">comments: false    #å…³é—­è¯„è®ºï¼ˆå»ºè®®ï¼‰</span><br><span class="line">---</span></span><br></pre></td></tr></table></figure></p>
<h3 id="å…³äºé¡µé¢">å…³äºé¡µé¢</h3><p>æ‰§è¡Œå‘½ä»¤è¡Œ<br><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page <span class="string">"about"</span></span><br></pre></td></tr></table></figure></p>
<p>åˆ°ç”Ÿæˆçš„é¡µé¢æ–‡ä»¶é‡Œ<br><figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line">title: about</span><br><span class="line">date: 2015-10-4 22:37:08</span><br><span class="line">type: "about"</span><br><span class="line"><span class="header">comments: false    #å…³é—­è¯„è®ºï¼ˆå»ºè®®ï¼‰</span><br><span class="line">---</span></span><br></pre></td></tr></table></figure></p>
<h3 id="RSSé“¾æ¥">RSSé“¾æ¥</h3><p>ç¼–è¾‘ä¸»é¢˜çš„_config.ymlæ–‡ä»¶<br>ç¦æ­¢ï¼š<br><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="string">rss:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨ï¼š<br><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="label">rss:</span></span><br></pre></td></tr></table></figure></p>
<p>éœ€è¦å®‰è£…æ’ä»¶ hexo-generator-feed ï¼Œç»§ç»­çœ‹ä¸‹é¢æœ‰å®‰è£…æ’ä»¶æ•™ç¨‹<br>è‡ªå®šä¹‰ï¼š<br><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="label">rss:</span> url<span class="preprocessor">#è‡ªå®šä¹‰çš„åœ°å€</span></span><br></pre></td></tr></table></figure></p>
<h3 id="ä¾§è¾¹æ è®¾ç½®">ä¾§è¾¹æ è®¾ç½®</h3><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="label">sidebar:</span> post  <span class="preprocessor">#åªåœ¨æ–‡ç« é¡µé¢è‡ªåŠ¨æ˜¾ç¤º</span></span><br><span class="line"><span class="preprocessor">#sidebar: always #åœ¨æ‰€ä»¥é¡µé¢è‡ªåŠ¨æ˜¾ç¤º</span></span><br><span class="line"><span class="preprocessor">#sidebar: hide #å…¨éšè—</span></span><br></pre></td></tr></table></figure>
<h3 id="è…¾è®¯å…¬ç›Š_404_é¡µé¢">è…¾è®¯å…¬ç›Š 404 é¡µé¢</h3><p>source ç›®å½•ä¸‹æ–°å»º 404.html é¡µé¢<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE HTML&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"content-type"</span> <span class="attribute">content</span>=<span class="value">"text/html;charset=utf-8;"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"X-UA-Compatible"</span> <span class="attribute">content</span>=<span class="value">"IE=edge,chrome=1"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"robots"</span> <span class="attribute">content</span>=<span class="value">"all"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"robots"</span> <span class="attribute">content</span>=<span class="value">"index,follow"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"http://www.qq.com/404/search_children.js"</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span> <span class="attribute">homePageUrl</span>=<span class="value">"your-site-url"</span> <span class="attribute">homePageName</span>=<span class="value">"å›åˆ°æˆ‘çš„ä¸»é¡µ"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="é¦–é¡µæ–‡ç« æ‘˜å½•">é¦–é¡µæ–‡ç« æ‘˜å½•</h3><p>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶æ·»åŠ <br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">auto_excerpt:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  length: <span class="number">150</span> <span class="preprocessor">#é»˜è®¤æˆªå–çš„é•¿åº¦ä¸º <span class="number">150</span> å­—ç¬¦</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="æ‰©å±•">æ‰©å±•</h1><h2 id="è¯„è®ºç³»ç»Ÿ">è¯„è®ºç³»ç»Ÿ</h2><h3 id="å¤šè¯´è¯„è®ºç³»ç»Ÿ">å¤šè¯´è¯„è®ºç³»ç»Ÿ</h3><p>æ³¨å†Œ<a href="http://duoshuo.com/" target="_blank" rel="external">å¤šè¯´</a>ï¼Œé…ç½®åŸŸåç«™ç‚¹åŸŸå xxx.duoshuo.com<br>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶æ·»åŠ ï¼š<br><figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">duoshuo_shortname</span>: <span class="string">xxx</span></span><br></pre></td></tr></table></figure></p>
<h2 id="è®¾ç½®ç½‘ç«™ç»Ÿè®¡">è®¾ç½®ç½‘ç«™ç»Ÿè®¡</h2><h3 id="ç™¾åº¦ç»Ÿè®¡">ç™¾åº¦ç»Ÿè®¡</h3><p>ç™»é™†æ³¨å†Œ<a href="http://tongji.baidu.com/web/welcome/login" target="_blank" rel="external">ç™¾åº¦ç»Ÿè®¡</a>ï¼Œé…ç½®ååˆ°ä»£ç è·å–é¡µé¢ï¼Œ<br>æ‰¾åˆ°ä»£ç é‡Œ <code>hm?js</code> å¤åˆ¶åé¢ä¸€ä¸²å­—ç¬¦ä¸²ID  xxx<br>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶æ·»åŠ ï¼š<br><figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">baidu_analytics</span>: <span class="string">xxxxxxxxxxxxxxxx</span></span><br></pre></td></tr></table></figure></p>
<h2 id="åˆ†äº«">åˆ†äº«</h2><h3 id="ç™¾åº¦åˆ†äº«">ç™¾åº¦åˆ†äº«</h3><p>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶æ·»åŠ ï¼š<br><figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor"># ç™¾åº¦åˆ†äº«æœåŠ¡</span></span><br><span class="line">baidushare: <span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<h3 id="å¤šè¯´åˆ†äº«">å¤šè¯´åˆ†äº«</h3><p>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶æ·»åŠ ï¼š<br><figure class="highlight vala"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor"># å¤šè¯´åˆ†äº«æœåŠ¡</span></span><br><span class="line">duoshuo_share: <span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ç‰ˆæƒåè®®">ç‰ˆæƒåè®®</h2><p>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶æ·»åŠ ï¼š<br><figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"># Creative Commons 4.0 International License.</span><br><span class="line"># http:<span class="comment">//creativecommons.org/</span></span><br><span class="line"># Available: <span class="keyword">by</span> | <span class="keyword">by</span>-nc | <span class="keyword">by</span>-nc-nd | <span class="keyword">by</span>-nc-<span class="keyword">sa</span> | <span class="keyword">by</span>-nd | <span class="keyword">by</span>-<span class="keyword">sa</span> | zero</span><br><span class="line">creative_commons: <span class="keyword">by</span>-nc-<span class="keyword">sa</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ç½‘ç«™è®¿é—®é‡ç»Ÿè®¡">ç½‘ç«™è®¿é—®é‡ç»Ÿè®¡</h2><p>ä½¿ç”¨ <a href="http://service.ibruce.info/" target="_blank" rel="external">ä¸è’œå­</a> æä¾›çš„æœåŠ¡<br>ç®—æ³•a: pvçš„æ–¹å¼, å•ä¸ªç”¨æˆ·è¿ç»­ç‚¹å‡»nç¯‡æ–‡ç« , è®°å½•næ¬¡è®¿é—®é‡.<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"busuanzi_container_site_pv"</span>&gt;</span></span><br><span class="line">    æœ¬ç«™æ€»è®¿é—®é‡<span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"busuanzi_value_site_pv"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>æ¬¡</span><br><span class="line"><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>ç®—æ³•b: uvçš„æ–¹å¼, å•ä¸ªç”¨æˆ·è¿ç»­ç‚¹å‡»nç¯‡æ–‡ç« , åªè®°å½•1æ¬¡è®¿å®¢æ•°.<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"busuanzi_container_site_uv"</span>&gt;</span></span><br><span class="line">  æœ¬ç«™è®¿å®¢æ•°<span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"busuanzi_value_site_uv"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>äººæ¬¡</span><br><span class="line"><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æ‰¾åˆ°themes/next/layout/partials/footer.wsigæ–‡ä»¶<br>åœ¨æœ€åä¸€è¡Œå‰é¢æ·»åŠ <br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">async</span> <span class="attribute">src</span>=<span class="value">"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"busuanzi_container_site_pv"</span>&gt;</span></span><br><span class="line">    æœ¬ç«™æ€»è®¿é—®é‡<span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"busuanzi_value_site_pv"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>æ¬¡</span><br><span class="line"><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ç½‘ç«™è¿è¡Œæ—¶é—´">ç½‘ç«™è¿è¡Œæ—¶é—´</h2><p>åœ¨æœ€åä¸€è¡Œå‰é¢æ·»åŠ <br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line"><span class="keyword">var</span> birthDay = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"11/20/2014"</span>);</span><br><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">var</span> duration = now.getTime() - birthDay.getTime();</span><br><span class="line"><span class="keyword">var</span> total= <span class="built_in">Math</span>.floor(duration / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"showDays"</span>).innerHTML = <span class="string">"æœ¬ç«™å·²è¿è¡Œ "</span>+total+<span class="string">" å¤©"</span>;</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"showDays"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="è®¤è¯†hexo">è®¤è¯†hexo</h1><p>&#8195;&#8195;hexoæ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶ï¼Œå¯ä»¥ç”Ÿæˆé™æ€æ–‡ä»¶å¹¶ä¸”ä¸€é”®éƒ¨ç½²åˆ°github pagesä¸Šï¼Œå¹¶ä¸”ä»–å¯ä»¥ä½¿ç”¨markdownæ¥ç¼–å†™æ–‡ç« ï¼Œååˆ†ç®€å•ã€‚</p>
<p>ä»–æœ‰è®¸å¤šä¼˜ç‚¹ï¼š</]]>
    </summary>
    
      <category term="hexo" scheme="http://qiutc.me/tags/hexo/"/>
    
      <category term="hexo" scheme="http://qiutc.me/categories/hexo/"/>
    
  </entry>
  
</feed>
