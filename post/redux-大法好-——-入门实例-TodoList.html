<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta baidu-gxt-verify-token="ca8f032797b876ef3be37c3d492168a0">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="baidu-site-verification" content="fRBucd9VmI" />


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />









  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="hello word! ğŸ˜º" />



  <meta name="keywords" content="FE,react,redux," />



  <link rel="alternate" href="/atom.xml" title="é˜¿åŸçš„blog" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="Tipå‰ç«¯æŠ€æœ¯çœŸæ˜¯æ—¥æ–°æœˆå¼‚ï¼Œæå®Œ React ä¸æ­é…ä¸ªæ•°æ®æµéƒ½ä¸å¥½æ„æ€äº†ã€‚æ»¡æ€€æœŸå¾…çš„å¿ƒå»ç¿»äº†ç¿» fluxï¼Œç®€ç›´è¢«å®˜æ–¹é‚£æ„è¯†æµçš„æ–‡æ¡£æŠ˜æœäº†ï¼ŒçœŸæ˜¯åˆè‡­åˆé•¿è¿˜æ˜¯æˆ‘æ™ºå•†é—®é¢˜ï¼ŸğŸ˜–è½¬æˆ˜ redux ï¼Œè¶Šçœ‹è¶Šæœ‰æ„æ€ï¼Œè·Ÿç€æ–‡æ¡£åšäº†ä¸ª TodoList çš„å…¥é—¨å°ä¾‹å­ã€‚
åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆè´´ä¸Šæ–‡ç« ç”¨åˆ°ä¾‹å­çš„æºç  https://github.com/TongchengQiu/TodoList-as-redux-demo">
<meta property="og:type" content="article">
<meta property="og:title" content="redux å¤§æ³•å¥½ â€”â€” å…¥é—¨å®ä¾‹ TodoList">
<meta property="og:url" content="http://qiutc.me/post/redux-å¤§æ³•å¥½-â€”â€”-å…¥é—¨å®ä¾‹-TodoList.html">
<meta property="og:site_name" content="é˜¿åŸçš„blog">
<meta property="og:description" content="Tipå‰ç«¯æŠ€æœ¯çœŸæ˜¯æ—¥æ–°æœˆå¼‚ï¼Œæå®Œ React ä¸æ­é…ä¸ªæ•°æ®æµéƒ½ä¸å¥½æ„æ€äº†ã€‚æ»¡æ€€æœŸå¾…çš„å¿ƒå»ç¿»äº†ç¿» fluxï¼Œç®€ç›´è¢«å®˜æ–¹é‚£æ„è¯†æµçš„æ–‡æ¡£æŠ˜æœäº†ï¼ŒçœŸæ˜¯åˆè‡­åˆé•¿è¿˜æ˜¯æˆ‘æ™ºå•†é—®é¢˜ï¼ŸğŸ˜–è½¬æˆ˜ redux ï¼Œè¶Šçœ‹è¶Šæœ‰æ„æ€ï¼Œè·Ÿç€æ–‡æ¡£åšäº†ä¸ª TodoList çš„å…¥é—¨å°ä¾‹å­ã€‚
åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆè´´ä¸Šæ–‡ç« ç”¨åˆ°ä¾‹å­çš„æºç  https://github.com/TongchengQiu/TodoList-as-redux-demo">
<meta property="og:image" content="http://qiutc.me/img/redux.jpeg">
<meta property="og:updated_time" content="2016-03-12T01:38:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="redux å¤§æ³•å¥½ â€”â€” å…¥é—¨å®ä¾‹ TodoList">
<meta name="twitter:description" content="Tipå‰ç«¯æŠ€æœ¯çœŸæ˜¯æ—¥æ–°æœˆå¼‚ï¼Œæå®Œ React ä¸æ­é…ä¸ªæ•°æ®æµéƒ½ä¸å¥½æ„æ€äº†ã€‚æ»¡æ€€æœŸå¾…çš„å¿ƒå»ç¿»äº†ç¿» fluxï¼Œç®€ç›´è¢«å®˜æ–¹é‚£æ„è¯†æµçš„æ–‡æ¡£æŠ˜æœäº†ï¼ŒçœŸæ˜¯åˆè‡­åˆé•¿è¿˜æ˜¯æˆ‘æ™ºå•†é—®é¢˜ï¼ŸğŸ˜–è½¬æˆ˜ redux ï¼Œè¶Šçœ‹è¶Šæœ‰æ„æ€ï¼Œè·Ÿç€æ–‡æ¡£åšäº†ä¸ª TodoList çš„å…¥é—¨å°ä¾‹å­ã€‚
åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆè´´ä¸Šæ–‡ç« ç”¨åˆ°ä¾‹å­çš„æºç  https://github.com/TongchengQiu/TodoList-as-redux-demo">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'hide'
  };
</script>
<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

  <title> redux å¤§æ³•å¥½ â€”â€” å…¥é—¨å®ä¾‹ TodoList | é˜¿åŸçš„blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?47d302b006bf28a09c22990da53cd3da";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">é˜¿åŸçš„blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br />
            å…³äº
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>
 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              redux å¤§æ³•å¥½ â€”â€” å…¥é—¨å®ä¾‹ TodoList
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          å‘è¡¨äº
          <time itemprop="dateCreated" datetime="2015-12-21T14:24:43+08:00" content="2015-12-21">
            2015-12-21
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; åˆ†ç±»äº
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/redux/" itemprop="url" rel="index">
                  <span itemprop="name">redux</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/post/redux-å¤§æ³•å¥½-â€”â€”-å…¥é—¨å®ä¾‹-TodoList.html#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="post/redux-å¤§æ³•å¥½-â€”â€”-å…¥é—¨å®ä¾‹-TodoList.html" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><p><img src="/img/redux.jpeg" alt="redux"></p>
<h1 id="Tip">Tip</h1><p>å‰ç«¯æŠ€æœ¯çœŸæ˜¯æ—¥æ–°æœˆå¼‚ï¼Œæå®Œ React ä¸æ­é…ä¸ªæ•°æ®æµéƒ½ä¸å¥½æ„æ€äº†ã€‚<br>æ»¡æ€€æœŸå¾…çš„å¿ƒå»ç¿»äº†ç¿» fluxï¼Œç®€ç›´è¢«å®˜æ–¹é‚£æ„è¯†æµçš„æ–‡æ¡£æŠ˜æœäº†ï¼ŒçœŸæ˜¯åˆè‡­åˆé•¿è¿˜æ˜¯æˆ‘æ™ºå•†é—®é¢˜ï¼ŸğŸ˜–<br>è½¬æˆ˜ redux ï¼Œè¶Šçœ‹è¶Šæœ‰æ„æ€ï¼Œè·Ÿç€æ–‡æ¡£åšäº†ä¸ª TodoList çš„å…¥é—¨å°ä¾‹å­ã€‚</p>
<p>åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆè´´ä¸Šæ–‡ç« ç”¨åˆ°ä¾‹å­çš„æºç  <a href="https://github.com/TongchengQiu/TodoList-as-redux-demo" target="_blank" rel="external">https://github.com/TongchengQiu/TodoList-as-redux-demo</a><br>redux çš„ Github ä»“åº“ <a href="https://github.com/rackt/redux" target="_blank" rel="external">https://github.com/rackt/redux</a><br>è¿˜æœ‰ä¸ªä¸­æ–‡çš„ gitbook ç¿»è¯‘æ–‡æ¡£ <a href="http://camsong.github.io/redux-in-chinese/index.html" target="_blank" rel="external">http://camsong.github.io/redux-in-chinese/index.html</a></p>
<h1 id="advantage">advantage</h1><p>éšç€spaï¼ˆä¸æ˜¯SPAï¼Œæ˜¯å•é¡µåº”ç”¨ï¼‰çš„å‘å±•ï¼Œä»¥ react æ¥è¯´ï¼Œç»„ä»¶åŒ–å’ŒçŠ¶æ€æœºçš„æ€æƒ³çœŸæ˜¯è§£æ”¾äº†çƒ¦æ¼çš„ dom æ“ä½œï¼Œä¸€åˆ‡éƒ½ä¸ºçŠ¶æ€ã€‚state æ¥æ“çºµ views çš„å˜åŒ–ã€‚<br>ç„¶è€Œï¼Œå› ä¸ºé¡µé¢çš„ç»„ä»¶åŒ–ï¼Œå¯¼è‡´æ¯ä¸ªç»„ä»¶éƒ½å¿…é¡»ç»´æŠ¤è‡ªèº«çš„ä¸€å¥—çŠ¶æ€ï¼Œå¯¹äºå°å‹åº”ç”¨è¿˜å¥½ã€‚<br>ä½†æ˜¯å¯¹äºæ¯”è¾ƒå¤§çš„åº”ç”¨æ¥è¯´ï¼Œè¿‡å¤šçš„çŠ¶æ€æ˜¾å¾—é”™ç»¼å¤æ‚ï¼Œåˆ°æœ€åéš¾ä»¥ç»´æŠ¤ï¼Œå¾ˆéš¾æ¸…æ™°åœ°ç»„ç»‡æ‰€æœ‰çš„çŠ¶æ€ï¼Œåœ¨å¤šäººå¼€å‘ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¯¼è‡´ç»å¸¸ä¼šå‡ºç°ä¸€äº›ä¸æ˜æ‰€ä»¥çš„å˜åŒ–ï¼Œè¶Šåˆ°åé¢è°ƒè¯•ä¸Šä¹Ÿæ˜¯è¶Šéº»çƒ¦ï¼Œå¾ˆå¤šæ—¶å€™ state çš„å˜åŒ–å·²ç»ä¸å—æ§åˆ¶ã€‚å¯¹äºç»„ä»¶é—´é€šè¡Œã€æœåŠ¡ç«¯æ¸²æŸ“ã€è·¯ç”±è·³è½¬ã€æ›´æ–°è°ƒè¯•ï¼Œæˆ‘ä»¬å¾ˆéœ€è¦ä¸€å¥—æœºåˆ¶æ¥æ¸…æ™°çš„ç»„ç»‡æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€ï¼Œredux åº”ç„¶è€Œç”Ÿï¼Œè¿™ç§æ•°æ®æµçš„æ€æƒ³çœŸæ˜¯äº†ä¸èµ·ã€‚</p>
<h1 id="state_æ ¹å¯¹è±¡çš„ç»“æ„">state æ ¹å¯¹è±¡çš„ç»“æ„</h1><p>åœ¨ react ä¸­ï¼Œæˆ‘ä»¬å°½é‡ä¼šæŠŠçŠ¶æ€æ”¾åœ¨é¡¶å±‚çš„ç»„ä»¶ï¼Œåœ¨é¡¶å±‚ç»„ä»¶ä½¿ç”¨ redux æˆ–è€… routerã€‚<br>è¿™å°±æŠŠç»„ä»¶åˆ†ä¸ºäº†ä¸¤ç§ï¼šå®¹å™¨ç»„ä»¶å’Œå±•ç¤ºç»„ä»¶ã€‚<br>å®¹å™¨ç»„ä»¶ï¼šå’Œ redux å’Œ router äº¤äº’ï¼Œç»´æŠ¤ä¸€å¥—çŠ¶æ€å’Œè§¦å‘ actionã€‚<br>å±•ç¤ºç»„ä»¶ï¼šå±•ç¤ºç»„ä»¶æ˜¯åœ¨å®¹å™¨ç»„ä»¶çš„å†…éƒ¨ï¼Œä»–ä»¬ä¸ç»´æŠ¤çŠ¶æ€ï¼Œæ‰€æœ‰æ•°æ®é€šè¿‡ props ä¼ ç»™ä»–ä»¬ï¼Œæ‰€æœ‰æ“ä½œä¹Ÿæ˜¯é€šè¿‡å›è°ƒå®Œæˆã€‚<br>è¿™æ ·ï¼Œæˆ‘ä»¬æ•´å¥—åº”ç”¨çš„æ¶æ„å°±æ˜¾å¾—æ¸…æ™°äº†ã€‚</p>
<h1 id="part">part</h1><p>redux åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼Œstore ï¼Œ action ï¼Œreducer ã€‚</p>
<h2 id="store">store</h2><p>æ•´ä¸ªåº”ç”¨çš„ state è¢«å‚¨å­˜åœ¨ä¸€æ£µ object tree ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª object tree åªå­˜åœ¨äºå”¯ä¸€ä¸€ä¸ª store ä¸­ã€‚<br>æˆ–è€…è¿™ä¹ˆè¯´ store çš„æŒ‡è´£æœ‰è¿™äº›ï¼š</p>
<ul>
<li>ç»´æŠ¤æ•´ä¸ªåº”ç”¨çš„ state</li>
<li>æä¾› getState() æ–¹æ³•è·å– stateï¼›</li>
<li>æä¾› dispatch(action) æ–¹æ³•æ›´æ–° stateï¼›</li>
<li>é€šè¿‡ subscribe(listener) æ³¨å†Œç›‘å¬å™¨ã€‚</li>
</ul>
<p>è¿™ä¹ˆè§£é‡Šä¸€ä¸‹ï¼Œæ•´ä¸ªåº”ç”¨çš„ state éƒ½å‚¨å­˜åœ¨ store ä¸­ï¼Œå®¹å™¨ç»„ä»¶å¯ä»¥ä» store ä¸­è·å–æ‰€éœ€è¦çš„çŠ¶æ€ã€‚<br>å®¹å™¨ç»„ä»¶åŒæ—¶ä¹Ÿå¯ä»¥å‘é€ç»™ store ä¸€ä¸ª actionï¼Œå‘Šè¯‰ä»–æ”¹å˜æŸä¸ªçŠ¶æ€çš„å€¼ï¼Œæ‰€ä»¥è¯´å®¹å™¨ç»„ä»¶åªè¦å‘é€ä¸€ä¸ªæŒ‡ä»¤ï¼Œå°±å¯ä»¥å« store å» setStateï¼Œç„¶å store çš„ state æ”¹å˜ï¼Œå›è¿‡æ¥å®¹å™¨ç»„ä»¶è·å–åˆ°çš„ state æ”¹å˜ï¼Œå¯¼è‡´ views çš„æ›´æ–°ã€‚</p>
<h2 id="action">action</h2><p>action å¯ä»¥ç†è§£ä¸ºä¸€ç§æŒ‡ä»¤ï¼Œstore æ•°æ®çš„å”¯ä¸€ç”±æ¥å°±æ˜¯ actionï¼Œaction æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒéœ€è¦è‡³å°‘ä¸€ä¸ªå…ƒç´ ï¼Œtypeï¼Œtype æ˜¯è¿™ä¸ªæŒ‡ä»¤çš„å”¯ä¸€æ ‡è¯†ï¼Œå…¶å®ƒå…ƒç´ æ˜¯ä¼ é€è¿™ä¸ªæŒ‡ä»¤çš„ state å€¼<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">type</span>:<span class="value"> ACTION_TYPE,</span><br><span class="line">  text: â€œcontentâ€,</span><br><span class="line"></span></span></span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæŒ‡ä»¤ç”±ç»„ä»¶è§¦å‘ï¼Œç„¶åä¼ åˆ° reducerã€‚</p>
<h2 id="reducer">reducer</h2><p>action åªæ˜¯è¯´æ˜äº†è¦å»åšä»€ä¹ˆï¼Œå’Œåšè¿™ä»¶äº‹æƒ…éœ€è¦çš„å‚æ•°å€¼ã€‚<br>å…·ä½“å»æ”¹å˜ store ä¸­çš„ state æ˜¯ç”± reducer æ¥åšçš„ã€‚<br>reducer å…¶å®æ˜¯ä¸€ä¸ªåŒ…å« switch çš„å‡½æ•°ï¼Œå‰é¢ä¸æ˜¯è¯´ç»„ä»¶è§¦å‘çš„ action ä¼šä¼ é€’åˆ° reducerï¼Œreducer æ¥æ”¶è¿™ä¸ªå‚æ•° actionï¼Œä»–é€šè¿‡ switch(action.type) ç„¶ååšä¸åŒæ“ä½œï¼Œå‰é¢è¯´äº†ï¼Œè¿™ä¸ª type æ˜¯æŒ‡ä»¤çš„æ ‡è¯†ï¼Œreducer æ ¹æ®è¿™ä¸ªæ ‡è¯†æ¥ä½œå‡ºä¸åŒçš„æ“ä½œã€‚<br>è¿™ä¸ªæ“ä½œæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>reducer è¿˜æ¥æ”¶å¦ä¸€ä¸ªå‚æ•° stateï¼Œè¿™ä¸ªæ˜¯æ—§çš„ stateã€‚ä» action é‡Œé¢è¿˜å¯ä»¥è·å–åˆ°åšè¿™ä¸ªæ“ä½œéœ€è¦çš„ å‚æ•°å€¼ã€‚<br>è¿™ä¸ªæ“ä½œå…¶å®å°±æ˜¯å¯¹åŸæœ‰çš„ state å’Œ ä» action ä¸­çš„åˆ°çš„å€¼ï¼Œæ¥è¿›è¡Œæ“ä½œï¼ˆç»“åˆï¼Œåˆ é™¤ï¼Œâ€¦ï¼‰ç„¶åè¿”å›ä¸€ä¸ª æ–°çš„ state åˆ° storeã€‚</p>
<h2 id="æ•°æ®æµ">æ•°æ®æµ</h2><p>æŠŠå‰é¢çš„è¯­è¨€ç»„ç»‡ä¸€ä¸‹ï¼Œæ•´ä¸ªæ“ä½œçš„æ•°æ®æµå…¶å®æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>store æŠŠæ•´ä¸ªåº”ç”¨çš„ stateï¼ŒgetState()ï¼Œdispatch()ï¼Œsubscribe() ä¼ ç»™é¡¶å±‚å®¹å™¨ç»„ä»¶ï¼›</li>
<li>å®¹å™¨ç»„ä»¶å’Œä¸‰ä¸ªéƒ¨åˆ†äº¤äº’ï¼š<ul>
<li>å†…éƒ¨çš„å±•ç¤ºç»„ä»¶ï¼šå®¹å™¨æŠŠçŠ¶æ€åˆ†å‘ç»™å„ä¸ªç»„ä»¶ï¼ŒæŠŠ dispatchï¼ˆæ“ä½œæ•°æ®çš„å‡½æ•°ï¼‰ä»¥å›è°ƒçš„å½¢å¼åˆ†å‘ç»™å„ä¸ªç»„ä»¶ï¼›</li>
<li>actionï¼šå®¹å™¨è·å– actionï¼›</li>
<li>reducerï¼šå®¹å™¨å¯ä»¥è°ƒç”¨ dispatch(action)ï¼Œè¿™ä¸ªä¸Šé¢è¯´äº†ï¼Œä¼šä»¥å›è°ƒçš„å½¢å¼ç»™ä¸‹é¢çš„å­ç»„ä»¶ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®ä¸åŒçš„ç”¨æˆ·æ“ä½œï¼Œè°ƒç”¨ä¸åŒçš„ dispatch(action)ï¼Œæ‰§è¡Œäº†è¿™ä¸ªå‡½æ•°ä¹‹åï¼Œå°±æŠŠ action ä¼ ç»™ reducerï¼Œç„¶åçœ‹ reducerï¼›</li>
</ul>
</li>
<li>reducer å¾—åˆ°å®¹å™¨ç»„ä»¶ä¼ æ¥çš„ action ä¹‹åï¼Œæ ¹æ® action.type è¿™ä¸ªå‚æ•°æ‰§è¡Œä¸åŒæ“ä½œï¼Œä»–è¿˜ä¼šæ¥æ”¶åˆ° store é‡Œé¢çš„åŸ stateï¼Œç„¶åæŠŠåŸ state å’Œ action å¯¹è±¡é‡Œé¢çš„å…¶å®ƒå‚æ•°è¿›è¡Œæ“ä½œï¼Œç„¶å return ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</li>
<li>reducer return ä¸€ä¸ªæ–°çš„å¯¹è±¡åˆ° storeï¼Œstore æ ¹æ®è¿™ä¸ªæ–°å¯¹è±¡ï¼Œæ›´æ–°åº”ç”¨çŠ¶æ€ã€‚</li>
</ol>
<p>ï¼ï¼ï¼ï¼ä¸€ä¸ªå¾ªç¯ â™»ï¸</p>
<h1 id="connect">connect</h1><p>Redux å’Œ React ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œä»–ä»¬å¹¶è¡¥äº’ç›¸ä¾èµ–ï¼Œä½†æ˜¯ Redux å’Œ React æ­é…èµ·æ¥ç®€ç›´å®Œç¾ã€‚<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡ react-redux è¿™ä¸ªåº“æŠŠä»–ä»¬ç»‘å®šèµ·æ¥<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> <span class="comment">--save react-redux</span></span></span><br></pre></td></tr></table></figure></p>
<p>react-redux æä¾›ä¸¤ä¸ªä¸œè¥¿ Provider å’Œ connectã€‚</p>
<h2 id="Provider">Provider</h2><p>è¿™ä¸ª Provider å…¶å®å°±æ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œä»–æ˜¯åœ¨åŸæœ‰ App Container ä¸Šé¢å†åŒ…ä¸€å±‚ï¼Œä»–çš„ä½œç”¨å°±æ˜¯æ¥æ”¶ store é‡Œé¢çš„ store ä½œä¸º propsï¼Œå°†storeæ”¾åœ¨contexté‡Œï¼Œç»™ä¸‹é¢çš„connectç”¨çš„ã€‚</p>
<h2 id="connect-1">connect</h2><p>è¿™ä¸ªç»„ä»¶æ‰æ˜¯çœŸæ­£è¿æ¥ Redux å’Œ Reactï¼Œä»–åŒ…åœ¨æˆ‘ä»¬çš„å®¹å™¨ç»„ä»¶çš„å¤–ä¸€å±‚ï¼Œä»–æ¥æ”¶ä¸Šé¢ Provider æä¾›çš„ store é‡Œé¢çš„ state å’Œ dispatchï¼Œä¼ ç»™ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥å±æ€§å½¢å¼åºŠç»™æˆ‘ä»¬çš„å®¹å™¨ç»„ä»¶ã€‚</p>
<h1 id="å®æˆ˜_TodoList">å®æˆ˜ TodoList</h1><p>è¿™ä¸ªé¡¹ç›®ä½¿ç”¨ webpack æ¥æ„å»ºï¼Œæƒ³è¦äº†è§£ webpack çš„é…ç½®å¯ä»¥çœ‹æˆ‘çš„å…¶å®ƒä¸¤ç¯‡æ–‡ç« ï¼š<br><a href="http://qiutc.me/post/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8webpack%E2%80%94webpack-howto.html">å¦‚ä½•ä½¿ç”¨webpackâ€”webpack-howto</a>;<br><a href="http://qiutc.me/post/webpack-best-practice-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-%E9%83%A8%E7%BD%B2%E7%94%9F%E4%BA%A7.html">webpack-best-practice-æœ€ä½³å®è·µ-éƒ¨ç½²ç”Ÿäº§</a>.</p>
<h2 id="ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</h2><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ app                 <span class="comment">#å¼€å‘ç›®å½•</span></span><br><span class="line">|<span class="string">   </span>|<span class="string">   </span><br><span class="line"></span>|<span class="string">   â”œâ”€â”€actions          #actionçš„æ–‡ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span><br><span class="line"></span>|<span class="string">   â”œâ”€â”€components       #å†…éƒ¨ç»„ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span><br><span class="line"></span>|<span class="string">   â”œâ”€â”€containers       #å®¹å™¨ç»„ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span><br><span class="line"></span>|<span class="string">   â”œâ”€â”€reducers         #reduceræ–‡ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|<span class="string">   </span><br><span class="line"></span>|<span class="string">   â”œâ”€â”€stores           #storeé…ç½®æ–‡ä»¶</span><br><span class="line"></span>|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   â””â”€â”€index.js         #å…¥å£æ–‡ä»¶</span><br><span class="line"></span>|<span class="string">      </span><br><span class="line">â”œâ”€â”€ dist                #å‘å¸ƒç›®å½•</span><br><span class="line">â”œâ”€â”€ node_modules        #åŒ…æ–‡ä»¶å¤¹</span><br><span class="line">â”œâ”€â”€ .gitignore     </span><br><span class="line">â”œâ”€â”€ .jshintrc      </span><br><span class="line">â”œâ”€â”€ server.js           #æœ¬åœ°é™æ€æœåŠ¡å™¨      </span><br><span class="line">â”œâ”€â”€ webpack.config.js   #webpacké…ç½®æ–‡ä»¶</span><br><span class="line">â””â”€â”€ package.json</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬åªå…³æ³¨æˆ‘ä»¬çš„ app å¼€å‘ç›®å½•ã€‚</p>
<h2 id="index-js_å…¥å£æ–‡ä»¶">index.js å…¥å£æ–‡ä»¶</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./containers/App'</span>;</span><br><span class="line"><span class="keyword">import</span> configureStore <span class="keyword">from</span> <span class="string">'./stores/configureStore'</span>;</span><br><span class="line"><span class="keyword">const</span> store = configureStore();</span><br><span class="line">render(</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="title">Provider</span> <span class="attribute">store</span>=<span class="value">&#123;store&#125;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">App</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">Provider</span>&gt;</span>,</span><br><span class="line">  document.getElementById('root')</span><br><span class="line">);</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬ä» react-redux ä¸­è·å–äº†ä¸€ä¸ª Provider ç»„ä»¶ï¼Œæˆ‘ä»¬æŠŠå®ƒæ¸²æŸ“åˆ°åº”ç”¨çš„æœ€å¤–å±‚ã€‚<br>ä»–éœ€è¦ä¸€ä¸ªå±æ€§ store ï¼Œä»–æŠŠè¿™ä¸ª store æ”¾åœ¨contexté‡Œï¼Œç»™App(connect)ç”¨ã€‚</p>
<h2 id="store-1">store</h2><p><code>app/stores.configureStore.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> rootReducer <span class="keyword">from</span> <span class="string">'../reducers'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">configureStore</span>(<span class="params">initialState</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> store = createStore(rootReducer, initialState);</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123;</span><br><span class="line">    <span class="built_in">module</span>.hot.accept(<span class="string">'../reducers'</span>, () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> nextReducer = <span class="built_in">require</span>(<span class="string">'../reducers'</span>);</span><br><span class="line">      store.replaceReducer(nextReducer);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> store;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä»–ä» redux æ‹¿åˆ° createStore è¿™ä¸ªå‡½æ•°ï¼Œå†è·å–åˆ° rootReducer ï¼›<br>createStore å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ(reducer, [initialState])ï¼Œreducer æ¯‹åº¸ç½®ç–‘ï¼Œä»–éœ€è¦ä» store è·å– stateï¼Œä»¥åŠè¿æ¥åˆ° reducer äº¤äº’ã€‚<br>initialState æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ä¸€ä¸ªåˆå§‹åŒ– stateï¼Œå¯é€‰å‚æ•°ã€‚<br><code>module.hot</code>è¿™ä¸ªå¯ä»¥ä¸ç”¨ç®¡ï¼Œè¿™æ˜¯ webpack çƒ­åŠ è½½çš„å¤„ç†ï¼Œä½ ä¹Ÿå¯ä»¥ä¸è¦ä»–ã€‚</p>
<h2 id="å®¹å™¨ç»„ä»¶">å®¹å™¨ç»„ä»¶</h2><p><code>containers/App.jsx</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  addTodo,</span><br><span class="line">  completeTodo,</span><br><span class="line">  setVisibilityFilter,</span><br><span class="line">  VisibilityFilters</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'../actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> AddTodo <span class="keyword">from</span> <span class="string">'../components/AddTodo'</span>;</span><br><span class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span>;</span><br><span class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'../components/Footer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; dispatch, visibleTodos, visibilityFilter &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">AddTodo</span></span><br><span class="line">          <span class="attribute">onAddClick</span>=<span class="value">&#123;text</span> =&gt;</span></span><br><span class="line">            dispatch(addTodo(text))</span><br><span class="line">          &#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="title">TodoList</span></span><br><span class="line">          <span class="attribute">todos</span>=<span class="value">&#123;visibleTodos&#125;</span></span><br><span class="line">          <span class="attribute">onTodoClick</span>=<span class="value">&#123;index</span> =&gt;</span> dispatch(completeTodo(index))&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="title">Footer</span></span><br><span class="line">          <span class="attribute">filter</span>=<span class="value">&#123;visibilityFilter&#125;</span></span><br><span class="line">          <span class="attribute">onFilterChange</span>=<span class="value">&#123;nextFilter</span> =&gt;</span> dispatch(setVisibilityFilter(nextFilter))&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    )</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">App.propTypes = &#123;</span><br><span class="line">  visibleTodos: PropTypes.arrayOf(PropTypes.shape(&#123;</span><br><span class="line">    text: PropTypes.string.isRequired,</span><br><span class="line">    completed: PropTypes.bool.isRequired</span><br><span class="line">  &#125;)),</span><br><span class="line">  visibilityFilter: PropTypes.oneOf([</span><br><span class="line">    <span class="string">'SHOW_ALL'</span>,</span><br><span class="line">    <span class="string">'SHOW_COMPLETED'</span>,</span><br><span class="line">    <span class="string">'SHOW_ACTIVE'</span></span><br><span class="line">  ]).isRequired</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectTodos</span>(<span class="params">todos, filter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (filter) &#123;</span><br><span class="line">    <span class="keyword">case</span> VisibilityFilters.SHOW_ALL:</span><br><span class="line">      <span class="keyword">return</span> todos;</span><br><span class="line">    <span class="keyword">case</span> VisibilityFilters.SHOW_COMPLETED:</span><br><span class="line">      <span class="keyword">return</span> todos.filter(todo =&gt; todo.completed);</span><br><span class="line">    <span class="keyword">case</span> VisibilityFilters.SHOW_ACTIVE:</span><br><span class="line">      <span class="keyword">return</span> todos.filter(todo =&gt; !todo.completed);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„ state æ˜¯ Connect çš„ç»„ä»¶çš„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">select</span>(<span class="params">state</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    visibleTodos: selectTodos(state.todos, state.visibilityFilter),</span><br><span class="line">    visibilityFilter: state.visibilityFilter</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(select)(App);</span><br></pre></td></tr></table></figure></p>
<p>ä»–ä» react-redux è·å– connect è¿æ¥ç»„ä»¶ï¼Œé€šè¿‡ <code>connect(select)(App)</code> è¿æ¥ store å’Œ App å®¹å™¨ç»„ä»¶ã€‚<br>select æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»–èƒ½æ¥æ”¶åˆ°ä¸€ä¸ª state å‚æ•°ï¼Œè¿™ä¸ªå°±æ˜¯ store é‡Œé¢çš„ stateï¼Œç„¶åé€šè¿‡è¿™ä¸ªå‡½æ•°çš„å¤„ç†ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒæŠŠå¯¹è±¡é‡Œé¢çš„å‚æ•°ä»¥å±æ€§ä¼ é€ç»™ Appï¼Œä»¥åŠé™„å¸¦ä¸€ä¸ª dispatchã€‚<br>æ‰€ä»¥åœ¨ App é‡Œé¢å¯ä»¥ï¼š<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; dispatch, visibleTodos, visibilityFilter &#125; = <span class="keyword">this</span>.props;</span><br></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ App é€šè¿‡ connect çš„åˆ° state å’Œ dispatchï¼ŒæŠŠ state ä¼ é€’ç»™å­ç»„ä»¶ã€‚<br>dispatch è¿™ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ª action å‚æ•°ï¼Œç„¶åå°±ä¼šæ‰§è¡Œ reducer é‡Œé¢çš„æ“ä½œã€‚<br>æ¯”å¦‚ï¼š<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text =&gt;</span><br><span class="line">  dispatch<span class="list">(<span class="keyword">addTodo</span><span class="list">(<span class="keyword">text</span>)</span>)</span></span><br></pre></td></tr></table></figure></p>
<p><code>addTodo(text)</code>ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯åœ¨ action é‡Œé¢çš„åˆ°çš„ï¼Œå¯ä»¥çœ‹ action çš„ä»£ç ï¼Œä»–å…¶å®è¿”å›ä¸€ä¸ª action å¯¹è±¡ï¼Œæ‰€ä»¥å…¶å®å°±æ˜¯<code>dispatch(action)</code> ã€‚</p>
<h2 id="action-1">action</h2><p><code>app/actions/index.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_TODO = <span class="string">'ADD_TODO'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> COMPLETE_TODO = <span class="string">'COMPLETE_TODO'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SET_VISIBILITY_FILTER = <span class="string">'SET_VISIBILITY_FILTER'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> VisibilityFilters = &#123;</span><br><span class="line">  SHOW_ALL: <span class="string">'SHOW_ALL'</span>,</span><br><span class="line">  SHOW_COMPLETED: <span class="string">'SHOW_COMPLETED'</span>,</span><br><span class="line">  SHOW_ACTIVE: <span class="string">'SHOW_ACTIVE'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addTodo</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: ADD_TODO,</span><br><span class="line">    text</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">completeTodo</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: COMPLETE_TODO,</span><br><span class="line">    index</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">setVisibilityFilter</span>(<span class="params">filter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: SET_VISIBILITY_FILTER,</span><br><span class="line">    filter</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨å£°æ˜æ¯ä¸€ä¸ªè¿”å› action å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¤´éƒ¨å£°æ˜è¿™ä¸ª action çš„ typeï¼Œä»¥ä¾¿å¥½ç»„ç»‡ç®¡ç†ã€‚<br>æ¯ä¸ªå‡½æ•°éƒ½ä¼šè¿”å›ä¸€ä¸ª action å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨ å®¹å™¨ç»„ä»¶é‡Œé¢ è°ƒç”¨<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text =&gt;</span><br><span class="line">  dispatch<span class="list">(<span class="keyword">addTodo</span><span class="list">(<span class="keyword">text</span>)</span>)</span></span><br></pre></td></tr></table></figure></p>
<p>å°±æ˜¯è°ƒç”¨<code>dispatch(action)</code> ã€‚</p>
<h2 id="reducer-1">reducer</h2><p><code>app/reducers/visibilityFilter.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  SET_VISIBILITY_FILTER,</span><br><span class="line">  VisibilityFilters</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'../actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; SHOW_ALL &#125; = VisibilityFilters;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visibilityFilter</span>(<span class="params">state = SHOW_ALL, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> SET_VISIBILITY_FILTER:</span><br><span class="line">      <span class="keyword">return</span> action.filter;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> visibilityFilter;</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œæˆ‘ä»¬ä» actions è·å¾—å„ä¸ª type çš„å‚æ•°ï¼Œä»¥ä¾¿å’Œ action åšå¥½æ˜ å°„å¯¹åº”ã€‚<br>æ•´ä¸ªå‡½æ•°å…¶å®å°±æ˜¯æ‰§è¡Œ switchï¼Œæ ¹æ®ä¸åŒçš„ action.typeï¼Œè¿”å›ä¸åŒçš„å¯¹è±¡çŠ¶æ€ã€‚<br>ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦ type å¾ˆå¤šï¼Œæ¯”å¦‚é™¤äº† visibilityFilterï¼Œè¿˜æœ‰ todosï¼Œéš¾é“è¦å†™ä¸€ä¸ªé•¿é•¿çš„switchï¼Œå½“ç„¶ä¸ã€‚<br>redux æä¾›ä¸€ä¸ª combineReducers è¾…åŠ©å‡½æ•°ï¼ŒæŠŠä¸€ä¸ªç”±å¤šä¸ªä¸åŒ reducer å‡½æ•°ä½œä¸º value çš„ objectï¼Œåˆå¹¶æˆä¸€ä¸ªæœ€ç»ˆçš„ reducer å‡½æ•°ï¼Œç„¶åå°±å¯ä»¥å¯¹è¿™ä¸ª reducer è°ƒç”¨ createStoreã€‚<br>æˆ‘ä»¬æŠŠä¸åŒçš„ reducer æ”¾åœ¨ä¸åŒæ–‡ä»¶ä¸‹ã€‚<br><code>app/reducers/todo.js</code><br><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import &#123;</span><br><span class="line">  ADD_TODO,</span><br><span class="line">  COMPLETE_TODO</span><br><span class="line">&#125; <span class="keyword">from</span> '../actions';</span><br><span class="line"></span><br><span class="line">function todos(<span class="keyword">state</span> = [], action) &#123;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case ADD_TODO:</span><br><span class="line">      return [</span><br><span class="line">        ...<span class="keyword">state</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          text: action.text,</span><br><span class="line">          completed: false</span><br><span class="line">        &#125;</span><br><span class="line">      ];</span><br><span class="line">    case COMPLETE_TODO:</span><br><span class="line">      return [</span><br><span class="line">        ...<span class="keyword">state</span>.slice(<span class="number">0</span>, action.index),</span><br><span class="line">        Object.assign(&#123;&#125;, <span class="keyword">state</span>[action.index], &#123;</span><br><span class="line">          completed: true</span><br><span class="line">        &#125;),</span><br><span class="line">        ...<span class="keyword">state</span>.slice(action.index + <span class="number">1</span>)</span><br><span class="line">      ];</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      return <span class="keyword">state</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> todos;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åé€šè¿‡ä¸€ä¸ª index.js æŠŠä»–ä»¬åˆå¹¶ã€‚<br><code>app/reducers/index.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> todos <span class="keyword">from</span> <span class="string">'./todos'</span>;</span><br><span class="line"><span class="keyword">import</span> visibilityFilter <span class="keyword">from</span> <span class="string">'./visibilityFilter'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rootReducer = combineReducers(&#123;</span><br><span class="line">  todos,</span><br><span class="line">  visibilityFilter</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> rootReducer;</span><br></pre></td></tr></table></figure></p>
<h2 id="å±•ç¤ºç»„ä»¶">å±•ç¤ºç»„ä»¶</h2><p><code>app/components/AddTodo/index.jsx</code><br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span>, <span class="type">PropTypes</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"><span class="keyword">import</span> &#123; findDOMNode &#125; from <span class="symbol">'react</span>-dom';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">AddTodo</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input <span class="class"><span class="keyword">type</span>=</span><span class="symbol">'tex</span>t' ref=<span class="symbol">'inpu</span>t' /&gt;</span><br><span class="line">        &lt;button onClick=&#123; e =&gt; <span class="keyword">this</span>.handleClick(e) &#125;&gt;</span><br><span class="line">          <span class="type">Add</span></span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClick(e) &#123;</span><br><span class="line">    const inputNode = findDOMNode(<span class="keyword">this</span>.refs.input);</span><br><span class="line">    const text = inputNode.value.trim();</span><br><span class="line">    <span class="keyword">this</span>.props.onAddClick(text);</span><br><span class="line">    inputNode.value = '';</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">AddTodo</span>.propTypes = &#123;</span><br><span class="line">  onAddClick: <span class="type">PropTypes</span>.func.isRequired</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><code>app/components/Todo/index.jsx</code><br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span>, <span class="type">PropTypes</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Todo</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; onClick, completed, text &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;li</span><br><span class="line">        onClick=&#123;onClick&#125;</span><br><span class="line">        style=&#123;&#123;</span><br><span class="line">          textDecoration: completed ? <span class="symbol">'line</span>-through' : <span class="symbol">'non</span>e',</span><br><span class="line">          cursor: completed ? <span class="symbol">'defaul</span>t' : <span class="symbol">'pointe</span>r'</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;text&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Todo</span>.propTypes = &#123;</span><br><span class="line">  onClick: <span class="type">PropTypes</span>.func.isRequired,</span><br><span class="line">  text: <span class="type">PropTypes</span>.string.isRequired,</span><br><span class="line">  completed: <span class="type">PropTypes</span>.bool.isRequired</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><code>app/components/TodoList/index.jsx</code><br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span>, <span class="type">PropTypes</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"><span class="keyword">import</span> <span class="type">Todo</span> from '../<span class="type">Todo</span>';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoList</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">this</span>.props.todos.map((todo, index) =&gt;</span><br><span class="line">            &lt;<span class="type">Todo</span></span><br><span class="line">              &#123;...todo&#125;</span><br><span class="line">              onClick=&#123;() =&gt; <span class="keyword">this</span>.props.onTodoClick(index)&#125;</span><br><span class="line">              key=&#123;index&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">TodoList</span>.propTypes = &#123;</span><br><span class="line">  onTodoClick: <span class="type">PropTypes</span>.func.isRequired,</span><br><span class="line">  todos: <span class="type">PropTypes</span>.arrayOf(<span class="type">PropTypes</span>.shape(&#123;</span><br><span class="line">    text: <span class="type">PropTypes</span>.string.isRequired,</span><br><span class="line">    completed: <span class="type">PropTypes</span>.bool.isRequired</span><br><span class="line">  &#125;).isRequired).isRequired</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><code>app/components/Footer/index.jsx</code><br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">React</span>, &#123; <span class="type">Component</span>, <span class="type">PropTypes</span> &#125; from <span class="symbol">'reac</span>t';</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Footer</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Component</span> &#123;</span></span><br><span class="line">  renderFilter(filter, name) &#123;</span><br><span class="line">    <span class="keyword">if</span>(filter == <span class="keyword">this</span>.props.filter) &#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;a</span><br><span class="line">        href=<span class="string">"#"</span></span><br><span class="line">        onClick=&#123;e =&gt; &#123;</span><br><span class="line">          e.preventDefault();</span><br><span class="line">          <span class="keyword">this</span>.props.onFilterChange(filter);</span><br><span class="line">        &#125;&#125;&gt;</span><br><span class="line">        &#123;name&#125;</span><br><span class="line">      &lt;/a&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        <span class="type">SHOW</span></span><br><span class="line">        &#123;' '&#125;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderFilter(<span class="symbol">'SHOW_AL</span>L', <span class="symbol">'Al</span>l')&#125;</span><br><span class="line">        &#123;', '&#125;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderFilter(<span class="symbol">'SHOW_COMPLETE</span>D', <span class="symbol">'Complete</span>d')&#125;</span><br><span class="line">        &#123;', '&#125;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderFilter(<span class="symbol">'SHOW_ACTIV</span>E', <span class="symbol">'Activ</span>e')&#125;</span><br><span class="line">        .</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Footer</span>.propTypes = &#123;</span><br><span class="line">  onFilterChange: <span class="type">PropTypes</span>.func.isRequired,</span><br><span class="line">  filter: <span class="type">PropTypes</span>.oneOf([</span><br><span class="line">    <span class="symbol">'SHOW_AL</span>L',</span><br><span class="line">    <span class="symbol">'SHOW_COMPLETE</span>D',</span><br><span class="line">    <span class="symbol">'SHOW_ACTIV</span>E'</span><br><span class="line">  ]).isRequired</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œæ‰€æœ‰çš„å±•ç¤ºç»„ä»¶éœ€è¦çš„ state å’Œ æ•°æ®ï¼Œéƒ½ä»å±æ€§ä¸­è·å–çš„ï¼Œæ‰€æœ‰çš„æ“ä½œï¼Œéƒ½æ˜¯é€šè¿‡å®¹å™¨ç»„ä»¶ç»™çš„å›è°ƒå‡½æ•°æ¥æ“ä½œçš„ã€‚<br>ä»–ä»¬å°½å¯èƒ½åœ°ä¸æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œåšæ— çŠ¶æ€ç»„ä»¶ã€‚</p>
<h1 id="end">end</h1><p>å…³äº redux çš„ç”¨æ³•ï¼Œè¿™åªæ˜¯åŸºç¡€å…¥é—¨çš„éƒ¨åˆ†ï¼Œè¿˜æœ‰çš„å¤šçš„æåŸºæ“ä½œï¼Œæ¯”å¦‚å¼‚æ­¥æ•°æ®æµã€Middlewareã€å’Œ router é…åˆã€‚<br>æ•¬è¯·æœŸå¾…ï½ï½ï½ï½<br>ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶</p>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/FE/" rel="tag">#FE</a>
          
            <a href="/tags/react/" rel="tag">#react</a>
          
            <a href="/tags/redux/" rel="tag">#redux</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/post/webpack-2-çš„æ–°ç‰¹æ€§-What-s-new-in-webpack-2.html" rel="prev">webpack 2 çš„æ–°ç‰¹æ€§ - What's new in webpack 2</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/post/è°ˆè°ˆ-react-router.html" rel="next">è°ˆè°ˆ react-router</a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="post/redux-å¤§æ³•å¥½-â€”â€”-å…¥é—¨å®ä¾‹-TodoList.html"
     data-title="redux å¤§æ³•å¥½ â€”â€” å…¥é—¨å®ä¾‹ TodoList"
     data-content=""
     data-url="http://qiutc.me/post/redux-å¤§æ³•å¥½-â€”â€”-å…¥é—¨å®ä¾‹-TodoList.html">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">åˆ†äº«åˆ°ï¼š</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">å¾®åš</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQç©ºé—´</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">è…¾è®¯å¾®åš</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">å¾®ä¿¡</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>

      
    </div>
  </div>

 </div>

        

        
          <div class="comments" id="comments">
            
              <div class="ds-thread" data-thread-key="post/redux-å¤§æ³•å¥½-â€”â€”-å…¥é—¨å®ä¾‹-TodoList.html"
                   data-title="redux å¤§æ³•å¥½ â€”â€” å…¥é—¨å®ä¾‹ TodoList" data-url="http://qiutc.me/post/redux-å¤§æ³•å¥½-â€”â€”-å…¥é—¨å®ä¾‹-TodoList.html">
              </div>
            
          </div>
        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/qtc_avatar.jpg" alt="é˜¿åŸğŸ˜‡" itemprop="image"/>
          <p class="site-author-name" itemprop="name">é˜¿åŸğŸ˜‡</p>
        </div>
        <p class="site-description motion-element" itemprop="description">hello word! ğŸ˜º</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">12</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">9</span>
              <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">20</span>
              <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="menu-item-icon icon-next-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/tongchengqiu" target="_blank">GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/tongchengqiu" target="_blank">Twitter</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/tongchengqiu" target="_blank">Zhihu</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/tongchengqiu" target="_blank">Weibo</a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Tip"><span class="nav-number">1.</span> <span class="nav-text">Tip</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#advantage"><span class="nav-number">2.</span> <span class="nav-text">advantage</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#state_æ ¹å¯¹è±¡çš„ç»“æ„"><span class="nav-number">3.</span> <span class="nav-text">state æ ¹å¯¹è±¡çš„ç»“æ„</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#part"><span class="nav-number">4.</span> <span class="nav-text">part</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#store"><span class="nav-number">4.1.</span> <span class="nav-text">store</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#action"><span class="nav-number">4.2.</span> <span class="nav-text">action</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reducer"><span class="nav-number">4.3.</span> <span class="nav-text">reducer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ•°æ®æµ"><span class="nav-number">4.4.</span> <span class="nav-text">æ•°æ®æµ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#connect"><span class="nav-number">5.</span> <span class="nav-text">connect</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Provider"><span class="nav-number">5.1.</span> <span class="nav-text">Provider</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#connect-1"><span class="nav-number">5.2.</span> <span class="nav-text">connect</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å®æˆ˜_TodoList"><span class="nav-number">6.</span> <span class="nav-text">å®æˆ˜ TodoList</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ç›®å½•ç»“æ„"><span class="nav-number">6.1.</span> <span class="nav-text">ç›®å½•ç»“æ„</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#index-js_å…¥å£æ–‡ä»¶"><span class="nav-number">6.2.</span> <span class="nav-text">index.js å…¥å£æ–‡ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#store-1"><span class="nav-number">6.3.</span> <span class="nav-text">store</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®¹å™¨ç»„ä»¶"><span class="nav-number">6.4.</span> <span class="nav-text">å®¹å™¨ç»„ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#action-1"><span class="nav-number">6.5.</span> <span class="nav-text">action</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reducer-1"><span class="nav-number">6.6.</span> <span class="nav-text">reducer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å±•ç¤ºç»„ä»¶"><span class="nav-number">6.7.</span> <span class="nav-text">å±•ç¤ºç»„ä»¶</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#end"><span class="nav-number">7.</span> <span class="nav-text">end</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </section>
      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">é˜¿åŸğŸ˜‡</span>
</div>

<div class="powered-by">
  ç”± <a class="theme-link" href="http://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>


<br/>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="showDays"></span>
<script>
var birthDay = new Date("10/03/2015");
var now = new Date();
var duration = now.getTime() - birthDay.getTime();
var total= Math.floor(duration / (1000 * 60 * 60 * 24));
document.getElementById("showDays").innerHTML = "æœ¬ç«™å·²è¿è¡Œ "+total+" å¤©";
</script>
---
<span id="busuanzi_container_site_pv">
    æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
</span>

 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"qiutongcheng"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    

  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>

  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.1" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 0.4 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    var $tocContent = $('.post-toc-content');
    if (isDesktop() && CONFIG.sidebar === 'post') {
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
        displaySidebar();
      }
    }
  });
</script>



  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"3","bdPos":"left","bdTop":"250"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
